import { CUSTOM_EMOJI, EMOJI } from '../types/endpoint.ts';
import { Snowflake } from '../utils/snowflake.ts';
import { Base } from './base.ts';
import { ImageURL } from './cdn.ts';
import { Role } from './role.ts';
import { User } from './user.ts';
/** Guild Emoji Object */ export class Emoji extends Base {
    id;
    get snowflake() {
        return this.id === null ? null : new Snowflake(this.id);
    }
    get timestamp() {
        return this.snowflake === null ? null : new Date(this.snowflake.timestamp);
    }
    name;
    roles;
    user;
    guild;
    requireColons;
    managed;
    animated;
    available;
    get getEmojiString() {
        if (this.id === null) {
            return this.name;
        } else {
            if (this.animated === false) {
                return `<:${this.name}:${this.id}>`;
            } else return `<a:${this.name}:${this.id}>`;
        }
    }
    toString() {
        return this.getEmojiString;
    }
    constructor(client, data){
        super(client, data);
        this.readFromData(data);
    }
    /**
   * Gets emoji image URL
   */ emojiImageURL(format = 'png', size = 512) {
        return this.id != null ? `${ImageURL(CUSTOM_EMOJI(this.id), format, size)}` : undefined;
    }
    /** Modify the given emoji. Requires the MANAGE_EMOJIS permission. Returns the updated emoji object on success. Fires a Guild Emojis Update Gateway event. */ async edit(data) {
        if (this.id === null) throw new Error('Emoji ID is not valid.');
        if (this.guild === undefined) throw new Error('Guild is undefined');
        const roles = Array.isArray(data.roles) ? data.roles.map((role)=>role instanceof Role ? role.id : role) : [
            data.roles instanceof Role ? data.roles.id : data.roles
        ];
        const res = await this.client.rest.patch(EMOJI(this.guild.id, this.id), {
            ...data,
            roles
        });
        return new Emoji(this.client, res);
    }
    /** Delete the given emoji. Requires the MANAGE_EMOJIS permission. Returns `true` on success. Fires a Guild Emojis Update Gateway event. */ async delete() {
        if (this.id === null) return false;
        if (this.guild === undefined) return false;
        await this.client.rest.delete(EMOJI(this.guild.id, this.id));
        return true;
    }
    readFromData(data) {
        this.id = data.id ?? this.id;
        this.name = data.name ?? this.name;
        this.roles = data.roles ?? this.roles;
        this.requireColons = data.require_colons ?? this.requireColons;
        this.managed = data.managed ?? this.managed;
        this.animated = data.animated ?? this.animated;
        this.available = data.available ?? this.available;
        if (data.user !== undefined) this.user = new User(this.client, data.user);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvaGFybW9ueUB2Mi45LjAvc3JjL3N0cnVjdHVyZXMvZW1vamkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBDbGllbnQgfSBmcm9tICcuLi9jbGllbnQvbW9kLnRzJ1xuaW1wb3J0IHR5cGUgeyBJbWFnZVNpemUgfSBmcm9tICcuLi90eXBlcy9jZG4udHMnXG5pbXBvcnQgdHlwZSB7IEVtb2ppUGF5bG9hZCB9IGZyb20gJy4uL3R5cGVzL2Vtb2ppLnRzJ1xuaW1wb3J0IHsgQ1VTVE9NX0VNT0pJLCBFTU9KSSB9IGZyb20gJy4uL3R5cGVzL2VuZHBvaW50LnRzJ1xuaW1wb3J0IHsgU25vd2ZsYWtlIH0gZnJvbSAnLi4vdXRpbHMvc25vd2ZsYWtlLnRzJ1xuaW1wb3J0IHsgQmFzZSB9IGZyb20gJy4vYmFzZS50cydcbmltcG9ydCB7IEltYWdlVVJMIH0gZnJvbSAnLi9jZG4udHMnXG5pbXBvcnQgdHlwZSB7IEd1aWxkIH0gZnJvbSAnLi9ndWlsZC50cydcbmltcG9ydCB7IFJvbGUgfSBmcm9tICcuL3JvbGUudHMnXG5pbXBvcnQgeyBVc2VyIH0gZnJvbSAnLi91c2VyLnRzJ1xuXG4vKiogR3VpbGQgRW1vamkgT2JqZWN0ICovXG5leHBvcnQgY2xhc3MgRW1vamkgZXh0ZW5kcyBCYXNlIHtcbiAgaWQhOiBzdHJpbmcgfCBudWxsXG5cbiAgZ2V0IHNub3dmbGFrZSgpOiBTbm93Zmxha2UgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5pZCA9PT0gbnVsbCA/IG51bGwgOiBuZXcgU25vd2ZsYWtlKHRoaXMuaWQpXG4gIH1cblxuICBnZXQgdGltZXN0YW1wKCk6IERhdGUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5zbm93Zmxha2UgPT09IG51bGwgPyBudWxsIDogbmV3IERhdGUodGhpcy5zbm93Zmxha2UudGltZXN0YW1wKVxuICB9XG5cbiAgbmFtZSE6IHN0cmluZyB8IG51bGxcbiAgcm9sZXM/OiBzdHJpbmdbXVxuICB1c2VyPzogVXNlclxuICBndWlsZD86IEd1aWxkXG4gIHJlcXVpcmVDb2xvbnM/OiBib29sZWFuXG4gIG1hbmFnZWQ/OiBib29sZWFuXG4gIGFuaW1hdGVkPzogYm9vbGVhblxuICBhdmFpbGFibGU/OiBib29sZWFuXG5cbiAgZ2V0IGdldEVtb2ppU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuaWQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0aGlzLm5hbWUgYXMgc3RyaW5nXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmFuaW1hdGVkID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gYDw6JHt0aGlzLm5hbWV9OiR7dGhpcy5pZH0+YFxuICAgICAgfSBlbHNlIHJldHVybiBgPGE6JHt0aGlzLm5hbWV9OiR7dGhpcy5pZH0+YFxuICAgIH1cbiAgfVxuXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RW1vamlTdHJpbmdcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKGNsaWVudDogQ2xpZW50LCBkYXRhOiBFbW9qaVBheWxvYWQpIHtcbiAgICBzdXBlcihjbGllbnQsIGRhdGEpXG4gICAgdGhpcy5yZWFkRnJvbURhdGEoZGF0YSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGVtb2ppIGltYWdlIFVSTFxuICAgKi9cbiAgZW1vamlJbWFnZVVSTChcbiAgICBmb3JtYXQ6ICdwbmcnIHwgJ2dpZicgfCAnZHluYW1pYycgPSAncG5nJyxcbiAgICBzaXplOiBJbWFnZVNpemUgPSA1MTJcbiAgKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5pZCAhPSBudWxsXG4gICAgICA/IGAke0ltYWdlVVJMKENVU1RPTV9FTU9KSSh0aGlzLmlkKSwgZm9ybWF0LCBzaXplKX1gXG4gICAgICA6IHVuZGVmaW5lZFxuICB9XG5cbiAgLyoqIE1vZGlmeSB0aGUgZ2l2ZW4gZW1vamkuIFJlcXVpcmVzIHRoZSBNQU5BR0VfRU1PSklTIHBlcm1pc3Npb24uIFJldHVybnMgdGhlIHVwZGF0ZWQgZW1vamkgb2JqZWN0IG9uIHN1Y2Nlc3MuIEZpcmVzIGEgR3VpbGQgRW1vamlzIFVwZGF0ZSBHYXRld2F5IGV2ZW50LiAqL1xuICBhc3luYyBlZGl0KGRhdGE6IE1vZGlmeUd1aWxkRW1vamlQYXJhbXMpOiBQcm9taXNlPEVtb2ppPiB7XG4gICAgaWYgKHRoaXMuaWQgPT09IG51bGwpIHRocm93IG5ldyBFcnJvcignRW1vamkgSUQgaXMgbm90IHZhbGlkLicpXG4gICAgaWYgKHRoaXMuZ3VpbGQgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCdHdWlsZCBpcyB1bmRlZmluZWQnKVxuICAgIGNvbnN0IHJvbGVzID0gQXJyYXkuaXNBcnJheShkYXRhLnJvbGVzKVxuICAgICAgPyBkYXRhLnJvbGVzLm1hcCgocm9sZSkgPT4gKHJvbGUgaW5zdGFuY2VvZiBSb2xlID8gcm9sZS5pZCA6IHJvbGUpKVxuICAgICAgOiBbZGF0YS5yb2xlcyBpbnN0YW5jZW9mIFJvbGUgPyBkYXRhLnJvbGVzLmlkIDogZGF0YS5yb2xlc11cbiAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmNsaWVudC5yZXN0LnBhdGNoKEVNT0pJKHRoaXMuZ3VpbGQuaWQsIHRoaXMuaWQpLCB7XG4gICAgICAuLi5kYXRhLFxuICAgICAgcm9sZXNcbiAgICB9KVxuICAgIHJldHVybiBuZXcgRW1vamkodGhpcy5jbGllbnQsIHJlcylcbiAgfVxuXG4gIC8qKiBEZWxldGUgdGhlIGdpdmVuIGVtb2ppLiBSZXF1aXJlcyB0aGUgTUFOQUdFX0VNT0pJUyBwZXJtaXNzaW9uLiBSZXR1cm5zIGB0cnVlYCBvbiBzdWNjZXNzLiBGaXJlcyBhIEd1aWxkIEVtb2ppcyBVcGRhdGUgR2F0ZXdheSBldmVudC4gKi9cbiAgYXN5bmMgZGVsZXRlKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIGlmICh0aGlzLmlkID09PSBudWxsKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy5ndWlsZCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2VcbiAgICBhd2FpdCB0aGlzLmNsaWVudC5yZXN0LmRlbGV0ZShFTU9KSSh0aGlzLmd1aWxkLmlkLCB0aGlzLmlkKSlcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgcmVhZEZyb21EYXRhKGRhdGE6IEVtb2ppUGF5bG9hZCk6IHZvaWQge1xuICAgIHRoaXMuaWQgPSBkYXRhLmlkID8/IHRoaXMuaWRcbiAgICB0aGlzLm5hbWUgPSBkYXRhLm5hbWUgPz8gdGhpcy5uYW1lXG4gICAgdGhpcy5yb2xlcyA9IGRhdGEucm9sZXMgPz8gdGhpcy5yb2xlc1xuICAgIHRoaXMucmVxdWlyZUNvbG9ucyA9IGRhdGEucmVxdWlyZV9jb2xvbnMgPz8gdGhpcy5yZXF1aXJlQ29sb25zXG4gICAgdGhpcy5tYW5hZ2VkID0gZGF0YS5tYW5hZ2VkID8/IHRoaXMubWFuYWdlZFxuICAgIHRoaXMuYW5pbWF0ZWQgPSBkYXRhLmFuaW1hdGVkID8/IHRoaXMuYW5pbWF0ZWRcbiAgICB0aGlzLmF2YWlsYWJsZSA9IGRhdGEuYXZhaWxhYmxlID8/IHRoaXMuYXZhaWxhYmxlXG4gICAgaWYgKGRhdGEudXNlciAhPT0gdW5kZWZpbmVkKSB0aGlzLnVzZXIgPSBuZXcgVXNlcih0aGlzLmNsaWVudCwgZGF0YS51c2VyKVxuICB9XG59XG5cbi8qKiBodHRwczovL2Rpc2NvcmQuY29tL2RldmVsb3BlcnMvZG9jcy9yZXNvdXJjZXMvZW1vamkjbW9kaWZ5LWd1aWxkLWVtb2ppLWpzb24tcGFyYW1zICovXG5leHBvcnQgaW50ZXJmYWNlIE1vZGlmeUd1aWxkRW1vamlQYXJhbXMge1xuICAvKiogTmFtZSBvZiB0aGUgZW1vamkgKi9cbiAgbmFtZT86IHN0cmluZ1xuICAvKiogUm9sZXMgdG8gd2hpY2ggdGhpcyBlbW9qaSB3aWxsIGJlIHdoaXRlbGlzdGVkICovXG4gIHJvbGVzPzogc3RyaW5nIHwgUm9sZSB8IEFycmF5PHN0cmluZyB8IFJvbGU+XG59XG4iXSwibmFtZXMiOltdLCJtYXBw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