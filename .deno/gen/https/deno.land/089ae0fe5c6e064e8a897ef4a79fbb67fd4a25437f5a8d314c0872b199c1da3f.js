import { simplifyAPIError } from '../utils/err_fmt.ts';
export class DiscordAPIError extends Error {
    name = 'DiscordAPIError';
    status;
    error;
    constructor(error){
        super();
        this.status = typeof error === 'string' ? -1 : error.status;
        const fmt = Object.entries(typeof error === 'object' ? simplifyAPIError(error.errors ?? {}) : {});
        this.message = typeof error === 'string' ? `${error} ` : `\n${error.method.toUpperCase()} ${error.url} returned ${error.status}\n(${error.code ?? 'unknown'}) ${error.message}${fmt.length === 0 ? '' : `\n${fmt.map((e)=>`  at ${e[0]}:\n${e[1].map((e)=>`   - ${e}`).join('\n')}`).join('\n')}\n`}`;
        if (typeof error === 'object') this.error = error;
    }
}
export class HTTPError extends Error {
    constructor(message, name, code, method, path){
        super(message);
        this.message = message;
        this.name = name;
        this.code = code;
        this.method = method;
        this.path = path;
    }
    message;
    name;
    code;
    method;
    path;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvaGFybW9ueUB2Mi45LjAvc3JjL3Jlc3QvZXJyb3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2ltcGxpZnlBUElFcnJvciB9IGZyb20gJy4uL3V0aWxzL2Vycl9mbXQudHMnXG5pbXBvcnQgeyBEaXNjb3JkQVBJRXJyb3JQYXlsb2FkIH0gZnJvbSAnLi90eXBlcy50cydcblxuZXhwb3J0IGNsYXNzIERpc2NvcmRBUElFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgbmFtZSA9ICdEaXNjb3JkQVBJRXJyb3InXG4gIHN0YXR1czogbnVtYmVyXG4gIGVycm9yPzogRGlzY29yZEFQSUVycm9yUGF5bG9hZFxuXG4gIGNvbnN0cnVjdG9yKGVycm9yOiBzdHJpbmcgfCBEaXNjb3JkQVBJRXJyb3JQYXlsb2FkKSB7XG4gICAgc3VwZXIoKVxuICAgIHRoaXMuc3RhdHVzID0gdHlwZW9mIGVycm9yID09PSAnc3RyaW5nJyA/IC0xIDogZXJyb3Iuc3RhdHVzXG4gICAgY29uc3QgZm10ID0gT2JqZWN0LmVudHJpZXMoXG4gICAgICB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnID8gc2ltcGxpZnlBUElFcnJvcihlcnJvci5lcnJvcnMgPz8ge30pIDoge31cbiAgICApXG4gICAgdGhpcy5tZXNzYWdlID1cbiAgICAgIHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZydcbiAgICAgICAgPyBgJHtlcnJvcn0gYFxuICAgICAgICA6IGBcXG4ke2Vycm9yLm1ldGhvZC50b1VwcGVyQ2FzZSgpfSAke2Vycm9yLnVybH0gcmV0dXJuZWQgJHtcbiAgICAgICAgICAgIGVycm9yLnN0YXR1c1xuICAgICAgICAgIH1cXG4oJHtlcnJvci5jb2RlID8/ICd1bmtub3duJ30pICR7ZXJyb3IubWVzc2FnZX0ke1xuICAgICAgICAgICAgZm10Lmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICA/ICcnXG4gICAgICAgICAgICAgIDogYFxcbiR7Zm10XG4gICAgICAgICAgICAgICAgICAubWFwKFxuICAgICAgICAgICAgICAgICAgICAoZSkgPT5cbiAgICAgICAgICAgICAgICAgICAgICBgICBhdCAke2VbMF19OlxcbiR7ZVsxXVxuICAgICAgICAgICAgICAgICAgICAgICAgLm1hcCgoZSkgPT4gYCAgIC0gJHtlfWApXG4gICAgICAgICAgICAgICAgICAgICAgICAuam9pbignXFxuJyl9YFxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgLmpvaW4oJ1xcbicpfVxcbmBcbiAgICAgICAgICB9YFxuICAgIGlmICh0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnKSB0aGlzLmVycm9yID0gZXJyb3JcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgSFRUUEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgbWVzc2FnZTogc3RyaW5nLFxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmcsXG4gICAgcHVibGljIGNvZGU6IG51bWJlcixcbiAgICBwdWJsaWMgbWV0aG9kOiBzdHJpbmcsXG4gICAgcHVibGljIHBhdGg6IHN0cmluZ1xuICApIHtcbiAgICBzdXBlcihtZXNzYWdlKVxuICB9XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsU0FBUyxnQkFBZ0IsUUFBUSxzQkFBcUI7QUFHdEQsT0FBTyxNQUFNLHdCQUF3QjtJQUNuQyxPQUFPLGtCQUFpQjtJQUN4QixPQUFjO0lBQ2QsTUFBOEI7SUFFOUIsWUFBWSxLQUFzQyxDQUFFO1FBQ2xELEtBQUs7UUFDTCxJQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sVUFBVSxXQUFXLENBQUMsSUFBSSxNQUFNLE1BQU07UUFDM0QsTUFBTSxNQUFNLE9BQU8sT0FBTyxDQUN4QixPQUFPLFVBQVUsV0FBVyxpQkFBaUIsTUFBTSxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUV2RSxJQUFJLENBQUMsT0FBTyxHQUNWLE9BQU8sVUFBVSxXQUNiLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUNYLENBQUMsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDLFdBQVcsR0FBRyxDQUFDLEVBQUUsTUFBTSxHQUFHLENBQUMsVUFBVSxFQUNyRCxNQUFNLE1BQU0sQ0FDYixHQUFHLEVBQUUsTUFBTSxJQUFJLElBQUksVUFBVSxFQUFFLEVBQUUsTUFBTSxPQUFPLENBQUMsRUFDOUMsSUFBSSxNQUFNLEtBQUssSUFDWCxLQUNBLENBQUMsRUFBRSxFQUFFLElBQ0YsR0FBRyxDQUNGLENBQUMsSUFDQyxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUNuQixHQUFHLENBQUMsQ0FBQyxJQUFNLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxFQUN0QixJQUFJLENBQUMsTUFBTSxDQUFDLEVBRWxCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUN0QixDQUFDO1FBQ1IsSUFBSSxPQUFPLFVBQVUsVUFBVSxJQUFJLENBQUMsS0FBSyxHQUFHO0lBQzlDO0FBQ0YsQ0FBQztBQUVELE9BQU8sTUFBTSxrQkFBa0I7SUFDN0IsWUFDUyxTQUNBLE1BQ0EsTUFDQSxRQUNBLEtBQ1A7UUFDQSxLQUFLLENBQUM7dUJBTkM7b0JBQ0E7b0JBQ0E7c0JBQ0E7b0JBQ0E7SUFHVDtJQVBTO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7QUFJWCxDQUFDIn0=