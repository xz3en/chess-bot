import { Collection } from '../../utils/collection.ts';
export const threadMembersUpdate = async (gateway, d)=>{
    const guild = await gateway.client.guilds.get(d.guild_id);
    if (guild === undefined) return;
    const thread = await guild.threads.get(d.id);
    if (thread === undefined) return;
    const added = new Collection();
    const removed = new Collection();
    for (const data of d.added_members ?? []){
        await thread.members.set(data.id, data);
        added.set(data.id, await thread.members.get(data.id));
    }
    for (const id of d.removed_member_ids ?? []){
        const member = await thread.members.get(id);
        removed.set(id, member);
    }
    gateway.client.emit('threadMembersUpdate', guild, added, removed, d.member_count);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvaGFybW9ueUB2Mi45LjAvc3JjL2dhdGV3YXkvaGFuZGxlcnMvdGhyZWFkTWVtYmVyc1VwZGF0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEdhdGV3YXksIEdhdGV3YXlFdmVudEhhbmRsZXIgfSBmcm9tICcuLi9tb2QudHMnXG5pbXBvcnQgdHlwZSB7IFRocmVhZE1lbWJlclBheWxvYWQgfSBmcm9tICcuLi8uLi90eXBlcy9jaGFubmVsLnRzJ1xuaW1wb3J0IHsgQ29sbGVjdGlvbiB9IGZyb20gJy4uLy4uL3V0aWxzL2NvbGxlY3Rpb24udHMnXG5pbXBvcnQgeyBUaHJlYWRNZW1iZXIgfSBmcm9tICcuLi8uLi9zdHJ1Y3R1cmVzL3RocmVhZENoYW5uZWwudHMnXG5cbmV4cG9ydCBjb25zdCB0aHJlYWRNZW1iZXJzVXBkYXRlOiBHYXRld2F5RXZlbnRIYW5kbGVyID0gYXN5bmMgKFxuICBnYXRld2F5OiBHYXRld2F5LFxuICBkOiB7XG4gICAgaWQ6IHN0cmluZ1xuICAgIGd1aWxkX2lkOiBzdHJpbmdcbiAgICBtZW1iZXJfY291bnQ6IG51bWJlclxuICAgIGFkZGVkX21lbWJlcnM/OiBUaHJlYWRNZW1iZXJQYXlsb2FkW11cbiAgICByZW1vdmVkX21lbWJlcl9pZHM/OiBzdHJpbmdbXVxuICB9XG4pID0+IHtcbiAgY29uc3QgZ3VpbGQgPSBhd2FpdCBnYXRld2F5LmNsaWVudC5ndWlsZHMuZ2V0KGQuZ3VpbGRfaWQpXG4gIGlmIChndWlsZCA9PT0gdW5kZWZpbmVkKSByZXR1cm5cbiAgY29uc3QgdGhyZWFkID0gYXdhaXQgZ3VpbGQudGhyZWFkcy5nZXQoZC5pZClcbiAgaWYgKHRocmVhZCA9PT0gdW5kZWZpbmVkKSByZXR1cm5cblxuICBjb25zdCBhZGRlZCA9IG5ldyBDb2xsZWN0aW9uPHN0cmluZywgVGhyZWFkTWVtYmVyPigpXG4gIGNvbnN0IHJlbW92ZWQgPSBuZXcgQ29sbGVjdGlvbjxzdHJpbmcsIFRocmVhZE1lbWJlciB8IHVuZGVmaW5lZD4oKVxuXG4gIGZvciAoY29uc3QgZGF0YSBvZiBkLmFkZGVkX21lbWJlcnMgPz8gW10pIHtcbiAgICBhd2FpdCB0aHJlYWQubWVtYmVycy5zZXQoZGF0YS5pZCwgZGF0YSlcbiAgICBhZGRlZC5zZXQoZGF0YS5pZCwgKGF3YWl0IHRocmVhZC5tZW1iZXJzLmdldChkYXRhLmlkKSkhKVxuICB9XG5cbiAgZm9yIChjb25zdCBpZCBvZiBkLnJlbW92ZWRfbWVtYmVyX2lkcyA/PyBbXSkge1xuICAgIGNvbnN0IG1lbWJlciA9IGF3YWl0IHRocmVhZC5tZW1iZXJzLmdldChpZClcbiAgICByZW1vdmVkLnNldChpZCwgbWVtYmVyKVxuICB9XG5cbiAgZ2F0ZXdheS5jbGllbnQuZW1pdChcbiAgICAndGhyZWFkTWVtYmVyc1VwZGF0ZScsXG4gICAgZ3VpbGQsXG4gICAgYWRkZWQsXG4gICAgcmVtb3ZlZCxcbiAgICBkLm1lbWJlcl9jb3VudFxuICApXG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsU0FBUyxVQUFVLFFBQVEsNEJBQTJCO0FBR3RELE9BQU8sTUFBTSxzQkFBMkMsT0FDdEQsU0FDQSxJQU9HO0lBQ0gsTUFBTSxRQUFRLE1BQU0sUUFBUSxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLFFBQVE7SUFDeEQsSUFBSSxVQUFVLFdBQVc7SUFDekIsTUFBTSxTQUFTLE1BQU0sTUFBTSxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRTtJQUMzQyxJQUFJLFdBQVcsV0FBVztJQUUxQixNQUFNLFFBQVEsSUFBSTtJQUNsQixNQUFNLFVBQVUsSUFBSTtJQUVwQixLQUFLLE1BQU0sUUFBUSxFQUFFLGFBQWEsSUFBSSxFQUFFLENBQUU7UUFDeEMsTUFBTSxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLEVBQUU7UUFDbEMsTUFBTSxHQUFHLENBQUMsS0FBSyxFQUFFLEVBQUcsTUFBTSxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFO0lBQ3REO0lBRUEsS0FBSyxNQUFNLE1BQU0sRUFBRSxrQkFBa0IsSUFBSSxFQUFFLENBQUU7UUFDM0MsTUFBTSxTQUFTLE1BQU0sT0FBTyxPQUFPLENBQUMsR0FBRyxDQUFDO1FBQ3hDLFFBQVEsR0FBRyxDQUFDLElBQUk7SUFDbEI7SUFFQSxRQUFRLE1BQU0sQ0FBQyxJQUFJLENBQ2pCLHVCQUNBLE9BQ0EsT0FDQSxTQUNBLEVBQUUsWUFBWTtBQUVsQixFQUFDIn0=