export const guildMemberUpdate = async (gateway, d)=>{
    const guild = await gateway.client.guilds.get(d.guild_id);
    // Weird case, shouldn't happen
    if (guild === undefined) return;
    await gateway.client.users.set(d.user.id, d.user);
    const member = await guild.members.get(d.user.id);
    const newMemberPayload = {
        user: d.user,
        roles: d.roles,
        joined_at: d.joined_at,
        nick: d.nick,
        avatar: d.avatar,
        premium_since: d.premium_since,
        deaf: member?.deaf ?? false,
        mute: member?.mute ?? false
    };
    await guild.members.set(d.user.id, newMemberPayload);
    const newMember = await guild.members.get(d.user.id);
    if (member !== undefined) gateway.client.emit('guildMemberUpdate', member, newMember);
    else {
        gateway.client.emit('guildMemberUpdateUncached', newMember);
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvaGFybW9ueUB2Mi45LjAvc3JjL2dhdGV3YXkvaGFuZGxlcnMvZ3VpbGRNZW1iZXJVcGRhdGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBHYXRld2F5LCBHYXRld2F5RXZlbnRIYW5kbGVyIH0gZnJvbSAnLi4vbW9kLnRzJ1xuaW1wb3J0IHsgR3VpbGQgfSBmcm9tICcuLi8uLi9zdHJ1Y3R1cmVzL2d1aWxkLnRzJ1xuaW1wb3J0IHsgR3VpbGRNZW1iZXJVcGRhdGVQYXlsb2FkIH0gZnJvbSAnLi4vLi4vdHlwZXMvZ2F0ZXdheS50cydcbmltcG9ydCB7IE1lbWJlclBheWxvYWQgfSBmcm9tICcuLi8uLi90eXBlcy9ndWlsZC50cydcbmltcG9ydCB7IE1lbWJlciB9IGZyb20gJy4uLy4uL3N0cnVjdHVyZXMvbWVtYmVyLnRzJ1xuXG5leHBvcnQgY29uc3QgZ3VpbGRNZW1iZXJVcGRhdGU6IEdhdGV3YXlFdmVudEhhbmRsZXIgPSBhc3luYyAoXG4gIGdhdGV3YXk6IEdhdGV3YXksXG4gIGQ6IEd1aWxkTWVtYmVyVXBkYXRlUGF5bG9hZFxuKSA9PiB7XG4gIGNvbnN0IGd1aWxkOiBHdWlsZCB8IHVuZGVmaW5lZCA9IGF3YWl0IGdhdGV3YXkuY2xpZW50Lmd1aWxkcy5nZXQoZC5ndWlsZF9pZClcbiAgLy8gV2VpcmQgY2FzZSwgc2hvdWxkbid0IGhhcHBlblxuICBpZiAoZ3VpbGQgPT09IHVuZGVmaW5lZCkgcmV0dXJuXG5cbiAgYXdhaXQgZ2F0ZXdheS5jbGllbnQudXNlcnMuc2V0KGQudXNlci5pZCwgZC51c2VyKVxuICBjb25zdCBtZW1iZXIgPSBhd2FpdCBndWlsZC5tZW1iZXJzLmdldChkLnVzZXIuaWQpXG4gIGNvbnN0IG5ld01lbWJlclBheWxvYWQ6IE1lbWJlclBheWxvYWQgPSB7XG4gICAgdXNlcjogZC51c2VyLFxuICAgIHJvbGVzOiBkLnJvbGVzLFxuICAgIGpvaW5lZF9hdDogZC5qb2luZWRfYXQsXG4gICAgbmljazogZC5uaWNrLFxuICAgIGF2YXRhcjogZC5hdmF0YXIsXG4gICAgcHJlbWl1bV9zaW5jZTogZC5wcmVtaXVtX3NpbmNlLFxuICAgIGRlYWY6IG1lbWJlcj8uZGVhZiA/PyBmYWxzZSxcbiAgICBtdXRlOiBtZW1iZXI/Lm11dGUgPz8gZmFsc2VcbiAgfVxuICBhd2FpdCBndWlsZC5tZW1iZXJzLnNldChkLnVzZXIuaWQsIG5ld01lbWJlclBheWxvYWQpXG4gIGNvbnN0IG5ld01lbWJlciA9IGF3YWl0IGd1aWxkLm1lbWJlcnMuZ2V0KGQudXNlci5pZClcblxuICBpZiAobWVtYmVyICE9PSB1bmRlZmluZWQpXG4gICAgZ2F0ZXdheS5jbGllbnQuZW1pdCgnZ3VpbGRNZW1iZXJVcGRhdGUnLCBtZW1iZXIsIG5ld01lbWJlciBhcyBNZW1iZXIpXG4gIGVsc2Uge1xuICAgIGdhdGV3YXkuY2xpZW50LmVtaXQoJ2d1aWxkTWVtYmVyVXBkYXRlVW5jYWNoZWQnLCBuZXdNZW1iZXIpXG4gIH1cbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFNQSxPQUFPLE1BQU0sb0JBQXlDLE9BQ3BELFNBQ0EsSUFDRztJQUNILE1BQU0sUUFBMkIsTUFBTSxRQUFRLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsUUFBUTtJQUMzRSwrQkFBK0I7SUFDL0IsSUFBSSxVQUFVLFdBQVc7SUFFekIsTUFBTSxRQUFRLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUk7SUFDaEQsTUFBTSxTQUFTLE1BQU0sTUFBTSxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUU7SUFDaEQsTUFBTSxtQkFBa0M7UUFDdEMsTUFBTSxFQUFFLElBQUk7UUFDWixPQUFPLEVBQUUsS0FBSztRQUNkLFdBQVcsRUFBRSxTQUFTO1FBQ3RCLE1BQU0sRUFBRSxJQUFJO1FBQ1osUUFBUSxFQUFFLE1BQU07UUFDaEIsZUFBZSxFQUFFLGFBQWE7UUFDOUIsTUFBTSxRQUFRLFFBQVEsS0FBSztRQUMzQixNQUFNLFFBQVEsUUFBUSxLQUFLO0lBQzdCO0lBQ0EsTUFBTSxNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQ25DLE1BQU0sWUFBWSxNQUFNLE1BQU0sT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxFQUFFO0lBRW5ELElBQUksV0FBVyxXQUNiLFFBQVEsTUFBTSxDQUFDLElBQUksQ0FBQyxxQkFBcUIsUUFBUTtTQUM5QztRQUNILFFBQVEsTUFBTSxDQUFDLElBQUksQ0FBQyw2QkFBNkI7SUFDbkQsQ0FBQztBQUNILEVBQUMifQ==