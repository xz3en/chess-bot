function queryString(obj) {
    return Object.entries(obj).map(([k, v])=>`${encodeURIComponent(k)}=${encodeURIComponent(v)}`).join('&');
}
export class RESTEndpoints {
    rest;
    constructor(rest){
        Object.defineProperty(this, 'rest', {
            value: rest,
            enumerable: false
        });
    }
    /**
   * Gets entitlements for a given user. You can use this on your game backend to check entitlements of an arbitrary user, or perhaps in an administrative panel for your support team.
   */ async getEntitlements(applicationId) {
        return this.rest.get(`/applications/${applicationId}/entitlements`);
    }
    /**
   * Fetch an entitlement by its ID. This may be useful in confirming that a user has a given entitlement that another call or the SDK says they do.
   */ async getEntitlement(applicationId, entitlementId) {
        return this.rest.get(`/applications/${applicationId}/entitlements/${entitlementId}`);
    }
    /**
   * Get all SKUs for an application.
   */ async getSKUs(applicationId) {
        return this.rest.get(`/applications/${applicationId}/skus`);
    }
    /**
   * Marks a given entitlement for the user as consumed, meaning it will no longer be returned in an entitlements check. **Ensure the user was granted whatever items the entitlement was for before consuming it!**
   */ async consumeSKU(applicationId, entitlementId, payload) {
        return this.rest.post(`/applications/${applicationId}/entitlements/${entitlementId}/consume`, payload);
    }
    /**
   * Deletes a test entitlement for an application. You can only delete entitlements that were "purchased" in developer test mode; these are entitlements of `type == TestModePurchase`. You cannot use this route to delete arbitrary entitlements that users actually purchased.
   */ async deleteTestEntitlement(applicationId, entitlementId) {
        return this.rest.delete(`/applications/${applicationId}/entitlements/${entitlementId}`);
    }
    /**
   * Creates a discount for the given user on their next purchase of the given SKU. You should call this endpoint from your backend server just before calling [StartPurchase](#DOCS_GAME_SDK_STORE/start-purchase) for the SKU you wish to discount. The user will then see a discounted price for that SKU at time of payment. The discount is automatically consumed after successful purchase or if the TTL expires.
   */ async createPurchaseDiscount(skuId, userId, payload) {
        return this.rest.put(`/store/skus/${skuId}/discounts/${userId}`, payload);
    }
    /**
   * Deletes the currently active discount on the given SKU for the given user. You **do not need** to call this after a user has made a discounted purchase; successful discounted purchases will automatically remove the discount for that user for subsequent purchases.
   */ async deletePurchaseDiscount(skuId, userId) {
        return this.rest.delete(`/store/skus/${skuId}/discounts/${userId}`);
    }
    /**
   * Fetch all of the global commands for your application. Returns an array of [ApplicationCommand](#DOCS_INTERACTIONS_SLASH_COMMANDS/applicationcommand) objects.
   */ async getGlobalApplicationCommands(applicationId) {
        return this.rest.get(`/applications/${applicationId}/commands`);
    }
    async createGlobalApplicationCommand(applicationId, payload) {
        return this.rest.post(`/applications/${applicationId}/commands`, payload);
    }
    /**
   * Fetch a global command for your application. Returns an [ApplicationCommand](#DOCS_INTERACTIONS_SLASH_COMMANDS/applicationcommand) object.
   */ async getGlobalApplicationCommand(applicationId, commandId) {
        return this.rest.get(`/applications/${applicationId}/commands/${commandId}`);
    }
    async editGlobalApplicationCommand(applicationId, commandId, payload) {
        return this.rest.patch(`/applications/${applicationId}/commands/${commandId}`, payload);
    }
    /**
   * Deletes a global command. Returns `204`.
   */ async deleteGlobalApplicationCommand(applicationId, commandId) {
        return this.rest.delete(`/applications/${applicationId}/commands/${commandId}`);
    }
    /**
   * Fetch all of the guild commands for your application for a specific guild. Returns an array of [ApplicationCommand](#DOCS_INTERACTIONS_SLASH_COMMANDS/applicationcommand) objects.
   */ async getGuildApplicationCommands(applicationId, guildId) {
        return this.rest.get(`/applications/${applicationId}/guilds/${guildId}/commands`);
    }
    /**
   * Takes a list of application commands, overwriting existing commands that are registered globally for this application. Updates will be available in all guilds after 1 hour. Returns `200` and a list of [ApplicationCommand](#DOCS_INTERACTIONS_SLASH_COMMANDS/applicationcommand) objects. Commands that do not already exist will count toward daily application command create limits.
   */ async bulkOverwriteGlobalApplicationCommands(applicationId, payload) {
        return this.rest.put(`/applications/${applicationId}/commands`, payload);
    }
    async createGuildApplicationCommand(applicationId, guildId, payload) {
        return this.rest.post(`/applications/${applicationId}/guilds/${guildId}/commands`, payload);
    }
    /**
   * Fetch a guild command for your application. Returns an [ApplicationCommand](#DOCS_INTERACTIONS_SLASH_COMMANDS/applicationcommand) object.
   */ async getGuildApplicationCommand(applicationId, guildId, commandId) {
        return this.rest.get(`/applications/${applicationId}/guilds/${guildId}/commands/${commandId}`);
    }
    async editGuildApplicationCommand(applicationId, guildId, commandId, payload) {
        return this.rest.patch(`/applications/${applicationId}/guilds/${guildId}/commands/${commandId}`, payload);
    }
    /**
   * Delete a guild command. Returns `204` on success.
   */ async deleteGuildApplicationCommand(applicationId, guildId, commandId) {
        return this.rest.delete(`/applications/${applicationId}/guilds/${guildId}/commands/${commandId}`);
    }
    /**
   * Takes a list of application commands, overwriting existing commands for the guild. Returns `200` and a list of [ApplicationCommand](#DOCS_INTERACTIONS_SLASH_COMMANDS/applicationcommand) objects.
   */ async bulkOverwriteGuildApplicationCommands(applicationId, guildId, payload) {
        return this.rest.put(`/applications/${applicationId}/guilds/${guildId}/commands`, payload);
    }
    /**
   * Create a response to an Interaction from the gateway. Takes an [Interaction response](#DOCS_INTERACTIONS_SLASH_COMMANDS/interaction-response).
   */ async createInteractionResponse(interactionId, interactionToken, payload) {
        return this.rest.post(`/interactions/${interactionId}/${interactionToken}/callback`, payload);
    }
    /**
   * Edits the initial Interaction response. Functions the same as [Edit Webhook Message](#DOCS_RESOURCES_WEBHOOK/edit-webhook-message).
   */ async editOriginalInteractionResponse(applicationId, interactionToken, payload) {
        return this.rest.patch(`/webhooks/${applicationId}/${interactionToken}/messages/@original`, payload);
    }
    /**
   * Deletes the initial Interaction response. Returns `204` on success.
   */ async deleteOriginalInteractionResponse(applicationId, interactionToken) {
        return this.rest.delete(`/webhooks/${applicationId}/${interactionToken}/messages/@original`);
    }
    /**
   * Create a followup message for an Interaction. Functions the same as [Execute Webhook](#DOCS_RESOURCES_WEBHOOK/execute-webhook), but `wait` is always true, and `flags` can be set to `64` in the body to send an ephemeral message.
   */ async createFollowupMessage(applicationId, interactionToken, payload) {
        return this.rest.post(`/webhooks/${applicationId}/${interactionToken}`, payload);
    }
    /**
   * Edits a followup message for an Interaction. Functions the same as [Edit Webhook Message](#DOCS_RESOURCES_WEBHOOK/edit-webhook-message).
   */ async editFollowupMessage(applicationId, interactionToken, messageId, payload) {
        return this.rest.patch(`/webhooks/${applicationId}/${interactionToken}/messages/${messageId}`, payload);
    }
    /**
   * Deletes a followup message for an Interaction. Returns `204` on success.
   */ async deleteFollowupMessage(applicationId, interactionToken, messageId) {
        return this.rest.delete(`/webhooks/${applicationId}/${interactionToken}/messages/${messageId}`);
    }
    /**
   * Returns an [audit log](#DOCS_RESOURCES_AUDIT_LOG/audit-log-object) object for the guild. Requires the 'VIEW_AUDIT_LOG' permission.
   */ async getGuildAuditLog(guildId, params) {
        let q = '';
        const entries = Object.entries(params);
        if (entries.length > 0) {
            q = '?';
            for (const [k, v] of entries){
                if (v === undefined) continue;
                const kSnake = k === 'actionType' ? 'action_type' : k;
                if (q !== '?') q += '&';
                q += `${encodeURIComponent(kSnake)}=${encodeURIComponent(v?.toString() ?? '')}`;
            }
        }
        return this.rest.get(`/guilds/${guildId}/audit-logs${q}`);
    }
    /**
   * Get a channel by ID. Returns a [channel](#DOCS_RESOURCES_CHANNEL/channel-object) object.
   */ async getChannel(channelId) {
        return this.rest.get(`/channels/${channelId}`);
    }
    /**
   * Update a channel's settings. Requires the `MANAGE_CHANNELS` permission for the guild. Returns a [channel](#DOCS_RESOURCES_CHANNEL/channel-object) on success, and a 400 BAD REQUEST on invalid parameters. Fires a [Channel Update](#DOCS_TOPICS_GATEWAY/channel-update) Gateway event. If modifying a category, individual [Channel Update](#DOCS_TOPICS_GATEWAY/channel-update) events will fire for each child channel that also changes. If modifying permission overwrites, the `MANAGE_ROLES` permission is required. Only permissions your bot has in the guild or channel can be allowed/denied (unless your bot has a `MANAGE_ROLES` overwrite in the channel). All JSON parameters are optional.
   */ async modifyChannel(channelId, payload) {
        return this.rest.patch(`/channels/${channelId}`, payload);
    }
    /**
   * Delete a channel, or close a private message. Requires the `MANAGE_CHANNELS` permission for the guild. Deleting a category does not delete its child channels; they will have their `parent_id` removed and a [Channel Update](#DOCS_TOPICS_GATEWAY/channel-update) Gateway event will fire for each of them. Returns a [channel](#DOCS_RESOURCES_CHANNEL/channel-object) object on success. Fires a [Channel Delete](#DOCS_TOPICS_GATEWAY/channel-delete) Gateway event.
   */ async deleteChannel(channelId) {
        return this.rest.delete(`/channels/${channelId}`);
    }
    /**
   * Returns the messages for a channel. If operating on a guild channel, this endpoint requires the `VIEW_CHANNEL` permission to be present on the current user. If the current user is missing the 'READ_MESSAGE_HISTORY' permission in the channel then this will return no messages (since they cannot read the message history). Returns an array of [message](#DOCS_RESOURCES_CHANNEL/message-object) objects on success.
   */ async getChannelMessages(channelId) {
        return this.rest.get(`/channels/${channelId}/messages`);
    }
    /**
   * Returns a specific message in the channel. If operating on a guild channel, this endpoint requires the 'READ_MESSAGE_HISTORY' permission to be present on the current user. Returns a [message](#DOCS_RESOURCES_CHANNEL/message-object) object on success.
   */ async getChannelMessage(channelId, messageId) {
        return this.rest.get(`/channels/${channelId}/messages/${messageId}`);
    }
    async createMessage(channelId, payload) {
        return this.rest.post(`/channels/${channelId}/messages`, payload);
    }
    /**
   * Crosspost a message in a News Channel to following channels. This endpoint requires the 'SEND_MESSAGES' permission, if the current user sent the message, or additionally the 'MANAGE_MESSAGES' permission, for all other messages, to be present for the current user.
   * Returns a [message](#DOCS_RESOURCES_CHANNEL/message-object) object.
   */ async crosspostMessage(channelId, messageId) {
        return this.rest.post(`/channels/${channelId}/messages/${messageId}/crosspost`);
    }
    /**
   * Create a reaction for the message. This endpoint requires the 'READ_MESSAGE_HISTORY' permission to be present on the current user. Additionally, if nobody else has reacted to the message using this emoji, this endpoint requires the 'ADD_REACTIONS' permission to be present on the current user. Returns a 204 empty response on success.
   * The `emoji` must be [URL Encoded](https://en.wikipedia.org/wiki/Percent-encoding) or the request will fail with `10014: Unknown Emoji`.
   */ async createReaction(channelId, messageId, emoji) {
        return this.rest.put(`/channels/${channelId}/messages/${messageId}/reactions/${encodeURIComponent(emoji)}/@me`);
    }
    /**
   * Delete a reaction the current user has made for the message. Returns a 204 empty response on success.
   * The `emoji` must be [URL Encoded](https://en.wikipedia.org/wiki/Percent-encoding) or the request will fail with `10014: Unknown Emoji`.
   */ async deleteOwnReaction(channelId, messageId, emoji) {
        return this.rest.delete(`/channels/${channelId}/messages/${messageId}/reactions/${encodeURIComponent(emoji)}/@me`);
    }
    /**
   * Deletes another user's reaction. This endpoint requires the 'MANAGE_MESSAGES' permission to be present on the current user. Returns a 204 empty response on success.
   * The `emoji` must be [URL Encoded](https://en.wikipedia.org/wiki/Percent-encoding) or the request will fail with `10014: Unknown Emoji`.
   */ async deleteUserReaction(channelId, messageId, emoji, userId) {
        return this.rest.delete(`/channels/${channelId}/messages/${messageId}/reactions/${encodeURIComponent(emoji)}/${userId}`);
    }
    /**
   * Get a list of users that reacted with this emoji. Returns an array of [user](#DOCS_RESOURCES_USER/user-object) objects on success.
The `emoji` must be [URL Encoded](https://en.wikipedia.org/wiki/Percent-encoding) or the request will fail with `10014: Unknown Emoji`.
   */ async getReactions(channelId, messageId, emoji) {
        return this.rest.get(`/channels/${channelId}/messages/${messageId}/reactions/${encodeURIComponent(emoji)}`);
    }
    /**
   * Deletes all reactions on a message. This endpoint requires the 'MANAGE_MESSAGES' permission to be present on the current user. Fires a [Message Reaction Remove All](#DOCS_TOPICS_GATEWAY/message-reaction-remove-all) Gateway event.
   */ async deleteAllReactions(channelId, messageId) {
        return this.rest.delete(`/channels/${channelId}/messages/${messageId}/reactions`);
    }
    /**
   * Deletes all the reactions for a given emoji on a message. This endpoint requires the `MANAGE_MESSAGES` permission to be present on the current user. Fires a [Message Reaction Remove Emoji](#DOCS_TOPICS_GATEWAY/message-reaction-remove-emoji) Gateway event.
   * The `emoji` must be [URL Encoded](https://en.wikipedia.org/wiki/Percent-encoding) or the request will fail with `10014: Unknown Emoji`.
   */ async deleteAllReactionsForEmoji(channelId, messageId, emoji) {
        return this.rest.delete(`/channels/${channelId}/messages/${messageId}/reactions/${emoji}`);
    }
    /**
   * Edit a previously sent message. The fields `content`, `embed`, `allowed_mentions` and `flags` can be edited by the original message author. Other users can only edit `flags` and only if they have the `MANAGE_MESSAGES` permission in the corresponding channel. When specifying flags, ensure to include all previously set flags/bits in addition to ones that you are modifying. Only `flags` documented in the table below may be modified by users (unsupported flag changes are currently ignored without error).
   * Returns a [message](#DOCS_RESOURCES_CHANNEL/message-object) object. Fires a [Message Update](#DOCS_TOPICS_GATEWAY/message-update) Gateway event.
   */ async editMessage(channelId, messageId, payload) {
        return this.rest.patch(`/channels/${channelId}/messages/${messageId}`, payload);
    }
    /**
   * Delete a message. If operating on a guild channel and trying to delete a message that was not sent by the current user, this endpoint requires the `MANAGE_MESSAGES` permission. Returns a 204 empty response on success. Fires a [Message Delete](#DOCS_TOPICS_GATEWAY/message-delete) Gateway event.
   */ async deleteMessage(channelId, messageId) {
        return this.rest.delete(`/channels/${channelId}/messages/${messageId}`);
    }
    /**
   * Delete multiple messages in a single request. This endpoint can only be used on guild channels and requires the `MANAGE_MESSAGES` permission. Returns a 204 empty response on success. Fires a [Message Delete Bulk](#DOCS_TOPICS_GATEWAY/message-delete-bulk) Gateway event.
   * Any message IDs given that do not exist or are invalid will count towards the minimum and maximum message count (currently 2 and 100 respectively).
   */ async bulkDeleteMessages(channelId, payload) {
        return this.rest.post(`/channels/${channelId}/messages/bulk-delete`, payload);
    }
    /**
   * Edit the channel permission overwrites for a user or role in a channel. Only usable for guild channels. Requires the `MANAGE_ROLES` permission. Only permissions your bot has in the guild or channel can be allowed/denied (unless your bot has a `MANAGE_ROLES` overwrite in the channel). Returns a 204 empty response on success. For more information about permissions, see [permissions](#DOCS_TOPICS_PERMISSIONS/permissions).
   */ async editChannelPermissions(channelId, overwriteId, payload) {
        return this.rest.put(`/channels/${channelId}/permissions/${overwriteId}`, payload);
    }
    /**
   * Returns a list of [invite](#DOCS_RESOURCES_INVITE/invite-object) objects (with [invite metadata](#DOCS_RESOURCES_INVITE/invite-metadata-object)) for the channel. Only usable for guild channels. Requires the `MANAGE_CHANNELS` permission.
   */ async getChannelInvites(channelId) {
        return this.rest.get(`/channels/${channelId}/invites`);
    }
    /**
   * Create a new [invite](#DOCS_RESOURCES_INVITE/invite-object) object for the channel. Only usable for guild channels. Requires the `CREATE_INSTANT_INVITE` permission. All JSON parameters for this route are optional, however the request body is not. If you are not sending any fields, you still have to send an empty JSON object (`{}`). Returns an [invite](#DOCS_RESOURCES_INVITE/invite-object) object. Fires an [Invite Create](#DOCS_TOPICS_GATEWAY/invite-create) Gateway event.
   */ async createChannelInvite(channelId, payload = {}) {
        return this.rest.post(`/channels/${channelId}/invites`, payload);
    }
    /**
   * Delete a channel permission overwrite for a user or role in a channel. Only usable for guild channels. Requires the `MANAGE_ROLES` permission. Returns a 204 empty response on success. For more information about permissions, see [permissions](#DOCS_TOPICS_PERMISSIONS/permissions)
   */ async deleteChannelPermission(channelId, overwriteId) {
        return this.rest.delete(`/channels/${channelId}/permissions/${overwriteId}`);
    }
    /**
   * Follow a News Channel to send messages to a target channel. Requires the `MANAGE_WEBHOOKS` permission in the target channel. Returns a [followed channel](#DOCS_RESOURCES_CHANNEL/followed-channel-object) object.
   */ async followNewsChannel(channelId) {
        return this.rest.post(`/channels/${channelId}/followers`);
    }
    /**
   * Post a typing indicator for the specified channel. Generally bots should **not** implement this route. However, if a bot is responding to a command and expects the computation to take a few seconds, this endpoint may be called to let the user know that the bot is processing their message. Returns a 204 empty response on success. Fires a [Typing Start](#DOCS_TOPICS_GATEWAY/typing-start) Gateway event.
   */ async triggerTypingIndicator(channelId) {
        return this.rest.post(`/channels/${channelId}/typing`);
    }
    /**
   * Returns all pinned messages in the channel as an array of [message](#DOCS_RESOURCES_CHANNEL/message-object) objects.
   */ async getPinnedMessages(channelId) {
        return this.rest.get(`/channels/${channelId}/pins`);
    }
    /**
   * Pin a message in a channel. Requires the `MANAGE_MESSAGES` permission. Returns a 204 empty response on success.
   */ async addPinnedChannelMessage(channelId, messageId) {
        return this.rest.put(`/channels/${channelId}/pins/${messageId}`);
    }
    /**
   * Delete a pinned message in a channel. Requires the `MANAGE_MESSAGES` permission. Returns a 204 empty response on success.
   */ async deletePinnedChannelMessage(channelId, messageId) {
        return this.rest.delete(`/channels/${channelId}/pins/${messageId}`);
    }
    /**
   * Adds a recipient to a Group DM using their access token
   */ async groupDmAddRecipient(channelId, userId) {
        return this.rest.put(`/channels/${channelId}/recipients/${userId}`);
    }
    /**
   * Removes a recipient from a Group DM
   */ async groupDmRemoveRecipient(channelId, userId) {
        return this.rest.delete(`/channels/${channelId}/recipients/${userId}`);
    }
    /**
   * Returns a list of [emoji](#DOCS_RESOURCES_EMOJI/emoji-object) objects for the given guild.
   */ async listGuildEmojis(guildId) {
        return this.rest.get(`/guilds/${guildId}/emojis`);
    }
    /**
   * Returns an [emoji](#DOCS_RESOURCES_EMOJI/emoji-object) object for the given guild and emoji IDs.
   */ async getGuildEmoji(guildId, emojiId) {
        return this.rest.get(`/guilds/${guildId}/emojis/${emojiId}`);
    }
    /**
   * Create a new emoji for the guild. Requires the `MANAGE_EMOJIS` permission. Returns the new [emoji](#DOCS_RESOURCES_EMOJI/emoji-object) object on success. Fires a [Guild Emojis Update](#DOCS_TOPICS_GATEWAY/guild-emojis-update) Gateway event.
   */ async createGuildEmoji(guildId, payload) {
        return this.rest.post(`/guilds/${guildId}/emojis`, payload);
    }
    /**
   * Modify the given emoji. Requires the `MANAGE_EMOJIS` permission. Returns the updated [emoji](#DOCS_RESOURCES_EMOJI/emoji-object) object on success. Fires a [Guild Emojis Update](#DOCS_TOPICS_GATEWAY/guild-emojis-update) Gateway event.
   */ async modifyGuildEmoji(guildId, emojiId, payload) {
        return this.rest.patch(`/guilds/${guildId}/emojis/${emojiId}`, payload);
    }
    /**
   * Delete the given emoji. Requires the `MANAGE_EMOJIS` permission. Returns `204 No Content` on success. Fires a [Guild Emojis Update](#DOCS_TOPICS_GATEWAY/guild-emojis-update) Gateway event.
   */ async deleteGuildEmoji(guildId, emojiId) {
        return this.rest.delete(`/guilds/${guildId}/emojis/${emojiId}`);
    }
    /**
   * Create a new guild. Returns a [guild](#DOCS_RESOURCES_GUILD/guild-object) object on success. Fires a [Guild Create](#DOCS_TOPICS_GATEWAY/guild-create) Gateway event.
   */ async createGuild(payload) {
        return this.rest.post(`/guilds`, payload);
    }
    /**
   * Returns the [guild](#DOCS_RESOURCES_GUILD/guild-object) object for the given id. If `with_counts` is set to `true`, this endpoint will also return `approximate_member_count` and `approximate_presence_count` for the guild.
   */ async getGuild(guildId) {
        return this.rest.get(`/guilds/${guildId}`);
    }
    /**
   * Returns the [guild preview](#DOCS_RESOURCES_GUILD/guild-preview-object) object for the given id. If the user is not in the guild, then the guild must be Discoverable.
   */ async getGuildPreview(guildId) {
        return this.rest.get(`/guilds/${guildId}/preview`);
    }
    /**
   * Modify a guild's settings. Requires the `MANAGE_GUILD` permission. Returns the updated [guild](#DOCS_RESOURCES_GUILD/guild-object) object on success. Fires a [Guild Update](#DOCS_TOPICS_GATEWAY/guild-update) Gateway event.
   */ async modifyGuild(guildId, payload) {
        return this.rest.patch(`/guilds/${guildId}`, payload);
    }
    /**
   * Delete a guild permanently. User must be owner. Returns `204 No Content` on success. Fires a [Guild Delete](#DOCS_TOPICS_GATEWAY/guild-delete) Gateway event.
   */ async deleteGuild(guildId) {
        return this.rest.delete(`/guilds/${guildId}`);
    }
    /**
   * Returns a list of guild [channel](#DOCS_RESOURCES_CHANNEL/channel-object) objects.
   */ async getGuildChannels(guildId) {
        return this.rest.get(`/guilds/${guildId}/channels`);
    }
    /**
   * Create a new [channel](#DOCS_RESOURCES_CHANNEL/channel-object) object for the guild. Requires the `MANAGE_CHANNELS` permission. If setting permission overwrites, only permissions your bot has in the guild can be allowed/denied. Setting `MANAGE_ROLES` permission in channels is only possible for guild administrators. Returns the new [channel](#DOCS_RESOURCES_CHANNEL/channel-object) object on success. Fires a [Channel Create](#DOCS_TOPICS_GATEWAY/channel-create) Gateway event.
   */ async createGuildChannel(guildId, payload) {
        return this.rest.post(`/guilds/${guildId}/channels`, payload);
    }
    /**
   * Modify the positions of a set of [channel](#DOCS_RESOURCES_CHANNEL/channel-object) objects for the guild. Requires `MANAGE_CHANNELS` permission. Returns a 204 empty response on success. Fires multiple [Channel Update](#DOCS_TOPICS_GATEWAY/channel-update) Gateway events.
   */ async modifyGuildChannelPositions(guildId, payload) {
        return this.rest.patch(`/guilds/${guildId}/channels`, payload);
    }
    /**
   * Returns a [guild member](#DOCS_RESOURCES_GUILD/guild-member-object) object for the specified user.
   */ async getGuildMember(guildId, userId) {
        return this.rest.get(`/guilds/${guildId}/members/${userId}`);
    }
    /**
   * Returns a list of [guild member](#DOCS_RESOURCES_GUILD/guild-member-object) objects that are members of the guild.
   */ async listGuildMembers(guildId, params) {
        if (params?.limit !== undefined) {
            if (params.limit < 1 || params.limit > 1000) throw new Error('Limit should be a number between 1 and 1000');
        }
        return this.rest.get(`/guilds/${guildId}/members`, params);
    }
    /**
   * Returns a list of [guild member](#DOCS_RESOURCES_GUILD/guild-member-object) objects whose username or nickname starts with a provided string.
   */ async searchGuildMembers(guildId, params) {
        if (params?.query === undefined) {
            throw new Error('Query is a required parameter');
        }
        if (params.limit !== undefined) {
            if (params.limit < 1 || params.limit > 1000) throw new Error('Limit should be a number between 1 and 1000');
        }
        return this.rest.get(`/guilds/${guildId}/members/search`, params);
    }
    /**
   * Adds a user to the guild, provided you have a valid oauth2 access token for the user with the `guilds.join` scope. Returns a 201 Created with the [guild member](#DOCS_RESOURCES_GUILD/guild-member-object) as the body, or 204 No Content if the user is already a member of the guild. Fires a [Guild Member Add](#DOCS_TOPICS_GATEWAY/guild-member-add) Gateway event.
   * For guilds with [Membership Screening](#DOCS_RESOURCES_GUILD/membership-screening-object) enabled, this endpoint will default to adding new members as `pending` in the [guild member object](#DOCS_RESOURCES_GUILD/guild-member-object). Members that are `pending` will have to complete membership screening before they become full members that can talk.
   */ async addGuildMember(guildId, userId) {
        return this.rest.put(`/guilds/${guildId}/members/${userId}`);
    }
    /**
   * Modify attributes of a [guild member](#DOCS_RESOURCES_GUILD/guild-member-object). Returns a 200 OK with the [guild member](#DOCS_RESOURCES_GUILD/guild-member-object) as the body. Fires a [Guild Member Update](#DOCS_TOPICS_GATEWAY/guild-member-update) Gateway event. If the `channel_id` is set to null, this will force the target user to be disconnected from voice.
   */ async modifyGuildMember(guildId, userId, payload) {
        return this.rest.patch(`/guilds/${guildId}/members/${userId}`, payload);
    }
    /**
   * Modifies the nickname of the current user in a guild. Returns a 200 with the nickname on success. Fires a [Guild Member Update](#DOCS_TOPICS_GATEWAY/guild-member-update) Gateway event.
   */ async modifyCurrentUserNick(guildId, payload) {
        return this.rest.patch(`/guilds/${guildId}/members/@me/nick`, payload);
    }
    /**
   * Adds a role to a [guild member](#DOCS_RESOURCES_GUILD/guild-member-object). Requires the `MANAGE_ROLES` permission. Returns a 204 empty response on success. Fires a [Guild Member Update](#DOCS_TOPICS_GATEWAY/guild-member-update) Gateway event.
   */ async addGuildMemberRole(guildId, userId, roleId) {
        return this.rest.put(`/guilds/${guildId}/members/${userId}/roles/${roleId}`);
    }
    /**
   * Removes a role from a [guild member](#DOCS_RESOURCES_GUILD/guild-member-object). Requires the `MANAGE_ROLES` permission. Returns a 204 empty response on success. Fires a [Guild Member Update](#DOCS_TOPICS_GATEWAY/guild-member-update) Gateway event.
   */ async removeGuildMemberRole(guildId, userId, roleId) {
        return this.rest.delete(`/guilds/${guildId}/members/${userId}/roles/${roleId}`);
    }
    /**
   * Remove a member from a guild. Requires `KICK_MEMBERS` permission. Returns a 204 empty response on success. Fires a [Guild Member Remove](#DOCS_TOPICS_GATEWAY/guild-member-remove) Gateway event.
   */ async removeGuildMember(guildId, userId) {
        return this.rest.delete(`/guilds/${guildId}/members/${userId}`);
    }
    /**
   * Returns a list of [ban](#DOCS_RESOURCES_GUILD/ban-object) objects for the users banned from this guild. Requires the `BAN_MEMBERS` permission.
   */ async getGuildBans(guildId) {
        return this.rest.get(`/guilds/${guildId}/bans`);
    }
    /**
   * Returns a [ban](#DOCS_RESOURCES_GUILD/ban-object) object for the given user or a 404 not found if the ban cannot be found. Requires the `BAN_MEMBERS` permission.
   */ async getGuildBan(guildId, userId) {
        return this.rest.get(`/guilds/${guildId}/bans/${userId}`);
    }
    /**
   * Create a guild ban, and optionally delete previous messages sent by the banned user. Requires the `BAN_MEMBERS` permission. Returns a 204 empty response on success. Fires a [Guild Ban Add](#DOCS_TOPICS_GATEWAY/guild-ban-add) Gateway event.
   */ async createGuildBan(guildId, userId, payload) {
        return this.rest.put(`/guilds/${guildId}/bans/${userId}`, payload);
    }
    /**
   * Remove the ban for a user. Requires the `BAN_MEMBERS` permissions. Returns a 204 empty response on success. Fires a [Guild Ban Remove](#DOCS_TOPICS_GATEWAY/guild-ban-remove) Gateway event.
   */ async removeGuildBan(guildId, userId) {
        return this.rest.delete(`/guilds/${guildId}/bans/${userId}`);
    }
    /**
   * Returns a list of [role](#DOCS_TOPICS_PERMISSIONS/role-object) objects for the guild.
   */ async getGuildRoles(guildId) {
        return this.rest.get(`/guilds/${guildId}/roles`);
    }
    /**
   * Create a new [role](#DOCS_TOPICS_PERMISSIONS/role-object) for the guild. Requires the `MANAGE_ROLES` permission. Returns the new [role](#DOCS_TOPICS_PERMISSIONS/role-object) object on success. Fires a [Guild Role Create](#DOCS_TOPICS_GATEWAY/guild-role-create) Gateway event. All JSON params are optional.
   */ async createGuildRole(guildId, payload) {
        return this.rest.post(`/guilds/${guildId}/roles`, payload);
    }
    /**
   * Modify the positions of a set of [role](#DOCS_TOPICS_PERMISSIONS/role-object) objects for the guild. Requires the `MANAGE_ROLES` permission. Returns a list of all of the guild's [role](#DOCS_TOPICS_PERMISSIONS/role-object) objects on success. Fires multiple [Guild Role Update](#DOCS_TOPICS_GATEWAY/guild-role-update) Gateway events.
   * This endpoint takes a JSON array of parameters in the following format:
   */ async modifyGuildRolePositions(guildId, payload) {
        return this.rest.patch(`/guilds/${guildId}/roles`, payload);
    }
    /**
   * Modify a guild role. Requires the `MANAGE_ROLES` permission. Returns the updated [role](#DOCS_TOPICS_PERMISSIONS/role-object) on success. Fires a [Guild Role Update](#DOCS_TOPICS_GATEWAY/guild-role-update) Gateway event.
   */ async modifyGuildRole(guildId, roleId, payload) {
        return this.rest.patch(`/guilds/${guildId}/roles/${roleId}`, payload);
    }
    /**
   * Delete a guild role. Requires the `MANAGE_ROLES` permission. Returns a 204 empty response on success. Fires a [Guild Role Delete](#DOCS_TOPICS_GATEWAY/guild-role-delete) Gateway event.
   */ async deleteGuildRole(guildId, roleId) {
        return this.rest.delete(`/guilds/${guildId}/roles/${roleId}`);
    }
    /**
   * Returns an object with one 'pruned' key indicating the number of members that would be removed in a prune operation. Requires the `KICK_MEMBERS` permission.
   * By default, prune will not remove users with roles. You can optionally include specific roles in your prune by providing the `include_roles` parameter. Any inactive user that has a subset of the provided role(s) will be counted in the prune and users with additional roles will not.
   */ async getGuildPruneCount(guildId) {
        return this.rest.get(`/guilds/${guildId}/prune`);
    }
    /**
   * Begin a prune operation. Requires the `KICK_MEMBERS` permission. Returns an object with one 'pruned' key indicating the number of members that were removed in the prune operation. For large guilds it's recommended to set the `compute_prune_count` option to `false`, forcing 'pruned' to `null`. Fires multiple [Guild Member Remove](#DOCS_TOPICS_GATEWAY/guild-member-remove) Gateway events.
   * By default, prune will not remove users with roles. You can optionally include specific roles in your prune by providing the `include_roles` parameter. Any inactive user that has a subset of the provided role(s) will be included in the prune and users with additional roles will not.
   */ async beginGuildPrune(guildId, payload) {
        return this.rest.post(`/guilds/${guildId}/prune`, payload);
    }
    /**
   * Returns a list of [voice region](#DOCS_RESOURCES_VOICE/voice-region-object) objects for the guild. Unlike the similar `/voice` route, this returns VIP servers when the guild is VIP-enabled.
   */ async getGuildVoiceRegions(guildId) {
        return this.rest.get(`/guilds/${guildId}/regions`);
    }
    /**
   * Returns a list of [invite](#DOCS_RESOURCES_INVITE/invite-object) objects (with [invite metadata](#DOCS_RESOURCES_INVITE/invite-metadata-object)) for the guild. Requires the `MANAGE_GUILD` permission.
   */ async getGuildInvites(guildId) {
        return this.rest.get(`/guilds/${guildId}/invites`);
    }
    /**
   * Returns a list of [integration](#DOCS_RESOURCES_GUILD/integration-object) objects for the guild. Requires the `MANAGE_GUILD` permission.
   */ async getGuildIntegrations(guildId) {
        return this.rest.get(`/guilds/${guildId}/integrations`);
    }
    /**
   * Delete the attached [integration](#DOCS_RESOURCES_GUILD/integration-object) object for the guild. Deletes any associated webhooks and kicks the associated bot if there is one. Requires the `MANAGE_GUILD` permission. Returns a 204 empty response on success. Fires a [Guild Integrations Update](#DOCS_TOPICS_GATEWAY/guild-integrations-update) Gateway event.
   */ async deleteGuildIntegration(guildId, integrationId) {
        return this.rest.delete(`/guilds/${guildId}/integrations/${integrationId}`);
    }
    /**
   * Returns a [guild widget](#DOCS_RESOURCES_GUILD/guild-widget-object) object. Requires the `MANAGE_GUILD` permission.
   */ async getGuildWidgetSettings(guildId) {
        return this.rest.get(`/guilds/${guildId}/widget`);
    }
    /**
   * Modify a [guild widget](#DOCS_RESOURCES_GUILD/guild-widget-object) object for the guild. All attributes may be passed in with JSON and modified. Requires the `MANAGE_GUILD` permission. Returns the updated [guild widget](#DOCS_RESOURCES_GUILD/guild-widget-object) object.
   */ async modifyGuildWidget(guildId, payload) {
        return this.rest.patch(`/guilds/${guildId}/widget`, payload);
    }
    // It's type is not specified in docs, so I'll use any.
    /**
   * Returns the widget for the guild.
   */ async getGuildWidget(guildId) {
        return this.rest.get(`/guilds/${guildId}/widget.json`);
    }
    /**
   * Returns a partial [invite](#DOCS_RESOURCES_INVITE/invite-object) object for guilds with that feature enabled. Requires the `MANAGE_GUILD` permission. `code` will be null if a vanity url for the guild is not set.
   */ async getGuildVanityURL(guildId) {
        return this.rest.get(`/guilds/${guildId}/vanity-url`);
    }
    /**
   * Returns a PNG image widget for the guild. Requires no permissions or authentication.
   */ getGuildWidgetImage(guildId) {
        return `/guilds/${guildId}/widget.png`;
    }
    /**
   * Returns an [invite](#DOCS_RESOURCES_INVITE/invite-object) object for the given code.
   */ async getInvite(inviteCode) {
        return this.rest.get(`/invites/${inviteCode}`);
    }
    /**
   * Delete an invite. Requires the `MANAGE_CHANNELS` permission on the channel this invite belongs to, or `MANAGE_GUILD` to remove any invite across the guild. Returns an [invite](#DOCS_RESOURCES_INVITE/invite-object) object on success. Fires a [Invite Delete](#DOCS_TOPICS_GATEWAY/invite-delete) Gateway event.
   */ async deleteInvite(inviteCode) {
        return this.rest.delete(`/invites/${inviteCode}`);
    }
    /**
   * Returns a [template](#DOCS_RESOURCES_TEMPLATE/template-object) object for the given code.
   */ async getTemplate(templateCode) {
        return this.rest.get(`/guilds/templates/${templateCode}`);
    }
    /**
   * Create a new guild based on a template. Returns a [guild](#DOCS_RESOURCES_GUILD/guild-object) object on success. Fires a [Guild Create](#DOCS_TOPICS_GATEWAY/guild-create) Gateway event.
   */ async createGuildFromTemplate(templateCode, payload) {
        return this.rest.post(`/guilds/templates/${templateCode}`, payload);
    }
    /**
   * Returns an array of [template](#DOCS_RESOURCES_TEMPLATE/template-object) objects. Requires the `MANAGE_GUILD` permission.
   */ async getGuildTemplates(guildId) {
        return this.rest.get(`/guilds/${guildId}/templates`);
    }
    /**
   * Creates a template for the guild. Requires the `MANAGE_GUILD` permission. Returns the created [template](#DOCS_RESOURCES_TEMPLATE/template-object) object on success.
   */ async createGuildTemplate(guildId, payload) {
        return this.rest.post(`/guilds/${guildId}/templates`, payload);
    }
    /**
   * Syncs the template to the guild's current state. Requires the `MANAGE_GUILD` permission. Returns the [template](#DOCS_RESOURCES_TEMPLATE/template-object) object on success.
   */ async syncGuildTemplate(guildId, templateCode) {
        return this.rest.put(`/guilds/${guildId}/templates/${templateCode}`);
    }
    /**
   * Modifies the template's metadata. Requires the `MANAGE_GUILD` permission. Returns the [template](#DOCS_RESOURCES_TEMPLATE/template-object) object on success.
   */ async modifyGuildTemplate(guildId, templateCode, payload) {
        return this.rest.patch(`/guilds/${guildId}/templates/${templateCode}`, payload);
    }
    /**
   * Deletes the template. Requires the `MANAGE_GUILD` permission. Returns the deleted [template](#DOCS_RESOURCES_TEMPLATE/template-object) object on success.
   */ async deleteGuildTemplate(guildId, templateCode) {
        return this.rest.delete(`/guilds/${guildId}/templates/${templateCode}`);
    }
    /**
   * Returns the [user](#DOCS_RESOURCES_USER/user-object) object of the requester's account. For OAuth2, this requires the `identify` scope, which will return the object _without_ an email, and optionally the `email` scope, which returns the object _with_ an email.
   */ async getCurrentUser() {
        return this.rest.get(`/users/@me`);
    }
    /**
   * Returns a [user](#DOCS_RESOURCES_USER/user-object) object for a given user ID.
   */ async getUser(userId) {
        return this.rest.get(`/users/${userId}`);
    }
    /**
   * Modify the requester's user account settings. Returns a [user](#DOCS_RESOURCES_USER/user-object) object on success.
   */ async modifyCurrentUser(payload) {
        return this.rest.patch(`/users/@me`, payload);
    }
    /**
   * Returns a list of partial [guild](#DOCS_RESOURCES_GUILD/guild-object) objects the current user is a member of. Requires the `guilds` OAuth2 scope.
   */ async getCurrentUserGuilds() {
        return this.rest.get(`/users/@me/guilds`);
    }
    /**
   * Leave a guild. Returns a 204 empty response on success.
   */ async leaveGuild(guildId) {
        return this.rest.delete(`/users/@me/guilds/${guildId}`);
    }
    /**
   * Returns a list of [DM channel](#DOCS_RESOURCES_CHANNEL/channel-object) objects. For bots, this is no longer a supported method of getting recent DMs, and will return an empty array.
   */ async getUserDMs() {
        return this.rest.get(`/users/@me/channels`);
    }
    /**
   * Create a new DM channel with a user. Returns a [DM channel](#DOCS_RESOURCES_CHANNEL/channel-object) object.
   */ async createDM(payload) {
        return this.rest.post(`/users/@me/channels`, payload);
    }
    /**
   * Create a new group DM channel with multiple users. Returns a [DM channel](#DOCS_RESOURCES_CHANNEL/channel-object) object. This endpoint was intended to be used with the now-deprecated GameBridge SDK. DMs created with this endpoint will not be shown in the Discord client
   */ async createGroupDM(payload) {
        return this.rest.post(`/users/@me/channels`, payload);
    }
    /**
   * Returns a list of [connection](#DOCS_RESOURCES_USER/connection-object) objects. Requires the `connections` OAuth2 scope.
   */ async getUserConnections() {
        return this.rest.get(`/users/@me/connections`);
    }
    /**
   * Returns an array of [voice region](#DOCS_RESOURCES_VOICE/voice-region-object) objects that can be used when creating servers.
   */ async listVoiceRegions() {
        return this.rest.get(`/voice/regions`);
    }
    /**
   * Create a new webhook. Requires the `MANAGE_WEBHOOKS` permission. Returns a [webhook](#DOCS_RESOURCES_WEBHOOK/webhook-object) object on success. Webhook names follow our naming restrictions that can be found in our [Usernames and Nicknames](#DOCS_RESOURCES_USER/usernames-and-nicknames) documentation, with the following additional stipulations:
   * - Webhook names cannot be: 'clyde'
   */ async createWebhook(channelId, payload) {
        return this.rest.post(`/channels/${channelId}/webhooks`, payload);
    }
    /**
   * Returns a list of channel [webhook](#DOCS_RESOURCES_WEBHOOK/webhook-object) objects. Requires the `MANAGE_WEBHOOKS` permission.
   */ async getChannelWebhooks(channelId) {
        return this.rest.get(`/channels/${channelId}/webhooks`);
    }
    /**
   * Returns a list of guild [webhook](#DOCS_RESOURCES_WEBHOOK/webhook-object) objects. Requires the `MANAGE_WEBHOOKS` permission.
   */ async getGuildWebhooks(guildId) {
        return this.rest.get(`/guilds/${guildId}/webhooks`);
    }
    /**
   * Returns the new [webhook](#DOCS_RESOURCES_WEBHOOK/webhook-object) object for the given id.
   */ async getWebhook(webhookId) {
        return this.rest.get(`/webhooks/${webhookId}`);
    }
    /**
   * Same as above, except this call does not require authentication and returns no user in the webhook object.
   */ async getWebhookWithToken(webhookId, webhookToken) {
        return this.rest.get(`/webhooks/${webhookId}/${webhookToken}`);
    }
    /**
   * Modify a webhook. Requires the `MANAGE_WEBHOOKS` permission. Returns the updated [webhook](#DOCS_RESOURCES_WEBHOOK/webhook-object) object on success.
   */ async modifyWebhook(webhookId, payload) {
        return this.rest.patch(`/webhooks/${webhookId}`, payload);
    }
    /**
   * Same as above, except this call does not require authentication, does not accept a `channel_id` parameter in the body, and does not return a user in the webhook object.
   */ async modifyWebhookWithToken(webhookId, webhookToken, payload) {
        return this.rest.patch(`/webhooks/${webhookId}/${webhookToken}`, payload);
    }
    /**
   * Delete a webhook permanently. Requires the `MANAGE_WEBHOOKS` permission. Returns a 204 NO CONTENT response on success.
   */ async deleteWebhook(webhookId) {
        return this.rest.delete(`/webhooks/${webhookId}`);
    }
    /**
   * Same as above, except this call does not require authentication.
   */ async deleteWebhookWithToken(webhookId, webhookToken) {
        return this.rest.delete(`/webhooks/${webhookId}/${webhookToken}`);
    }
    async executeWebhook(webhookId, webhookToken, payload) {
        return this.rest.post(`/webhooks/${webhookId}/${webhookToken}`, payload);
    }
    async executeSlackCompatibleWebhook(webhookId, webhookToken, payload) {
        return this.rest.post(`/webhooks/${webhookId}/${webhookToken}/slack`, payload);
    }
    async executeGitHubCompatibleWebhook(webhookId, webhookToken, payload) {
        return this.rest.post(`/webhooks/${webhookId}/${webhookToken}/github`, payload);
    }
    /**
   * Edits a previously-sent webhook message from the same token. Returns a [message](#DOCS_RESOURCES_CHANNEL/message-object) object on success.
   */ async editWebhookMessage(webhookId, webhookToken, messageId, payload) {
        return this.rest.patch(`/webhooks/${webhookId}/${webhookToken}/messages/${messageId}`, payload);
    }
    async getGateway() {
        return this.rest.get(`/gateway`);
    }
    async getGatewayBot() {
        return this.rest.get(`/gateway/bot`);
    }
    /**
   * Returns the bot's OAuth2 [application object](#DOCS_TOPICS_OAUTH2/application-object) without `flags`.
   */ async getCurrentApplicationInformation() {
        return this.rest.get(`/oauth2/applications/@me`);
    }
    // We do not include types for this object.
    /**
   * Returns info about the current authorization. Requires authentication with a bearer token.
   */ async getCurrentAuthorizationInformation() {
        return this.rest.get(`/oauth2/@me`);
    }
    /**
   * Creates a new thread from an existing message. Returns a channel on success, and a 400 BAD REQUEST on invalid parameters. Fires a Thread Create Gateway event.
   */ async startPublicThreadFromMessage(channelId, messageId, payload) {
        return this.rest.post(`/channels/${channelId}/messages/${messageId}/threads`, payload);
    }
    // Exist for backwards compatibility
    /**
   * Creates a new public thread from an existing message. Returns a channel on success, and a 400 BAD REQUEST on invalid parameters. Fires a Thread Create Gateway event.
   */ async startPublicThread(channelId, messageId, payload) {
        return await this.startPublicThreadFromMessage(channelId, messageId, payload);
    }
    /**
   * Creates a new thread from an existing message. Returns a channel on success, and a 400 BAD REQUEST on invalid parameters. Fires a Thread Create Gateway event.
   */ async startThreadWithoutMessage(channelId, payload) {
        return this.rest.post(`/channels/${channelId}/threads`, payload);
    }
    // Exist for backwards compatibility
    /**
   * Creates a new private thread. Returns a channel on success, and a 400 BAD REQUEST on invalid parameters. Fires a Thread Create Gateway event.
   */ async startPrivateThread(channelId, payload) {
        return await this.startThreadWithoutMessage(channelId, payload);
    }
    /**
   * Adds the current user to a thread. Returns a 204 empty response on success. Also requires the thread is not archived. Fires a Thread Members Update Gateway event.
   */ async joinThread(channelId) {
        return this.rest.post(`/channels/${channelId}/thread-members/@me`, {});
    }
    /**
   * Adds another user to a thread. Requires the ability to send messages in the thread. Also requires the thread is not archived. Returns a 204 empty response on success. Fires a Thread Members Update Gateway event.
   */ async addUserToThread(channelId, userId) {
        return this.rest.post(`/channels/${channelId}/thread-members/${userId}`, {});
    }
    /**
   * Removes the current user from a thread. Returns a 204 empty response on success. Fires a Thread Members Update Gateway event.
   */ async leaveThread(channelId) {
        return this.rest.delete(`/channels/${channelId}/thread-members/@me`);
    }
    /**
   * Removes another user from a thread. Requires the MANAGE_THREADS permission or that you are the creator of the thread. Also requires the thread is not archived. Returns a 204 empty response on success. Fires a Thread Members Update Gateway event.
   */ async removeUserFromThread(channelId, userId) {
        return this.rest.delete(`/channels/${channelId}/thread-members/${userId}`);
    }
    /**
   * Returns archived threads in the channel that are public. When called on a GUILD_TEXT channel, returns threads of type PUBLIC_THREAD. When called on a GUILD_NEWS channel returns threads of type NEWS_THREAD. Threads are ordered by archive_timestamp, in descending order. Requires the READ_MESSAGE_HISTORY permission.
   */ async getPublicArchivedThreads(channelId, params = {}) {
        const qs = queryString(params);
        return this.rest.get(`/channels/${channelId}/threads/archived/public${qs.length !== 0 ? `?${qs}` : ''}`);
    }
    /**
   * Returns archived threads in the channel that are of type PRIVATE_THREAD. Threads are ordered by archive_timestamp, in descending order. Requires both the READ_MESSAGE_HISTORY and MANAGE_THREADS permissions.
   */ async getPrivateArchivedThreads(channelId, params = {}) {
        const qs = queryString(params);
        return this.rest.get(`/channels/${channelId}/threads/archived/private${qs.length !== 0 ? `?${qs}` : ''}`);
    }
    /**
   * Returns archived threads in the channel that are of type PRIVATE_THREAD, and the user has joined. Threads are ordered by their id, in descending order. Requires the READ_MESSAGE_HISTORY permission.
   */ async getJoinedPrivateArchivedThreads(channelId, params = {}) {
        const qs = queryString(params);
        return this.rest.get(`/channels/${channelId}/users/@me/threads/archived/private${qs.length !== 0 ? `?${qs}` : ''}`);
    }
    /** Returns all active threads in the channel, including public and private threads. Threads are ordered by their id, in descending order. Requires the READ_MESSAGE_HISTORY permission. */ async getActiveThreads(channelId, params = {}) {
        const qs = queryString(params);
        return this.rest.get(`/channels/${channelId}/threads/active${qs.length !== 0 ? `?${qs}` : ''}`);
    }
    /** Returns array of thread members objects that are members of the thread. */ async getThreadMembers(channelId) {
        return this.rest.get(`/channels/${channelId}/thread-members`);
    }
    /** Returns a sticker object for the given sticker ID. */ async getSticker(stickerID) {
        return this.rest.get(`/stickers/${stickerID}`);
    }
    /** Returns the list of sticker packs available to Nitro subscribers. */ async getStickerPacks() {
        return this.rest.get(`/sticker-packs`).then((e)=>e.sticker_packs);
    }
    /** Returns an array of sticker objects for the given guild. Includes user fields if the bot has the MANAGE_EMOJIS_AND_STICKERS permission. */ async getGuildStickers(guildID) {
        return this.rest.get(`/guilds/${guildID}/stickers`);
    }
    /** Returns a sticker object for the given guild and sticker IDs. Includes the user field if the bot has the MANAGE_EMOJIS_AND_STICKERS permission. */ async getGuildSticker(guildID, stickerID) {
        return this.rest.get(`/guilds/${guildID}/stickers/${stickerID}`);
    }
    /** Create a new sticker for the guild. Send a multipart/form-data body. Requires the MANAGE_EMOJIS_AND_STICKERS permission. Returns the new sticker object on success. */ async createGuildSticker(guildID, options) {
        const data = new FormData();
        data.append('name', options.name);
        data.append('description', options.description);
        data.append('tags', options.tags);
        data.append('file', options.file instanceof Uint8Array ? new Blob([
            options.file
        ]) : options.file);
        return this.rest.request('post', `/guilds/${guildID}/stickers`, {
            data,
            reason: options.reason
        });
    }
    /** Modify the given sticker. Requires the MANAGE_EMOJIS_AND_STICKERS permission. Returns the updated sticker object on success. */ async modifyGuildSticker(guildID, stickerID, options) {
        return this.rest.request('post', `/guilds/${guildID}/stickers/${stickerID}`, {
            data: {
                name: options.name,
                description: options.description,
                tags: options.tags
            },
            reason: options.reason
        });
    }
    /** Delete the given sticker. Requires the MANAGE_EMOJIS_AND_STICKERS permission. Returns 204 No Content on success. */ async deleteGuildSticker(guildID, stickerID, reason) {
        return this.rest.request('delete', `/guilds/${guildID}/stickers/${stickerID}`, {
            reason
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvaGFybW9ueUB2Mi45LjAvc3JjL3Jlc3QvZW5kcG9pbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQXBwbGljYXRpb25QYXlsb2FkIH0gZnJvbSAnLi4vdHlwZXMvYXBwbGljYXRpb24udHMnXG5pbXBvcnQgdHlwZSB7XG4gIENoYW5uZWxQYXlsb2FkLFxuICBDcmVhdGVHdWlsZFN0aWNrZXJPcHRpb25zLFxuICBDcmVhdGVNZXNzYWdlUGF5bG9hZCxcbiAgQ3JlYXRlVGhyZWFkUGF5bG9hZCxcbiAgQ3JlYXRlV2ViaG9va01lc3NhZ2VCYXNlUGF5bG9hZCxcbiAgQ3JlYXRlV2ViaG9va01lc3NhZ2VQYXlsb2FkLFxuICBFZGl0TWVzc2FnZVBheWxvYWQsXG4gIEZvbGxvd2VkQ2hhbm5lbCxcbiAgTWVzc2FnZVBheWxvYWQsXG4gIE1lc3NhZ2VTdGlja2VyUGFja1BheWxvYWQsXG4gIE1lc3NhZ2VTdGlja2VyUGF5bG9hZCxcbiAgTW9kaWZ5R3VpbGRTdGlja2VyT3B0aW9ucyxcbiAgT3ZlcndyaXRlUGF5bG9hZCxcbiAgVGhyZWFkQ2hhbm5lbFBheWxvYWQsXG4gIFRocmVhZE1lbWJlclBheWxvYWRcbn0gZnJvbSAnLi4vdHlwZXMvY2hhbm5lbC50cydcbmltcG9ydCB0eXBlIHsgQ3JlYXRlRW1vamlQYXlsb2FkLCBFbW9qaVBheWxvYWQgfSBmcm9tICcuLi90eXBlcy9lbW9qaS50cydcbmltcG9ydCB0eXBlIHsgR3VpbGRCYW5BZGRQYXlsb2FkIH0gZnJvbSAnLi4vdHlwZXMvZ2F0ZXdheS50cydcbmltcG9ydCB0eXBlIHsgR2F0ZXdheUJvdFBheWxvYWQgfSBmcm9tICcuLi90eXBlcy9nYXRld2F5Qm90LnRzJ1xuaW1wb3J0IHR5cGUge1xuICBBdWRpdExvZ0V2ZW50cyxcbiAgQXVkaXRMb2dQYXlsb2FkLFxuICBHdWlsZEJhblBheWxvYWQsXG4gIEd1aWxkQmVnaW5QcnVuZVBheWxvYWQsXG4gIEd1aWxkQ3JlYXRlQ2hhbm5lbFBheWxvYWQsXG4gIEd1aWxkQ3JlYXRlUm9sZVBheWxvYWQsXG4gIEd1aWxkSW50ZWdyYXRpb25QYXlsb2FkLFxuICBHdWlsZFBheWxvYWQsXG4gIEd1aWxkUHJldmlld1BheWxvYWQsXG4gIEd1aWxkUHJ1bmVDb3VudFBheWxvYWQsXG4gIEd1aWxkV2lkZ2V0UGF5bG9hZCxcbiAgTWVtYmVyUGF5bG9hZFxufSBmcm9tICcuLi90eXBlcy9ndWlsZC50cydcbmltcG9ydCB0eXBlIHtcbiAgSW52aXRlUGF5bG9hZCxcbiAgSW52aXRlV2l0aE1ldGFkYXRhUGF5bG9hZFxufSBmcm9tICcuLi90eXBlcy9pbnZpdGUudHMnXG5pbXBvcnQgdHlwZSB7IFJvbGVNb2RpZnlQYXlsb2FkLCBSb2xlUGF5bG9hZCB9IGZyb20gJy4uL3R5cGVzL3JvbGUudHMnXG5pbXBvcnQgdHlwZSB7IEludGVyYWN0aW9uUmVzcG9uc2VQYXlsb2FkIH0gZnJvbSAnLi4vdHlwZXMvaW50ZXJhY3Rpb25zLnRzJ1xuaW1wb3J0IHR5cGUge1xuICBBcHBsaWNhdGlvbkNvbW1hbmRQYXJ0aWFsLFxuICBBcHBsaWNhdGlvbkNvbW1hbmRQYXlsb2FkXG59IGZyb20gJy4uL3R5cGVzL2FwcGxpY2F0aW9uQ29tbWFuZC50cydcbmltcG9ydCB0eXBlIHsgVGVtcGxhdGVQYXlsb2FkIH0gZnJvbSAnLi4vdHlwZXMvdGVtcGxhdGUudHMnXG5pbXBvcnQgdHlwZSB7IFVzZXJQYXlsb2FkIH0gZnJvbSAnLi4vdHlwZXMvdXNlci50cydcbmltcG9ydCB0eXBlIHsgVm9pY2VSZWdpb24gfSBmcm9tICcuLi90eXBlcy92b2ljZS50cydcbmltcG9ydCB0eXBlIHsgV2ViaG9va1BheWxvYWQgfSBmcm9tICcuLi90eXBlcy93ZWJob29rLnRzJ1xuaW1wb3J0IHR5cGUgeyBEaWN0IH0gZnJvbSAnLi4vdXRpbHMvZGljdC50cydcbmltcG9ydCB0eXBlIHsgUkVTVE1hbmFnZXIgfSBmcm9tICcuL21hbmFnZXIudHMnXG5cbmZ1bmN0aW9uIHF1ZXJ5U3RyaW5nPFQgZXh0ZW5kcyB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gfT4oXG4gIG9iajogVFxuKTogc3RyaW5nIHtcbiAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKG9iailcbiAgICAubWFwKChbaywgdl0pID0+IGAke2VuY29kZVVSSUNvbXBvbmVudChrKX09JHtlbmNvZGVVUklDb21wb25lbnQodil9YClcbiAgICAuam9pbignJicpXG59XG5cbmV4cG9ydCBjbGFzcyBSRVNURW5kcG9pbnRzIHtcbiAgcmVzdCE6IFJFU1RNYW5hZ2VyXG4gIGNvbnN0cnVjdG9yKHJlc3Q6IFJFU1RNYW5hZ2VyKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdyZXN0Jywge1xuICAgICAgdmFsdWU6IHJlc3QsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBlbnRpdGxlbWVudHMgZm9yIGEgZ2l2ZW4gdXNlci4gWW91IGNhbiB1c2UgdGhpcyBvbiB5b3VyIGdhbWUgYmFja2VuZCB0byBjaGVjayBlbnRpdGxlbWVudHMgb2YgYW4gYXJiaXRyYXJ5IHVzZXIsIG9yIHBlcmhhcHMgaW4gYW4gYWRtaW5pc3RyYXRpdmUgcGFuZWwgZm9yIHlvdXIgc3VwcG9ydCB0ZWFtLlxuICAgKi9cbiAgYXN5bmMgZ2V0RW50aXRsZW1lbnRzKGFwcGxpY2F0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dW5rbm93bj4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvYXBwbGljYXRpb25zLyR7YXBwbGljYXRpb25JZH0vZW50aXRsZW1lbnRzYClcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhbiBlbnRpdGxlbWVudCBieSBpdHMgSUQuIFRoaXMgbWF5IGJlIHVzZWZ1bCBpbiBjb25maXJtaW5nIHRoYXQgYSB1c2VyIGhhcyBhIGdpdmVuIGVudGl0bGVtZW50IHRoYXQgYW5vdGhlciBjYWxsIG9yIHRoZSBTREsgc2F5cyB0aGV5IGRvLlxuICAgKi9cbiAgYXN5bmMgZ2V0RW50aXRsZW1lbnQoXG4gICAgYXBwbGljYXRpb25JZDogc3RyaW5nLFxuICAgIGVudGl0bGVtZW50SWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHVua25vd24+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChcbiAgICAgIGAvYXBwbGljYXRpb25zLyR7YXBwbGljYXRpb25JZH0vZW50aXRsZW1lbnRzLyR7ZW50aXRsZW1lbnRJZH1gXG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhbGwgU0tVcyBmb3IgYW4gYXBwbGljYXRpb24uXG4gICAqL1xuICBhc3luYyBnZXRTS1VzKGFwcGxpY2F0aW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dW5rbm93bj4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvYXBwbGljYXRpb25zLyR7YXBwbGljYXRpb25JZH0vc2t1c2ApXG4gIH1cblxuICAvKipcbiAgICogTWFya3MgYSBnaXZlbiBlbnRpdGxlbWVudCBmb3IgdGhlIHVzZXIgYXMgY29uc3VtZWQsIG1lYW5pbmcgaXQgd2lsbCBubyBsb25nZXIgYmUgcmV0dXJuZWQgaW4gYW4gZW50aXRsZW1lbnRzIGNoZWNrLiAqKkVuc3VyZSB0aGUgdXNlciB3YXMgZ3JhbnRlZCB3aGF0ZXZlciBpdGVtcyB0aGUgZW50aXRsZW1lbnQgd2FzIGZvciBiZWZvcmUgY29uc3VtaW5nIGl0ISoqXG4gICAqL1xuICBhc3luYyBjb25zdW1lU0tVKFxuICAgIGFwcGxpY2F0aW9uSWQ6IHN0cmluZyxcbiAgICBlbnRpdGxlbWVudElkOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogdW5rbm93blxuICApOiBQcm9taXNlPHVua25vd24+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LnBvc3QoXG4gICAgICBgL2FwcGxpY2F0aW9ucy8ke2FwcGxpY2F0aW9uSWR9L2VudGl0bGVtZW50cy8ke2VudGl0bGVtZW50SWR9L2NvbnN1bWVgLFxuICAgICAgcGF5bG9hZFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGEgdGVzdCBlbnRpdGxlbWVudCBmb3IgYW4gYXBwbGljYXRpb24uIFlvdSBjYW4gb25seSBkZWxldGUgZW50aXRsZW1lbnRzIHRoYXQgd2VyZSBcInB1cmNoYXNlZFwiIGluIGRldmVsb3BlciB0ZXN0IG1vZGU7IHRoZXNlIGFyZSBlbnRpdGxlbWVudHMgb2YgYHR5cGUgPT0gVGVzdE1vZGVQdXJjaGFzZWAuIFlvdSBjYW5ub3QgdXNlIHRoaXMgcm91dGUgdG8gZGVsZXRlIGFyYml0cmFyeSBlbnRpdGxlbWVudHMgdGhhdCB1c2VycyBhY3R1YWxseSBwdXJjaGFzZWQuXG4gICAqL1xuICBhc3luYyBkZWxldGVUZXN0RW50aXRsZW1lbnQoXG4gICAgYXBwbGljYXRpb25JZDogc3RyaW5nLFxuICAgIGVudGl0bGVtZW50SWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHVua25vd24+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShcbiAgICAgIGAvYXBwbGljYXRpb25zLyR7YXBwbGljYXRpb25JZH0vZW50aXRsZW1lbnRzLyR7ZW50aXRsZW1lbnRJZH1gXG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBkaXNjb3VudCBmb3IgdGhlIGdpdmVuIHVzZXIgb24gdGhlaXIgbmV4dCBwdXJjaGFzZSBvZiB0aGUgZ2l2ZW4gU0tVLiBZb3Ugc2hvdWxkIGNhbGwgdGhpcyBlbmRwb2ludCBmcm9tIHlvdXIgYmFja2VuZCBzZXJ2ZXIganVzdCBiZWZvcmUgY2FsbGluZyBbU3RhcnRQdXJjaGFzZV0oI0RPQ1NfR0FNRV9TREtfU1RPUkUvc3RhcnQtcHVyY2hhc2UpIGZvciB0aGUgU0tVIHlvdSB3aXNoIHRvIGRpc2NvdW50LiBUaGUgdXNlciB3aWxsIHRoZW4gc2VlIGEgZGlzY291bnRlZCBwcmljZSBmb3IgdGhhdCBTS1UgYXQgdGltZSBvZiBwYXltZW50LiBUaGUgZGlzY291bnQgaXMgYXV0b21hdGljYWxseSBjb25zdW1lZCBhZnRlciBzdWNjZXNzZnVsIHB1cmNoYXNlIG9yIGlmIHRoZSBUVEwgZXhwaXJlcy5cbiAgICovXG4gIGFzeW5jIGNyZWF0ZVB1cmNoYXNlRGlzY291bnQoXG4gICAgc2t1SWQ6IHN0cmluZyxcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBwYXlsb2FkOiB1bmtub3duXG4gICk6IFByb21pc2U8dW5rbm93bj4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucHV0KGAvc3RvcmUvc2t1cy8ke3NrdUlkfS9kaXNjb3VudHMvJHt1c2VySWR9YCwgcGF5bG9hZClcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIHRoZSBjdXJyZW50bHkgYWN0aXZlIGRpc2NvdW50IG9uIHRoZSBnaXZlbiBTS1UgZm9yIHRoZSBnaXZlbiB1c2VyLiBZb3UgKipkbyBub3QgbmVlZCoqIHRvIGNhbGwgdGhpcyBhZnRlciBhIHVzZXIgaGFzIG1hZGUgYSBkaXNjb3VudGVkIHB1cmNoYXNlOyBzdWNjZXNzZnVsIGRpc2NvdW50ZWQgcHVyY2hhc2VzIHdpbGwgYXV0b21hdGljYWxseSByZW1vdmUgdGhlIGRpc2NvdW50IGZvciB0aGF0IHVzZXIgZm9yIHN1YnNlcXVlbnQgcHVyY2hhc2VzLlxuICAgKi9cbiAgYXN5bmMgZGVsZXRlUHVyY2hhc2VEaXNjb3VudChcbiAgICBza3VJZDogc3RyaW5nLFxuICAgIHVzZXJJZDogc3RyaW5nXG4gICk6IFByb21pc2U8dW5rbm93bj4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZGVsZXRlKGAvc3RvcmUvc2t1cy8ke3NrdUlkfS9kaXNjb3VudHMvJHt1c2VySWR9YClcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhbGwgb2YgdGhlIGdsb2JhbCBjb21tYW5kcyBmb3IgeW91ciBhcHBsaWNhdGlvbi4gUmV0dXJucyBhbiBhcnJheSBvZiBbQXBwbGljYXRpb25Db21tYW5kXSgjRE9DU19JTlRFUkFDVElPTlNfU0xBU0hfQ09NTUFORFMvYXBwbGljYXRpb25jb21tYW5kKSBvYmplY3RzLlxuICAgKi9cbiAgYXN5bmMgZ2V0R2xvYmFsQXBwbGljYXRpb25Db21tYW5kcyhcbiAgICBhcHBsaWNhdGlvbklkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxBcHBsaWNhdGlvbkNvbW1hbmRQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC9hcHBsaWNhdGlvbnMvJHthcHBsaWNhdGlvbklkfS9jb21tYW5kc2ApXG4gIH1cblxuICBhc3luYyBjcmVhdGVHbG9iYWxBcHBsaWNhdGlvbkNvbW1hbmQoXG4gICAgYXBwbGljYXRpb25JZDogc3RyaW5nLFxuICAgIHBheWxvYWQ6IHVua25vd25cbiAgKTogUHJvbWlzZTxBcHBsaWNhdGlvbkNvbW1hbmRQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wb3N0KGAvYXBwbGljYXRpb25zLyR7YXBwbGljYXRpb25JZH0vY29tbWFuZHNgLCBwYXlsb2FkKVxuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGEgZ2xvYmFsIGNvbW1hbmQgZm9yIHlvdXIgYXBwbGljYXRpb24uIFJldHVybnMgYW4gW0FwcGxpY2F0aW9uQ29tbWFuZF0oI0RPQ1NfSU5URVJBQ1RJT05TX1NMQVNIX0NPTU1BTkRTL2FwcGxpY2F0aW9uY29tbWFuZCkgb2JqZWN0LlxuICAgKi9cbiAgYXN5bmMgZ2V0R2xvYmFsQXBwbGljYXRpb25Db21tYW5kKFxuICAgIGFwcGxpY2F0aW9uSWQ6IHN0cmluZyxcbiAgICBjb21tYW5kSWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPEFwcGxpY2F0aW9uQ29tbWFuZFBheWxvYWRbXT4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvYXBwbGljYXRpb25zLyR7YXBwbGljYXRpb25JZH0vY29tbWFuZHMvJHtjb21tYW5kSWR9YClcbiAgfVxuXG4gIGFzeW5jIGVkaXRHbG9iYWxBcHBsaWNhdGlvbkNvbW1hbmQoXG4gICAgYXBwbGljYXRpb25JZDogc3RyaW5nLFxuICAgIGNvbW1hbmRJZDogc3RyaW5nLFxuICAgIHBheWxvYWQ6IEFwcGxpY2F0aW9uQ29tbWFuZFBhcnRpYWxcbiAgKTogUHJvbWlzZTxBcHBsaWNhdGlvbkNvbW1hbmRQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wYXRjaChcbiAgICAgIGAvYXBwbGljYXRpb25zLyR7YXBwbGljYXRpb25JZH0vY29tbWFuZHMvJHtjb21tYW5kSWR9YCxcbiAgICAgIHBheWxvYWRcbiAgICApXG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyBhIGdsb2JhbCBjb21tYW5kLiBSZXR1cm5zIGAyMDRgLlxuICAgKi9cbiAgYXN5bmMgZGVsZXRlR2xvYmFsQXBwbGljYXRpb25Db21tYW5kKFxuICAgIGFwcGxpY2F0aW9uSWQ6IHN0cmluZyxcbiAgICBjb21tYW5kSWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShcbiAgICAgIGAvYXBwbGljYXRpb25zLyR7YXBwbGljYXRpb25JZH0vY29tbWFuZHMvJHtjb21tYW5kSWR9YFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhbGwgb2YgdGhlIGd1aWxkIGNvbW1hbmRzIGZvciB5b3VyIGFwcGxpY2F0aW9uIGZvciBhIHNwZWNpZmljIGd1aWxkLiBSZXR1cm5zIGFuIGFycmF5IG9mIFtBcHBsaWNhdGlvbkNvbW1hbmRdKCNET0NTX0lOVEVSQUNUSU9OU19TTEFTSF9DT01NQU5EUy9hcHBsaWNhdGlvbmNvbW1hbmQpIG9iamVjdHMuXG4gICAqL1xuICBhc3luYyBnZXRHdWlsZEFwcGxpY2F0aW9uQ29tbWFuZHMoXG4gICAgYXBwbGljYXRpb25JZDogc3RyaW5nLFxuICAgIGd1aWxkSWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPEFwcGxpY2F0aW9uQ29tbWFuZFBheWxvYWRbXT4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KFxuICAgICAgYC9hcHBsaWNhdGlvbnMvJHthcHBsaWNhdGlvbklkfS9ndWlsZHMvJHtndWlsZElkfS9jb21tYW5kc2BcbiAgICApXG4gIH1cblxuICAvKipcbiAgICogVGFrZXMgYSBsaXN0IG9mIGFwcGxpY2F0aW9uIGNvbW1hbmRzLCBvdmVyd3JpdGluZyBleGlzdGluZyBjb21tYW5kcyB0aGF0IGFyZSByZWdpc3RlcmVkIGdsb2JhbGx5IGZvciB0aGlzIGFwcGxpY2F0aW9uLiBVcGRhdGVzIHdpbGwgYmUgYXZhaWxhYmxlIGluIGFsbCBndWlsZHMgYWZ0ZXIgMSBob3VyLiBSZXR1cm5zIGAyMDBgIGFuZCBhIGxpc3Qgb2YgW0FwcGxpY2F0aW9uQ29tbWFuZF0oI0RPQ1NfSU5URVJBQ1RJT05TX1NMQVNIX0NPTU1BTkRTL2FwcGxpY2F0aW9uY29tbWFuZCkgb2JqZWN0cy4gQ29tbWFuZHMgdGhhdCBkbyBub3QgYWxyZWFkeSBleGlzdCB3aWxsIGNvdW50IHRvd2FyZCBkYWlseSBhcHBsaWNhdGlvbiBjb21tYW5kIGNyZWF0ZSBsaW1pdHMuXG4gICAqL1xuICBhc3luYyBidWxrT3ZlcndyaXRlR2xvYmFsQXBwbGljYXRpb25Db21tYW5kcyhcbiAgICBhcHBsaWNhdGlvbklkOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogQXBwbGljYXRpb25Db21tYW5kUGFydGlhbFtdXG4gICk6IFByb21pc2U8QXBwbGljYXRpb25Db21tYW5kUGF5bG9hZFtdPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wdXQoYC9hcHBsaWNhdGlvbnMvJHthcHBsaWNhdGlvbklkfS9jb21tYW5kc2AsIHBheWxvYWQpXG4gIH1cblxuICBhc3luYyBjcmVhdGVHdWlsZEFwcGxpY2F0aW9uQ29tbWFuZChcbiAgICBhcHBsaWNhdGlvbklkOiBzdHJpbmcsXG4gICAgZ3VpbGRJZDogc3RyaW5nLFxuICAgIHBheWxvYWQ6IEFwcGxpY2F0aW9uQ29tbWFuZFBhcnRpYWxcbiAgKTogUHJvbWlzZTxBcHBsaWNhdGlvbkNvbW1hbmRQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wb3N0KFxuICAgICAgYC9hcHBsaWNhdGlvbnMvJHthcHBsaWNhdGlvbklkfS9ndWlsZHMvJHtndWlsZElkfS9jb21tYW5kc2AsXG4gICAgICBwYXlsb2FkXG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGEgZ3VpbGQgY29tbWFuZCBmb3IgeW91ciBhcHBsaWNhdGlvbi4gUmV0dXJucyBhbiBbQXBwbGljYXRpb25Db21tYW5kXSgjRE9DU19JTlRFUkFDVElPTlNfU0xBU0hfQ09NTUFORFMvYXBwbGljYXRpb25jb21tYW5kKSBvYmplY3QuXG4gICAqL1xuICBhc3luYyBnZXRHdWlsZEFwcGxpY2F0aW9uQ29tbWFuZChcbiAgICBhcHBsaWNhdGlvbklkOiBzdHJpbmcsXG4gICAgZ3VpbGRJZDogc3RyaW5nLFxuICAgIGNvbW1hbmRJZDogc3RyaW5nXG4gICk6IFByb21pc2U8QXBwbGljYXRpb25Db21tYW5kUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KFxuICAgICAgYC9hcHBsaWNhdGlvbnMvJHthcHBsaWNhdGlvbklkfS9ndWlsZHMvJHtndWlsZElkfS9jb21tYW5kcy8ke2NvbW1hbmRJZH1gXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgZWRpdEd1aWxkQXBwbGljYXRpb25Db21tYW5kKFxuICAgIGFwcGxpY2F0aW9uSWQ6IHN0cmluZyxcbiAgICBndWlsZElkOiBzdHJpbmcsXG4gICAgY29tbWFuZElkOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogQXBwbGljYXRpb25Db21tYW5kUGFydGlhbFxuICApOiBQcm9taXNlPEFwcGxpY2F0aW9uQ29tbWFuZFBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LnBhdGNoKFxuICAgICAgYC9hcHBsaWNhdGlvbnMvJHthcHBsaWNhdGlvbklkfS9ndWlsZHMvJHtndWlsZElkfS9jb21tYW5kcy8ke2NvbW1hbmRJZH1gLFxuICAgICAgcGF5bG9hZFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBndWlsZCBjb21tYW5kLiBSZXR1cm5zIGAyMDRgIG9uIHN1Y2Nlc3MuXG4gICAqL1xuICBhc3luYyBkZWxldGVHdWlsZEFwcGxpY2F0aW9uQ29tbWFuZChcbiAgICBhcHBsaWNhdGlvbklkOiBzdHJpbmcsXG4gICAgZ3VpbGRJZDogc3RyaW5nLFxuICAgIGNvbW1hbmRJZDogc3RyaW5nXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZGVsZXRlKFxuICAgICAgYC9hcHBsaWNhdGlvbnMvJHthcHBsaWNhdGlvbklkfS9ndWlsZHMvJHtndWlsZElkfS9jb21tYW5kcy8ke2NvbW1hbmRJZH1gXG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIFRha2VzIGEgbGlzdCBvZiBhcHBsaWNhdGlvbiBjb21tYW5kcywgb3ZlcndyaXRpbmcgZXhpc3RpbmcgY29tbWFuZHMgZm9yIHRoZSBndWlsZC4gUmV0dXJucyBgMjAwYCBhbmQgYSBsaXN0IG9mIFtBcHBsaWNhdGlvbkNvbW1hbmRdKCNET0NTX0lOVEVSQUNUSU9OU19TTEFTSF9DT01NQU5EUy9hcHBsaWNhdGlvbmNvbW1hbmQpIG9iamVjdHMuXG4gICAqL1xuICBhc3luYyBidWxrT3ZlcndyaXRlR3VpbGRBcHBsaWNhdGlvbkNvbW1hbmRzKFxuICAgIGFwcGxpY2F0aW9uSWQ6IHN0cmluZyxcbiAgICBndWlsZElkOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogQXBwbGljYXRpb25Db21tYW5kUGFydGlhbFxuICApOiBQcm9taXNlPEFwcGxpY2F0aW9uQ29tbWFuZFBheWxvYWRbXT4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucHV0KFxuICAgICAgYC9hcHBsaWNhdGlvbnMvJHthcHBsaWNhdGlvbklkfS9ndWlsZHMvJHtndWlsZElkfS9jb21tYW5kc2AsXG4gICAgICBwYXlsb2FkXG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIHJlc3BvbnNlIHRvIGFuIEludGVyYWN0aW9uIGZyb20gdGhlIGdhdGV3YXkuIFRha2VzIGFuIFtJbnRlcmFjdGlvbiByZXNwb25zZV0oI0RPQ1NfSU5URVJBQ1RJT05TX1NMQVNIX0NPTU1BTkRTL2ludGVyYWN0aW9uLXJlc3BvbnNlKS5cbiAgICovXG4gIGFzeW5jIGNyZWF0ZUludGVyYWN0aW9uUmVzcG9uc2UoXG4gICAgaW50ZXJhY3Rpb25JZDogc3RyaW5nLFxuICAgIGludGVyYWN0aW9uVG9rZW46IHN0cmluZyxcbiAgICBwYXlsb2FkOiBJbnRlcmFjdGlvblJlc3BvbnNlUGF5bG9hZFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LnBvc3QoXG4gICAgICBgL2ludGVyYWN0aW9ucy8ke2ludGVyYWN0aW9uSWR9LyR7aW50ZXJhY3Rpb25Ub2tlbn0vY2FsbGJhY2tgLFxuICAgICAgcGF5bG9hZFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBFZGl0cyB0aGUgaW5pdGlhbCBJbnRlcmFjdGlvbiByZXNwb25zZS4gRnVuY3Rpb25zIHRoZSBzYW1lIGFzIFtFZGl0IFdlYmhvb2sgTWVzc2FnZV0oI0RPQ1NfUkVTT1VSQ0VTX1dFQkhPT0svZWRpdC13ZWJob29rLW1lc3NhZ2UpLlxuICAgKi9cbiAgYXN5bmMgZWRpdE9yaWdpbmFsSW50ZXJhY3Rpb25SZXNwb25zZShcbiAgICBhcHBsaWNhdGlvbklkOiBzdHJpbmcsXG4gICAgaW50ZXJhY3Rpb25Ub2tlbjogc3RyaW5nLFxuICAgIHBheWxvYWQ6IENyZWF0ZVdlYmhvb2tNZXNzYWdlQmFzZVBheWxvYWRcbiAgKTogUHJvbWlzZTxNZXNzYWdlUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucGF0Y2goXG4gICAgICBgL3dlYmhvb2tzLyR7YXBwbGljYXRpb25JZH0vJHtpbnRlcmFjdGlvblRva2VufS9tZXNzYWdlcy9Ab3JpZ2luYWxgLFxuICAgICAgcGF5bG9hZFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIHRoZSBpbml0aWFsIEludGVyYWN0aW9uIHJlc3BvbnNlLiBSZXR1cm5zIGAyMDRgIG9uIHN1Y2Nlc3MuXG4gICAqL1xuICBhc3luYyBkZWxldGVPcmlnaW5hbEludGVyYWN0aW9uUmVzcG9uc2UoXG4gICAgYXBwbGljYXRpb25JZDogc3RyaW5nLFxuICAgIGludGVyYWN0aW9uVG9rZW46IHN0cmluZ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShcbiAgICAgIGAvd2ViaG9va3MvJHthcHBsaWNhdGlvbklkfS8ke2ludGVyYWN0aW9uVG9rZW59L21lc3NhZ2VzL0BvcmlnaW5hbGBcbiAgICApXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgZm9sbG93dXAgbWVzc2FnZSBmb3IgYW4gSW50ZXJhY3Rpb24uIEZ1bmN0aW9ucyB0aGUgc2FtZSBhcyBbRXhlY3V0ZSBXZWJob29rXSgjRE9DU19SRVNPVVJDRVNfV0VCSE9PSy9leGVjdXRlLXdlYmhvb2spLCBidXQgYHdhaXRgIGlzIGFsd2F5cyB0cnVlLCBhbmQgYGZsYWdzYCBjYW4gYmUgc2V0IHRvIGA2NGAgaW4gdGhlIGJvZHkgdG8gc2VuZCBhbiBlcGhlbWVyYWwgbWVzc2FnZS5cbiAgICovXG4gIGFzeW5jIGNyZWF0ZUZvbGxvd3VwTWVzc2FnZShcbiAgICBhcHBsaWNhdGlvbklkOiBzdHJpbmcsXG4gICAgaW50ZXJhY3Rpb25Ub2tlbjogc3RyaW5nLFxuICAgIHBheWxvYWQ6IENyZWF0ZVdlYmhvb2tNZXNzYWdlQmFzZVBheWxvYWRcbiAgKTogUHJvbWlzZTxNZXNzYWdlUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucG9zdChcbiAgICAgIGAvd2ViaG9va3MvJHthcHBsaWNhdGlvbklkfS8ke2ludGVyYWN0aW9uVG9rZW59YCxcbiAgICAgIHBheWxvYWRcbiAgICApXG4gIH1cblxuICAvKipcbiAgICogRWRpdHMgYSBmb2xsb3d1cCBtZXNzYWdlIGZvciBhbiBJbnRlcmFjdGlvbi4gRnVuY3Rpb25zIHRoZSBzYW1lIGFzIFtFZGl0IFdlYmhvb2sgTWVzc2FnZV0oI0RPQ1NfUkVTT1VSQ0VTX1dFQkhPT0svZWRpdC13ZWJob29rLW1lc3NhZ2UpLlxuICAgKi9cbiAgYXN5bmMgZWRpdEZvbGxvd3VwTWVzc2FnZShcbiAgICBhcHBsaWNhdGlvbklkOiBzdHJpbmcsXG4gICAgaW50ZXJhY3Rpb25Ub2tlbjogc3RyaW5nLFxuICAgIG1lc3NhZ2VJZDogc3RyaW5nLFxuICAgIHBheWxvYWQ6IENyZWF0ZVdlYmhvb2tNZXNzYWdlQmFzZVBheWxvYWRcbiAgKTogUHJvbWlzZTxNZXNzYWdlUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucGF0Y2goXG4gICAgICBgL3dlYmhvb2tzLyR7YXBwbGljYXRpb25JZH0vJHtpbnRlcmFjdGlvblRva2VufS9tZXNzYWdlcy8ke21lc3NhZ2VJZH1gLFxuICAgICAgcGF5bG9hZFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGEgZm9sbG93dXAgbWVzc2FnZSBmb3IgYW4gSW50ZXJhY3Rpb24uIFJldHVybnMgYDIwNGAgb24gc3VjY2Vzcy5cbiAgICovXG4gIGFzeW5jIGRlbGV0ZUZvbGxvd3VwTWVzc2FnZShcbiAgICBhcHBsaWNhdGlvbklkOiBzdHJpbmcsXG4gICAgaW50ZXJhY3Rpb25Ub2tlbjogc3RyaW5nLFxuICAgIG1lc3NhZ2VJZDogc3RyaW5nXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZGVsZXRlKFxuICAgICAgYC93ZWJob29rcy8ke2FwcGxpY2F0aW9uSWR9LyR7aW50ZXJhY3Rpb25Ub2tlbn0vbWVzc2FnZXMvJHttZXNzYWdlSWR9YFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIFthdWRpdCBsb2ddKCNET0NTX1JFU09VUkNFU19BVURJVF9MT0cvYXVkaXQtbG9nLW9iamVjdCkgb2JqZWN0IGZvciB0aGUgZ3VpbGQuIFJlcXVpcmVzIHRoZSAnVklFV19BVURJVF9MT0cnIHBlcm1pc3Npb24uXG4gICAqL1xuICBhc3luYyBnZXRHdWlsZEF1ZGl0TG9nKFxuICAgIGd1aWxkSWQ6IHN0cmluZyxcbiAgICBwYXJhbXM6IHtcbiAgICAgIHVzZXJJZD86IHN0cmluZ1xuICAgICAgYWN0aW9uVHlwZT86IEF1ZGl0TG9nRXZlbnRzXG4gICAgICBiZWZvcmU/OiBzdHJpbmdcbiAgICAgIGxpbWl0PzogbnVtYmVyXG4gICAgfVxuICApOiBQcm9taXNlPEF1ZGl0TG9nUGF5bG9hZD4ge1xuICAgIGxldCBxID0gJydcbiAgICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMocGFyYW1zKVxuICAgIGlmIChlbnRyaWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHEgPSAnPydcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIGVudHJpZXMpIHtcbiAgICAgICAgaWYgKHYgPT09IHVuZGVmaW5lZCkgY29udGludWVcbiAgICAgICAgY29uc3Qga1NuYWtlID0gayA9PT0gJ2FjdGlvblR5cGUnID8gJ2FjdGlvbl90eXBlJyA6IGtcbiAgICAgICAgaWYgKHEgIT09ICc/JykgcSArPSAnJidcbiAgICAgICAgcSArPSBgJHtlbmNvZGVVUklDb21wb25lbnQoa1NuYWtlKX09JHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgdj8udG9TdHJpbmcoKSA/PyAnJ1xuICAgICAgICApfWBcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC9ndWlsZHMvJHtndWlsZElkfS9hdWRpdC1sb2dzJHtxfWApXG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgY2hhbm5lbCBieSBJRC4gUmV0dXJucyBhIFtjaGFubmVsXSgjRE9DU19SRVNPVVJDRVNfQ0hBTk5FTC9jaGFubmVsLW9iamVjdCkgb2JqZWN0LlxuICAgKi9cbiAgYXN5bmMgZ2V0Q2hhbm5lbChjaGFubmVsSWQ6IHN0cmluZyk6IFByb21pc2U8Q2hhbm5lbFBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfWApXG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIGEgY2hhbm5lbCdzIHNldHRpbmdzLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9DSEFOTkVMU2AgcGVybWlzc2lvbiBmb3IgdGhlIGd1aWxkLiBSZXR1cm5zIGEgW2NoYW5uZWxdKCNET0NTX1JFU09VUkNFU19DSEFOTkVML2NoYW5uZWwtb2JqZWN0KSBvbiBzdWNjZXNzLCBhbmQgYSA0MDAgQkFEIFJFUVVFU1Qgb24gaW52YWxpZCBwYXJhbWV0ZXJzLiBGaXJlcyBhIFtDaGFubmVsIFVwZGF0ZV0oI0RPQ1NfVE9QSUNTX0dBVEVXQVkvY2hhbm5lbC11cGRhdGUpIEdhdGV3YXkgZXZlbnQuIElmIG1vZGlmeWluZyBhIGNhdGVnb3J5LCBpbmRpdmlkdWFsIFtDaGFubmVsIFVwZGF0ZV0oI0RPQ1NfVE9QSUNTX0dBVEVXQVkvY2hhbm5lbC11cGRhdGUpIGV2ZW50cyB3aWxsIGZpcmUgZm9yIGVhY2ggY2hpbGQgY2hhbm5lbCB0aGF0IGFsc28gY2hhbmdlcy4gSWYgbW9kaWZ5aW5nIHBlcm1pc3Npb24gb3ZlcndyaXRlcywgdGhlIGBNQU5BR0VfUk9MRVNgIHBlcm1pc3Npb24gaXMgcmVxdWlyZWQuIE9ubHkgcGVybWlzc2lvbnMgeW91ciBib3QgaGFzIGluIHRoZSBndWlsZCBvciBjaGFubmVsIGNhbiBiZSBhbGxvd2VkL2RlbmllZCAodW5sZXNzIHlvdXIgYm90IGhhcyBhIGBNQU5BR0VfUk9MRVNgIG92ZXJ3cml0ZSBpbiB0aGUgY2hhbm5lbCkuIEFsbCBKU09OIHBhcmFtZXRlcnMgYXJlIG9wdGlvbmFsLlxuICAgKi9cbiAgYXN5bmMgbW9kaWZ5Q2hhbm5lbChcbiAgICBjaGFubmVsSWQ6IHN0cmluZyxcbiAgICBwYXlsb2FkOiBQYXJ0aWFsPENoYW5uZWxQYXlsb2FkPlxuICApOiBQcm9taXNlPENoYW5uZWxQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wYXRjaChgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfWAsIHBheWxvYWQpXG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGEgY2hhbm5lbCwgb3IgY2xvc2UgYSBwcml2YXRlIG1lc3NhZ2UuIFJlcXVpcmVzIHRoZSBgTUFOQUdFX0NIQU5ORUxTYCBwZXJtaXNzaW9uIGZvciB0aGUgZ3VpbGQuIERlbGV0aW5nIGEgY2F0ZWdvcnkgZG9lcyBub3QgZGVsZXRlIGl0cyBjaGlsZCBjaGFubmVsczsgdGhleSB3aWxsIGhhdmUgdGhlaXIgYHBhcmVudF9pZGAgcmVtb3ZlZCBhbmQgYSBbQ2hhbm5lbCBVcGRhdGVdKCNET0NTX1RPUElDU19HQVRFV0FZL2NoYW5uZWwtdXBkYXRlKSBHYXRld2F5IGV2ZW50IHdpbGwgZmlyZSBmb3IgZWFjaCBvZiB0aGVtLiBSZXR1cm5zIGEgW2NoYW5uZWxdKCNET0NTX1JFU09VUkNFU19DSEFOTkVML2NoYW5uZWwtb2JqZWN0KSBvYmplY3Qgb24gc3VjY2Vzcy4gRmlyZXMgYSBbQ2hhbm5lbCBEZWxldGVdKCNET0NTX1RPUElDU19HQVRFV0FZL2NoYW5uZWwtZGVsZXRlKSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgZGVsZXRlQ2hhbm5lbChjaGFubmVsSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZGVsZXRlKGAvY2hhbm5lbHMvJHtjaGFubmVsSWR9YClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtZXNzYWdlcyBmb3IgYSBjaGFubmVsLiBJZiBvcGVyYXRpbmcgb24gYSBndWlsZCBjaGFubmVsLCB0aGlzIGVuZHBvaW50IHJlcXVpcmVzIHRoZSBgVklFV19DSEFOTkVMYCBwZXJtaXNzaW9uIHRvIGJlIHByZXNlbnQgb24gdGhlIGN1cnJlbnQgdXNlci4gSWYgdGhlIGN1cnJlbnQgdXNlciBpcyBtaXNzaW5nIHRoZSAnUkVBRF9NRVNTQUdFX0hJU1RPUlknIHBlcm1pc3Npb24gaW4gdGhlIGNoYW5uZWwgdGhlbiB0aGlzIHdpbGwgcmV0dXJuIG5vIG1lc3NhZ2VzIChzaW5jZSB0aGV5IGNhbm5vdCByZWFkIHRoZSBtZXNzYWdlIGhpc3RvcnkpLiBSZXR1cm5zIGFuIGFycmF5IG9mIFttZXNzYWdlXSgjRE9DU19SRVNPVVJDRVNfQ0hBTk5FTC9tZXNzYWdlLW9iamVjdCkgb2JqZWN0cyBvbiBzdWNjZXNzLlxuICAgKi9cbiAgYXN5bmMgZ2V0Q2hhbm5lbE1lc3NhZ2VzKGNoYW5uZWxJZDogc3RyaW5nKTogUHJvbWlzZTxNZXNzYWdlUGF5bG9hZFtdPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC9jaGFubmVscy8ke2NoYW5uZWxJZH0vbWVzc2FnZXNgKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzcGVjaWZpYyBtZXNzYWdlIGluIHRoZSBjaGFubmVsLiBJZiBvcGVyYXRpbmcgb24gYSBndWlsZCBjaGFubmVsLCB0aGlzIGVuZHBvaW50IHJlcXVpcmVzIHRoZSAnUkVBRF9NRVNTQUdFX0hJU1RPUlknIHBlcm1pc3Npb24gdG8gYmUgcHJlc2VudCBvbiB0aGUgY3VycmVudCB1c2VyLiBSZXR1cm5zIGEgW21lc3NhZ2VdKCNET0NTX1JFU09VUkNFU19DSEFOTkVML21lc3NhZ2Utb2JqZWN0KSBvYmplY3Qgb24gc3VjY2Vzcy5cbiAgICovXG4gIGFzeW5jIGdldENoYW5uZWxNZXNzYWdlKFxuICAgIGNoYW5uZWxJZDogc3RyaW5nLFxuICAgIG1lc3NhZ2VJZDogc3RyaW5nXG4gICk6IFByb21pc2U8TWVzc2FnZVBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS9tZXNzYWdlcy8ke21lc3NhZ2VJZH1gKVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlTWVzc2FnZShcbiAgICBjaGFubmVsSWQ6IHN0cmluZyxcbiAgICBwYXlsb2FkOiBDcmVhdGVNZXNzYWdlUGF5bG9hZFxuICApOiBQcm9taXNlPE1lc3NhZ2VQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wb3N0KGAvY2hhbm5lbHMvJHtjaGFubmVsSWR9L21lc3NhZ2VzYCwgcGF5bG9hZClcbiAgfVxuXG4gIC8qKlxuICAgKiBDcm9zc3Bvc3QgYSBtZXNzYWdlIGluIGEgTmV3cyBDaGFubmVsIHRvIGZvbGxvd2luZyBjaGFubmVscy4gVGhpcyBlbmRwb2ludCByZXF1aXJlcyB0aGUgJ1NFTkRfTUVTU0FHRVMnIHBlcm1pc3Npb24sIGlmIHRoZSBjdXJyZW50IHVzZXIgc2VudCB0aGUgbWVzc2FnZSwgb3IgYWRkaXRpb25hbGx5IHRoZSAnTUFOQUdFX01FU1NBR0VTJyBwZXJtaXNzaW9uLCBmb3IgYWxsIG90aGVyIG1lc3NhZ2VzLCB0byBiZSBwcmVzZW50IGZvciB0aGUgY3VycmVudCB1c2VyLlxuICAgKiBSZXR1cm5zIGEgW21lc3NhZ2VdKCNET0NTX1JFU09VUkNFU19DSEFOTkVML21lc3NhZ2Utb2JqZWN0KSBvYmplY3QuXG4gICAqL1xuICBhc3luYyBjcm9zc3Bvc3RNZXNzYWdlKFxuICAgIGNoYW5uZWxJZDogc3RyaW5nLFxuICAgIG1lc3NhZ2VJZDogc3RyaW5nXG4gICk6IFByb21pc2U8TWVzc2FnZVBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LnBvc3QoXG4gICAgICBgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS9tZXNzYWdlcy8ke21lc3NhZ2VJZH0vY3Jvc3Nwb3N0YFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSByZWFjdGlvbiBmb3IgdGhlIG1lc3NhZ2UuIFRoaXMgZW5kcG9pbnQgcmVxdWlyZXMgdGhlICdSRUFEX01FU1NBR0VfSElTVE9SWScgcGVybWlzc2lvbiB0byBiZSBwcmVzZW50IG9uIHRoZSBjdXJyZW50IHVzZXIuIEFkZGl0aW9uYWxseSwgaWYgbm9ib2R5IGVsc2UgaGFzIHJlYWN0ZWQgdG8gdGhlIG1lc3NhZ2UgdXNpbmcgdGhpcyBlbW9qaSwgdGhpcyBlbmRwb2ludCByZXF1aXJlcyB0aGUgJ0FERF9SRUFDVElPTlMnIHBlcm1pc3Npb24gdG8gYmUgcHJlc2VudCBvbiB0aGUgY3VycmVudCB1c2VyLiBSZXR1cm5zIGEgMjA0IGVtcHR5IHJlc3BvbnNlIG9uIHN1Y2Nlc3MuXG4gICAqIFRoZSBgZW1vamlgIG11c3QgYmUgW1VSTCBFbmNvZGVkXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QZXJjZW50LWVuY29kaW5nKSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwgd2l0aCBgMTAwMTQ6IFVua25vd24gRW1vamlgLlxuICAgKi9cbiAgYXN5bmMgY3JlYXRlUmVhY3Rpb24oXG4gICAgY2hhbm5lbElkOiBzdHJpbmcsXG4gICAgbWVzc2FnZUlkOiBzdHJpbmcsXG4gICAgZW1vamk6IHN0cmluZ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LnB1dChcbiAgICAgIGAvY2hhbm5lbHMvJHtjaGFubmVsSWR9L21lc3NhZ2VzLyR7bWVzc2FnZUlkfS9yZWFjdGlvbnMvJHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgIGVtb2ppXG4gICAgICApfS9AbWVgXG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIHJlYWN0aW9uIHRoZSBjdXJyZW50IHVzZXIgaGFzIG1hZGUgZm9yIHRoZSBtZXNzYWdlLiBSZXR1cm5zIGEgMjA0IGVtcHR5IHJlc3BvbnNlIG9uIHN1Y2Nlc3MuXG4gICAqIFRoZSBgZW1vamlgIG11c3QgYmUgW1VSTCBFbmNvZGVkXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QZXJjZW50LWVuY29kaW5nKSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwgd2l0aCBgMTAwMTQ6IFVua25vd24gRW1vamlgLlxuICAgKi9cbiAgYXN5bmMgZGVsZXRlT3duUmVhY3Rpb24oXG4gICAgY2hhbm5lbElkOiBzdHJpbmcsXG4gICAgbWVzc2FnZUlkOiBzdHJpbmcsXG4gICAgZW1vamk6IHN0cmluZ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShcbiAgICAgIGAvY2hhbm5lbHMvJHtjaGFubmVsSWR9L21lc3NhZ2VzLyR7bWVzc2FnZUlkfS9yZWFjdGlvbnMvJHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgIGVtb2ppXG4gICAgICApfS9AbWVgXG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgYW5vdGhlciB1c2VyJ3MgcmVhY3Rpb24uIFRoaXMgZW5kcG9pbnQgcmVxdWlyZXMgdGhlICdNQU5BR0VfTUVTU0FHRVMnIHBlcm1pc3Npb24gdG8gYmUgcHJlc2VudCBvbiB0aGUgY3VycmVudCB1c2VyLiBSZXR1cm5zIGEgMjA0IGVtcHR5IHJlc3BvbnNlIG9uIHN1Y2Nlc3MuXG4gICAqIFRoZSBgZW1vamlgIG11c3QgYmUgW1VSTCBFbmNvZGVkXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9QZXJjZW50LWVuY29kaW5nKSBvciB0aGUgcmVxdWVzdCB3aWxsIGZhaWwgd2l0aCBgMTAwMTQ6IFVua25vd24gRW1vamlgLlxuICAgKi9cbiAgYXN5bmMgZGVsZXRlVXNlclJlYWN0aW9uKFxuICAgIGNoYW5uZWxJZDogc3RyaW5nLFxuICAgIG1lc3NhZ2VJZDogc3RyaW5nLFxuICAgIGVtb2ppOiBzdHJpbmcsXG4gICAgdXNlcklkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5kZWxldGUoXG4gICAgICBgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS9tZXNzYWdlcy8ke21lc3NhZ2VJZH0vcmVhY3Rpb25zLyR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICBlbW9qaVxuICAgICAgKX0vJHt1c2VySWR9YFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBsaXN0IG9mIHVzZXJzIHRoYXQgcmVhY3RlZCB3aXRoIHRoaXMgZW1vamkuIFJldHVybnMgYW4gYXJyYXkgb2YgW3VzZXJdKCNET0NTX1JFU09VUkNFU19VU0VSL3VzZXItb2JqZWN0KSBvYmplY3RzIG9uIHN1Y2Nlc3MuXG5UaGUgYGVtb2ppYCBtdXN0IGJlIFtVUkwgRW5jb2RlZF0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUGVyY2VudC1lbmNvZGluZykgb3IgdGhlIHJlcXVlc3Qgd2lsbCBmYWlsIHdpdGggYDEwMDE0OiBVbmtub3duIEVtb2ppYC5cbiAgICovXG4gIGFzeW5jIGdldFJlYWN0aW9ucyhcbiAgICBjaGFubmVsSWQ6IHN0cmluZyxcbiAgICBtZXNzYWdlSWQ6IHN0cmluZyxcbiAgICBlbW9qaTogc3RyaW5nXG4gICk6IFByb21pc2U8VXNlclBheWxvYWRbXT4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KFxuICAgICAgYC9jaGFubmVscy8ke2NoYW5uZWxJZH0vbWVzc2FnZXMvJHttZXNzYWdlSWR9L3JlYWN0aW9ucy8ke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgZW1vamlcbiAgICAgICl9YFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGFsbCByZWFjdGlvbnMgb24gYSBtZXNzYWdlLiBUaGlzIGVuZHBvaW50IHJlcXVpcmVzIHRoZSAnTUFOQUdFX01FU1NBR0VTJyBwZXJtaXNzaW9uIHRvIGJlIHByZXNlbnQgb24gdGhlIGN1cnJlbnQgdXNlci4gRmlyZXMgYSBbTWVzc2FnZSBSZWFjdGlvbiBSZW1vdmUgQWxsXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9tZXNzYWdlLXJlYWN0aW9uLXJlbW92ZS1hbGwpIEdhdGV3YXkgZXZlbnQuXG4gICAqL1xuICBhc3luYyBkZWxldGVBbGxSZWFjdGlvbnMoXG4gICAgY2hhbm5lbElkOiBzdHJpbmcsXG4gICAgbWVzc2FnZUlkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5kZWxldGUoXG4gICAgICBgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS9tZXNzYWdlcy8ke21lc3NhZ2VJZH0vcmVhY3Rpb25zYFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGVzIGFsbCB0aGUgcmVhY3Rpb25zIGZvciBhIGdpdmVuIGVtb2ppIG9uIGEgbWVzc2FnZS4gVGhpcyBlbmRwb2ludCByZXF1aXJlcyB0aGUgYE1BTkFHRV9NRVNTQUdFU2AgcGVybWlzc2lvbiB0byBiZSBwcmVzZW50IG9uIHRoZSBjdXJyZW50IHVzZXIuIEZpcmVzIGEgW01lc3NhZ2UgUmVhY3Rpb24gUmVtb3ZlIEVtb2ppXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9tZXNzYWdlLXJlYWN0aW9uLXJlbW92ZS1lbW9qaSkgR2F0ZXdheSBldmVudC5cbiAgICogVGhlIGBlbW9qaWAgbXVzdCBiZSBbVVJMIEVuY29kZWRdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1BlcmNlbnQtZW5jb2RpbmcpIG9yIHRoZSByZXF1ZXN0IHdpbGwgZmFpbCB3aXRoIGAxMDAxNDogVW5rbm93biBFbW9qaWAuXG4gICAqL1xuICBhc3luYyBkZWxldGVBbGxSZWFjdGlvbnNGb3JFbW9qaShcbiAgICBjaGFubmVsSWQ6IHN0cmluZyxcbiAgICBtZXNzYWdlSWQ6IHN0cmluZyxcbiAgICBlbW9qaTogc3RyaW5nXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZGVsZXRlKFxuICAgICAgYC9jaGFubmVscy8ke2NoYW5uZWxJZH0vbWVzc2FnZXMvJHttZXNzYWdlSWR9L3JlYWN0aW9ucy8ke2Vtb2ppfWBcbiAgICApXG4gIH1cblxuICAvKipcbiAgICogRWRpdCBhIHByZXZpb3VzbHkgc2VudCBtZXNzYWdlLiBUaGUgZmllbGRzIGBjb250ZW50YCwgYGVtYmVkYCwgYGFsbG93ZWRfbWVudGlvbnNgIGFuZCBgZmxhZ3NgIGNhbiBiZSBlZGl0ZWQgYnkgdGhlIG9yaWdpbmFsIG1lc3NhZ2UgYXV0aG9yLiBPdGhlciB1c2VycyBjYW4gb25seSBlZGl0IGBmbGFnc2AgYW5kIG9ubHkgaWYgdGhleSBoYXZlIHRoZSBgTUFOQUdFX01FU1NBR0VTYCBwZXJtaXNzaW9uIGluIHRoZSBjb3JyZXNwb25kaW5nIGNoYW5uZWwuIFdoZW4gc3BlY2lmeWluZyBmbGFncywgZW5zdXJlIHRvIGluY2x1ZGUgYWxsIHByZXZpb3VzbHkgc2V0IGZsYWdzL2JpdHMgaW4gYWRkaXRpb24gdG8gb25lcyB0aGF0IHlvdSBhcmUgbW9kaWZ5aW5nLiBPbmx5IGBmbGFnc2AgZG9jdW1lbnRlZCBpbiB0aGUgdGFibGUgYmVsb3cgbWF5IGJlIG1vZGlmaWVkIGJ5IHVzZXJzICh1bnN1cHBvcnRlZCBmbGFnIGNoYW5nZXMgYXJlIGN1cnJlbnRseSBpZ25vcmVkIHdpdGhvdXQgZXJyb3IpLlxuICAgKiBSZXR1cm5zIGEgW21lc3NhZ2VdKCNET0NTX1JFU09VUkNFU19DSEFOTkVML21lc3NhZ2Utb2JqZWN0KSBvYmplY3QuIEZpcmVzIGEgW01lc3NhZ2UgVXBkYXRlXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9tZXNzYWdlLXVwZGF0ZSkgR2F0ZXdheSBldmVudC5cbiAgICovXG4gIGFzeW5jIGVkaXRNZXNzYWdlKFxuICAgIGNoYW5uZWxJZDogc3RyaW5nLFxuICAgIG1lc3NhZ2VJZDogc3RyaW5nLFxuICAgIHBheWxvYWQ6IEVkaXRNZXNzYWdlUGF5bG9hZFxuICApOiBQcm9taXNlPE1lc3NhZ2VQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wYXRjaChcbiAgICAgIGAvY2hhbm5lbHMvJHtjaGFubmVsSWR9L21lc3NhZ2VzLyR7bWVzc2FnZUlkfWAsXG4gICAgICBwYXlsb2FkXG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIG1lc3NhZ2UuIElmIG9wZXJhdGluZyBvbiBhIGd1aWxkIGNoYW5uZWwgYW5kIHRyeWluZyB0byBkZWxldGUgYSBtZXNzYWdlIHRoYXQgd2FzIG5vdCBzZW50IGJ5IHRoZSBjdXJyZW50IHVzZXIsIHRoaXMgZW5kcG9pbnQgcmVxdWlyZXMgdGhlIGBNQU5BR0VfTUVTU0FHRVNgIHBlcm1pc3Npb24uIFJldHVybnMgYSAyMDQgZW1wdHkgcmVzcG9uc2Ugb24gc3VjY2Vzcy4gRmlyZXMgYSBbTWVzc2FnZSBEZWxldGVdKCNET0NTX1RPUElDU19HQVRFV0FZL21lc3NhZ2UtZGVsZXRlKSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgZGVsZXRlTWVzc2FnZShjaGFubmVsSWQ6IHN0cmluZywgbWVzc2FnZUlkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS9tZXNzYWdlcy8ke21lc3NhZ2VJZH1gKVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBtdWx0aXBsZSBtZXNzYWdlcyBpbiBhIHNpbmdsZSByZXF1ZXN0LiBUaGlzIGVuZHBvaW50IGNhbiBvbmx5IGJlIHVzZWQgb24gZ3VpbGQgY2hhbm5lbHMgYW5kIHJlcXVpcmVzIHRoZSBgTUFOQUdFX01FU1NBR0VTYCBwZXJtaXNzaW9uLiBSZXR1cm5zIGEgMjA0IGVtcHR5IHJlc3BvbnNlIG9uIHN1Y2Nlc3MuIEZpcmVzIGEgW01lc3NhZ2UgRGVsZXRlIEJ1bGtdKCNET0NTX1RPUElDU19HQVRFV0FZL21lc3NhZ2UtZGVsZXRlLWJ1bGspIEdhdGV3YXkgZXZlbnQuXG4gICAqIEFueSBtZXNzYWdlIElEcyBnaXZlbiB0aGF0IGRvIG5vdCBleGlzdCBvciBhcmUgaW52YWxpZCB3aWxsIGNvdW50IHRvd2FyZHMgdGhlIG1pbmltdW0gYW5kIG1heGltdW0gbWVzc2FnZSBjb3VudCAoY3VycmVudGx5IDIgYW5kIDEwMCByZXNwZWN0aXZlbHkpLlxuICAgKi9cbiAgYXN5bmMgYnVsa0RlbGV0ZU1lc3NhZ2VzKFxuICAgIGNoYW5uZWxJZDogc3RyaW5nLFxuICAgIHBheWxvYWQ6IHN0cmluZ1tdXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucG9zdChcbiAgICAgIGAvY2hhbm5lbHMvJHtjaGFubmVsSWR9L21lc3NhZ2VzL2J1bGstZGVsZXRlYCxcbiAgICAgIHBheWxvYWRcbiAgICApXG4gIH1cblxuICAvKipcbiAgICogRWRpdCB0aGUgY2hhbm5lbCBwZXJtaXNzaW9uIG92ZXJ3cml0ZXMgZm9yIGEgdXNlciBvciByb2xlIGluIGEgY2hhbm5lbC4gT25seSB1c2FibGUgZm9yIGd1aWxkIGNoYW5uZWxzLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9ST0xFU2AgcGVybWlzc2lvbi4gT25seSBwZXJtaXNzaW9ucyB5b3VyIGJvdCBoYXMgaW4gdGhlIGd1aWxkIG9yIGNoYW5uZWwgY2FuIGJlIGFsbG93ZWQvZGVuaWVkICh1bmxlc3MgeW91ciBib3QgaGFzIGEgYE1BTkFHRV9ST0xFU2Agb3ZlcndyaXRlIGluIHRoZSBjaGFubmVsKS4gUmV0dXJucyBhIDIwNCBlbXB0eSByZXNwb25zZSBvbiBzdWNjZXNzLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBwZXJtaXNzaW9ucywgc2VlIFtwZXJtaXNzaW9uc10oI0RPQ1NfVE9QSUNTX1BFUk1JU1NJT05TL3Blcm1pc3Npb25zKS5cbiAgICovXG4gIGFzeW5jIGVkaXRDaGFubmVsUGVybWlzc2lvbnMoXG4gICAgY2hhbm5lbElkOiBzdHJpbmcsXG4gICAgb3ZlcndyaXRlSWQ6IHN0cmluZyxcbiAgICBwYXlsb2FkOiBPdmVyd3JpdGVQYXlsb2FkXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucHV0KFxuICAgICAgYC9jaGFubmVscy8ke2NoYW5uZWxJZH0vcGVybWlzc2lvbnMvJHtvdmVyd3JpdGVJZH1gLFxuICAgICAgcGF5bG9hZFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBbaW52aXRlXSgjRE9DU19SRVNPVVJDRVNfSU5WSVRFL2ludml0ZS1vYmplY3QpIG9iamVjdHMgKHdpdGggW2ludml0ZSBtZXRhZGF0YV0oI0RPQ1NfUkVTT1VSQ0VTX0lOVklURS9pbnZpdGUtbWV0YWRhdGEtb2JqZWN0KSkgZm9yIHRoZSBjaGFubmVsLiBPbmx5IHVzYWJsZSBmb3IgZ3VpbGQgY2hhbm5lbHMuIFJlcXVpcmVzIHRoZSBgTUFOQUdFX0NIQU5ORUxTYCBwZXJtaXNzaW9uLlxuICAgKi9cbiAgYXN5bmMgZ2V0Q2hhbm5lbEludml0ZXMoXG4gICAgY2hhbm5lbElkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxJbnZpdGVXaXRoTWV0YWRhdGFQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC9jaGFubmVscy8ke2NoYW5uZWxJZH0vaW52aXRlc2ApXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IFtpbnZpdGVdKCNET0NTX1JFU09VUkNFU19JTlZJVEUvaW52aXRlLW9iamVjdCkgb2JqZWN0IGZvciB0aGUgY2hhbm5lbC4gT25seSB1c2FibGUgZm9yIGd1aWxkIGNoYW5uZWxzLiBSZXF1aXJlcyB0aGUgYENSRUFURV9JTlNUQU5UX0lOVklURWAgcGVybWlzc2lvbi4gQWxsIEpTT04gcGFyYW1ldGVycyBmb3IgdGhpcyByb3V0ZSBhcmUgb3B0aW9uYWwsIGhvd2V2ZXIgdGhlIHJlcXVlc3QgYm9keSBpcyBub3QuIElmIHlvdSBhcmUgbm90IHNlbmRpbmcgYW55IGZpZWxkcywgeW91IHN0aWxsIGhhdmUgdG8gc2VuZCBhbiBlbXB0eSBKU09OIG9iamVjdCAoYHt9YCkuIFJldHVybnMgYW4gW2ludml0ZV0oI0RPQ1NfUkVTT1VSQ0VTX0lOVklURS9pbnZpdGUtb2JqZWN0KSBvYmplY3QuIEZpcmVzIGFuIFtJbnZpdGUgQ3JlYXRlXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9pbnZpdGUtY3JlYXRlKSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgY3JlYXRlQ2hhbm5lbEludml0ZShcbiAgICBjaGFubmVsSWQ6IHN0cmluZyxcbiAgICBwYXlsb2FkOiBQYXJ0aWFsPEludml0ZVBheWxvYWQ+ID0ge31cbiAgKTogUHJvbWlzZTxJbnZpdGVQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wb3N0KGAvY2hhbm5lbHMvJHtjaGFubmVsSWR9L2ludml0ZXNgLCBwYXlsb2FkKVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIGNoYW5uZWwgcGVybWlzc2lvbiBvdmVyd3JpdGUgZm9yIGEgdXNlciBvciByb2xlIGluIGEgY2hhbm5lbC4gT25seSB1c2FibGUgZm9yIGd1aWxkIGNoYW5uZWxzLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9ST0xFU2AgcGVybWlzc2lvbi4gUmV0dXJucyBhIDIwNCBlbXB0eSByZXNwb25zZSBvbiBzdWNjZXNzLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBwZXJtaXNzaW9ucywgc2VlIFtwZXJtaXNzaW9uc10oI0RPQ1NfVE9QSUNTX1BFUk1JU1NJT05TL3Blcm1pc3Npb25zKVxuICAgKi9cbiAgYXN5bmMgZGVsZXRlQ2hhbm5lbFBlcm1pc3Npb24oXG4gICAgY2hhbm5lbElkOiBzdHJpbmcsXG4gICAgb3ZlcndyaXRlSWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS9wZXJtaXNzaW9ucy8ke292ZXJ3cml0ZUlkfWApXG4gIH1cblxuICAvKipcbiAgICogRm9sbG93IGEgTmV3cyBDaGFubmVsIHRvIHNlbmQgbWVzc2FnZXMgdG8gYSB0YXJnZXQgY2hhbm5lbC4gUmVxdWlyZXMgdGhlIGBNQU5BR0VfV0VCSE9PS1NgIHBlcm1pc3Npb24gaW4gdGhlIHRhcmdldCBjaGFubmVsLiBSZXR1cm5zIGEgW2ZvbGxvd2VkIGNoYW5uZWxdKCNET0NTX1JFU09VUkNFU19DSEFOTkVML2ZvbGxvd2VkLWNoYW5uZWwtb2JqZWN0KSBvYmplY3QuXG4gICAqL1xuICBhc3luYyBmb2xsb3dOZXdzQ2hhbm5lbChjaGFubmVsSWQ6IHN0cmluZyk6IFByb21pc2U8Rm9sbG93ZWRDaGFubmVsPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wb3N0KGAvY2hhbm5lbHMvJHtjaGFubmVsSWR9L2ZvbGxvd2Vyc2ApXG4gIH1cblxuICAvKipcbiAgICogUG9zdCBhIHR5cGluZyBpbmRpY2F0b3IgZm9yIHRoZSBzcGVjaWZpZWQgY2hhbm5lbC4gR2VuZXJhbGx5IGJvdHMgc2hvdWxkICoqbm90KiogaW1wbGVtZW50IHRoaXMgcm91dGUuIEhvd2V2ZXIsIGlmIGEgYm90IGlzIHJlc3BvbmRpbmcgdG8gYSBjb21tYW5kIGFuZCBleHBlY3RzIHRoZSBjb21wdXRhdGlvbiB0byB0YWtlIGEgZmV3IHNlY29uZHMsIHRoaXMgZW5kcG9pbnQgbWF5IGJlIGNhbGxlZCB0byBsZXQgdGhlIHVzZXIga25vdyB0aGF0IHRoZSBib3QgaXMgcHJvY2Vzc2luZyB0aGVpciBtZXNzYWdlLiBSZXR1cm5zIGEgMjA0IGVtcHR5IHJlc3BvbnNlIG9uIHN1Y2Nlc3MuIEZpcmVzIGEgW1R5cGluZyBTdGFydF0oI0RPQ1NfVE9QSUNTX0dBVEVXQVkvdHlwaW5nLXN0YXJ0KSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgdHJpZ2dlclR5cGluZ0luZGljYXRvcihjaGFubmVsSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucG9zdChgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS90eXBpbmdgKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIHBpbm5lZCBtZXNzYWdlcyBpbiB0aGUgY2hhbm5lbCBhcyBhbiBhcnJheSBvZiBbbWVzc2FnZV0oI0RPQ1NfUkVTT1VSQ0VTX0NIQU5ORUwvbWVzc2FnZS1vYmplY3QpIG9iamVjdHMuXG4gICAqL1xuICBhc3luYyBnZXRQaW5uZWRNZXNzYWdlcyhjaGFubmVsSWQ6IHN0cmluZyk6IFByb21pc2U8TWVzc2FnZVBheWxvYWRbXT4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvY2hhbm5lbHMvJHtjaGFubmVsSWR9L3BpbnNgKVxuICB9XG5cbiAgLyoqXG4gICAqIFBpbiBhIG1lc3NhZ2UgaW4gYSBjaGFubmVsLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9NRVNTQUdFU2AgcGVybWlzc2lvbi4gUmV0dXJucyBhIDIwNCBlbXB0eSByZXNwb25zZSBvbiBzdWNjZXNzLlxuICAgKi9cbiAgYXN5bmMgYWRkUGlubmVkQ2hhbm5lbE1lc3NhZ2UoXG4gICAgY2hhbm5lbElkOiBzdHJpbmcsXG4gICAgbWVzc2FnZUlkOiBzdHJpbmdcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wdXQoYC9jaGFubmVscy8ke2NoYW5uZWxJZH0vcGlucy8ke21lc3NhZ2VJZH1gKVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIHBpbm5lZCBtZXNzYWdlIGluIGEgY2hhbm5lbC4gUmVxdWlyZXMgdGhlIGBNQU5BR0VfTUVTU0FHRVNgIHBlcm1pc3Npb24uIFJldHVybnMgYSAyMDQgZW1wdHkgcmVzcG9uc2Ugb24gc3VjY2Vzcy5cbiAgICovXG4gIGFzeW5jIGRlbGV0ZVBpbm5lZENoYW5uZWxNZXNzYWdlKFxuICAgIGNoYW5uZWxJZDogc3RyaW5nLFxuICAgIG1lc3NhZ2VJZDogc3RyaW5nXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZGVsZXRlKGAvY2hhbm5lbHMvJHtjaGFubmVsSWR9L3BpbnMvJHttZXNzYWdlSWR9YClcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgcmVjaXBpZW50IHRvIGEgR3JvdXAgRE0gdXNpbmcgdGhlaXIgYWNjZXNzIHRva2VuXG4gICAqL1xuICBhc3luYyBncm91cERtQWRkUmVjaXBpZW50KFxuICAgIGNoYW5uZWxJZDogc3RyaW5nLFxuICAgIHVzZXJJZDogc3RyaW5nXG4gICk6IFByb21pc2U8dW5rbm93bj4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucHV0KGAvY2hhbm5lbHMvJHtjaGFubmVsSWR9L3JlY2lwaWVudHMvJHt1c2VySWR9YClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgcmVjaXBpZW50IGZyb20gYSBHcm91cCBETVxuICAgKi9cbiAgYXN5bmMgZ3JvdXBEbVJlbW92ZVJlY2lwaWVudChcbiAgICBjaGFubmVsSWQ6IHN0cmluZyxcbiAgICB1c2VySWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS9yZWNpcGllbnRzLyR7dXNlcklkfWApXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgW2Vtb2ppXSgjRE9DU19SRVNPVVJDRVNfRU1PSkkvZW1vamktb2JqZWN0KSBvYmplY3RzIGZvciB0aGUgZ2l2ZW4gZ3VpbGQuXG4gICAqL1xuICBhc3luYyBsaXN0R3VpbGRFbW9qaXMoZ3VpbGRJZDogc3RyaW5nKTogUHJvbWlzZTxFbW9qaVBheWxvYWRbXT4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvZ3VpbGRzLyR7Z3VpbGRJZH0vZW1vamlzYClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIFtlbW9qaV0oI0RPQ1NfUkVTT1VSQ0VTX0VNT0pJL2Vtb2ppLW9iamVjdCkgb2JqZWN0IGZvciB0aGUgZ2l2ZW4gZ3VpbGQgYW5kIGVtb2ppIElEcy5cbiAgICovXG4gIGFzeW5jIGdldEd1aWxkRW1vamkoZ3VpbGRJZDogc3RyaW5nLCBlbW9qaUlkOiBzdHJpbmcpOiBQcm9taXNlPEVtb2ppUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvZ3VpbGRzLyR7Z3VpbGRJZH0vZW1vamlzLyR7ZW1vamlJZH1gKVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBlbW9qaSBmb3IgdGhlIGd1aWxkLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9FTU9KSVNgIHBlcm1pc3Npb24uIFJldHVybnMgdGhlIG5ldyBbZW1vamldKCNET0NTX1JFU09VUkNFU19FTU9KSS9lbW9qaS1vYmplY3QpIG9iamVjdCBvbiBzdWNjZXNzLiBGaXJlcyBhIFtHdWlsZCBFbW9qaXMgVXBkYXRlXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9ndWlsZC1lbW9qaXMtdXBkYXRlKSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgY3JlYXRlR3VpbGRFbW9qaShcbiAgICBndWlsZElkOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogQ3JlYXRlRW1vamlQYXlsb2FkXG4gICk6IFByb21pc2U8RW1vamlQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wb3N0KGAvZ3VpbGRzLyR7Z3VpbGRJZH0vZW1vamlzYCwgcGF5bG9hZClcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZnkgdGhlIGdpdmVuIGVtb2ppLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9FTU9KSVNgIHBlcm1pc3Npb24uIFJldHVybnMgdGhlIHVwZGF0ZWQgW2Vtb2ppXSgjRE9DU19SRVNPVVJDRVNfRU1PSkkvZW1vamktb2JqZWN0KSBvYmplY3Qgb24gc3VjY2Vzcy4gRmlyZXMgYSBbR3VpbGQgRW1vamlzIFVwZGF0ZV0oI0RPQ1NfVE9QSUNTX0dBVEVXQVkvZ3VpbGQtZW1vamlzLXVwZGF0ZSkgR2F0ZXdheSBldmVudC5cbiAgICovXG4gIGFzeW5jIG1vZGlmeUd1aWxkRW1vamkoXG4gICAgZ3VpbGRJZDogc3RyaW5nLFxuICAgIGVtb2ppSWQ6IHN0cmluZyxcbiAgICBwYXlsb2FkOiBQYXJ0aWFsPEVtb2ppUGF5bG9hZD5cbiAgKTogUHJvbWlzZTxFbW9qaVBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LnBhdGNoKGAvZ3VpbGRzLyR7Z3VpbGRJZH0vZW1vamlzLyR7ZW1vamlJZH1gLCBwYXlsb2FkKVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSB0aGUgZ2l2ZW4gZW1vamkuIFJlcXVpcmVzIHRoZSBgTUFOQUdFX0VNT0pJU2AgcGVybWlzc2lvbi4gUmV0dXJucyBgMjA0IE5vIENvbnRlbnRgIG9uIHN1Y2Nlc3MuIEZpcmVzIGEgW0d1aWxkIEVtb2ppcyBVcGRhdGVdKCNET0NTX1RPUElDU19HQVRFV0FZL2d1aWxkLWVtb2ppcy11cGRhdGUpIEdhdGV3YXkgZXZlbnQuXG4gICAqL1xuICBhc3luYyBkZWxldGVHdWlsZEVtb2ppKGd1aWxkSWQ6IHN0cmluZywgZW1vamlJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5kZWxldGUoYC9ndWlsZHMvJHtndWlsZElkfS9lbW9qaXMvJHtlbW9qaUlkfWApXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGd1aWxkLiBSZXR1cm5zIGEgW2d1aWxkXSgjRE9DU19SRVNPVVJDRVNfR1VJTEQvZ3VpbGQtb2JqZWN0KSBvYmplY3Qgb24gc3VjY2Vzcy4gRmlyZXMgYSBbR3VpbGQgQ3JlYXRlXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9ndWlsZC1jcmVhdGUpIEdhdGV3YXkgZXZlbnQuXG4gICAqL1xuICBhc3luYyBjcmVhdGVHdWlsZChwYXlsb2FkOiBQYXJ0aWFsPEd1aWxkUGF5bG9hZD4pOiBQcm9taXNlPEd1aWxkUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucG9zdChgL2d1aWxkc2AsIHBheWxvYWQpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgW2d1aWxkXSgjRE9DU19SRVNPVVJDRVNfR1VJTEQvZ3VpbGQtb2JqZWN0KSBvYmplY3QgZm9yIHRoZSBnaXZlbiBpZC4gSWYgYHdpdGhfY291bnRzYCBpcyBzZXQgdG8gYHRydWVgLCB0aGlzIGVuZHBvaW50IHdpbGwgYWxzbyByZXR1cm4gYGFwcHJveGltYXRlX21lbWJlcl9jb3VudGAgYW5kIGBhcHByb3hpbWF0ZV9wcmVzZW5jZV9jb3VudGAgZm9yIHRoZSBndWlsZC5cbiAgICovXG4gIGFzeW5jIGdldEd1aWxkKGd1aWxkSWQ6IHN0cmluZyk6IFByb21pc2U8R3VpbGRQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC9ndWlsZHMvJHtndWlsZElkfWApXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgW2d1aWxkIHByZXZpZXddKCNET0NTX1JFU09VUkNFU19HVUlMRC9ndWlsZC1wcmV2aWV3LW9iamVjdCkgb2JqZWN0IGZvciB0aGUgZ2l2ZW4gaWQuIElmIHRoZSB1c2VyIGlzIG5vdCBpbiB0aGUgZ3VpbGQsIHRoZW4gdGhlIGd1aWxkIG11c3QgYmUgRGlzY292ZXJhYmxlLlxuICAgKi9cbiAgYXN5bmMgZ2V0R3VpbGRQcmV2aWV3KGd1aWxkSWQ6IHN0cmluZyk6IFByb21pc2U8R3VpbGRQcmV2aWV3UGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvZ3VpbGRzLyR7Z3VpbGRJZH0vcHJldmlld2ApXG4gIH1cblxuICAvKipcbiAgICogTW9kaWZ5IGEgZ3VpbGQncyBzZXR0aW5ncy4gUmVxdWlyZXMgdGhlIGBNQU5BR0VfR1VJTERgIHBlcm1pc3Npb24uIFJldHVybnMgdGhlIHVwZGF0ZWQgW2d1aWxkXSgjRE9DU19SRVNPVVJDRVNfR1VJTEQvZ3VpbGQtb2JqZWN0KSBvYmplY3Qgb24gc3VjY2Vzcy4gRmlyZXMgYSBbR3VpbGQgVXBkYXRlXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9ndWlsZC11cGRhdGUpIEdhdGV3YXkgZXZlbnQuXG4gICAqL1xuICBhc3luYyBtb2RpZnlHdWlsZChcbiAgICBndWlsZElkOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogUGFydGlhbDxHdWlsZFBheWxvYWQ+XG4gICk6IFByb21pc2U8R3VpbGRQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wYXRjaChgL2d1aWxkcy8ke2d1aWxkSWR9YCwgcGF5bG9hZClcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBndWlsZCBwZXJtYW5lbnRseS4gVXNlciBtdXN0IGJlIG93bmVyLiBSZXR1cm5zIGAyMDQgTm8gQ29udGVudGAgb24gc3VjY2Vzcy4gRmlyZXMgYSBbR3VpbGQgRGVsZXRlXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9ndWlsZC1kZWxldGUpIEdhdGV3YXkgZXZlbnQuXG4gICAqL1xuICBhc3luYyBkZWxldGVHdWlsZChndWlsZElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShgL2d1aWxkcy8ke2d1aWxkSWR9YClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBndWlsZCBbY2hhbm5lbF0oI0RPQ1NfUkVTT1VSQ0VTX0NIQU5ORUwvY2hhbm5lbC1vYmplY3QpIG9iamVjdHMuXG4gICAqL1xuICBhc3luYyBnZXRHdWlsZENoYW5uZWxzKGd1aWxkSWQ6IHN0cmluZyk6IFByb21pc2U8Q2hhbm5lbFBheWxvYWRbXT4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvZ3VpbGRzLyR7Z3VpbGRJZH0vY2hhbm5lbHNgKVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBbY2hhbm5lbF0oI0RPQ1NfUkVTT1VSQ0VTX0NIQU5ORUwvY2hhbm5lbC1vYmplY3QpIG9iamVjdCBmb3IgdGhlIGd1aWxkLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9DSEFOTkVMU2AgcGVybWlzc2lvbi4gSWYgc2V0dGluZyBwZXJtaXNzaW9uIG92ZXJ3cml0ZXMsIG9ubHkgcGVybWlzc2lvbnMgeW91ciBib3QgaGFzIGluIHRoZSBndWlsZCBjYW4gYmUgYWxsb3dlZC9kZW5pZWQuIFNldHRpbmcgYE1BTkFHRV9ST0xFU2AgcGVybWlzc2lvbiBpbiBjaGFubmVscyBpcyBvbmx5IHBvc3NpYmxlIGZvciBndWlsZCBhZG1pbmlzdHJhdG9ycy4gUmV0dXJucyB0aGUgbmV3IFtjaGFubmVsXSgjRE9DU19SRVNPVVJDRVNfQ0hBTk5FTC9jaGFubmVsLW9iamVjdCkgb2JqZWN0IG9uIHN1Y2Nlc3MuIEZpcmVzIGEgW0NoYW5uZWwgQ3JlYXRlXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9jaGFubmVsLWNyZWF0ZSkgR2F0ZXdheSBldmVudC5cbiAgICovXG4gIGFzeW5jIGNyZWF0ZUd1aWxkQ2hhbm5lbChcbiAgICBndWlsZElkOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogR3VpbGRDcmVhdGVDaGFubmVsUGF5bG9hZFxuICApOiBQcm9taXNlPENoYW5uZWxQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wb3N0KGAvZ3VpbGRzLyR7Z3VpbGRJZH0vY2hhbm5lbHNgLCBwYXlsb2FkKVxuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmeSB0aGUgcG9zaXRpb25zIG9mIGEgc2V0IG9mIFtjaGFubmVsXSgjRE9DU19SRVNPVVJDRVNfQ0hBTk5FTC9jaGFubmVsLW9iamVjdCkgb2JqZWN0cyBmb3IgdGhlIGd1aWxkLiBSZXF1aXJlcyBgTUFOQUdFX0NIQU5ORUxTYCBwZXJtaXNzaW9uLiBSZXR1cm5zIGEgMjA0IGVtcHR5IHJlc3BvbnNlIG9uIHN1Y2Nlc3MuIEZpcmVzIG11bHRpcGxlIFtDaGFubmVsIFVwZGF0ZV0oI0RPQ1NfVE9QSUNTX0dBVEVXQVkvY2hhbm5lbC11cGRhdGUpIEdhdGV3YXkgZXZlbnRzLlxuICAgKi9cbiAgYXN5bmMgbW9kaWZ5R3VpbGRDaGFubmVsUG9zaXRpb25zKFxuICAgIGd1aWxkSWQ6IHN0cmluZyxcbiAgICBwYXlsb2FkOiBBcnJheTx7IGlkOiBzdHJpbmc7IHBvc2l0aW9uOiBudW1iZXIgfT5cbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wYXRjaChgL2d1aWxkcy8ke2d1aWxkSWR9L2NoYW5uZWxzYCwgcGF5bG9hZClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgW2d1aWxkIG1lbWJlcl0oI0RPQ1NfUkVTT1VSQ0VTX0dVSUxEL2d1aWxkLW1lbWJlci1vYmplY3QpIG9iamVjdCBmb3IgdGhlIHNwZWNpZmllZCB1c2VyLlxuICAgKi9cbiAgYXN5bmMgZ2V0R3VpbGRNZW1iZXIoXG4gICAgZ3VpbGRJZDogc3RyaW5nLFxuICAgIHVzZXJJZDogc3RyaW5nXG4gICk6IFByb21pc2U8TWVtYmVyUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvZ3VpbGRzLyR7Z3VpbGRJZH0vbWVtYmVycy8ke3VzZXJJZH1gKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIFtndWlsZCBtZW1iZXJdKCNET0NTX1JFU09VUkNFU19HVUlMRC9ndWlsZC1tZW1iZXItb2JqZWN0KSBvYmplY3RzIHRoYXQgYXJlIG1lbWJlcnMgb2YgdGhlIGd1aWxkLlxuICAgKi9cbiAgYXN5bmMgbGlzdEd1aWxkTWVtYmVycyhcbiAgICBndWlsZElkOiBzdHJpbmcsXG4gICAgcGFyYW1zOiB7IGxpbWl0PzogbnVtYmVyOyBhZnRlcj86IHN0cmluZyB9XG4gICk6IFByb21pc2U8TWVtYmVyUGF5bG9hZFtdPiB7XG4gICAgaWYgKHBhcmFtcz8ubGltaXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHBhcmFtcy5saW1pdCA8IDEgfHwgcGFyYW1zLmxpbWl0ID4gMTAwMClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdMaW1pdCBzaG91bGQgYmUgYSBudW1iZXIgYmV0d2VlbiAxIGFuZCAxMDAwJylcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL2d1aWxkcy8ke2d1aWxkSWR9L21lbWJlcnNgLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgW2d1aWxkIG1lbWJlcl0oI0RPQ1NfUkVTT1VSQ0VTX0dVSUxEL2d1aWxkLW1lbWJlci1vYmplY3QpIG9iamVjdHMgd2hvc2UgdXNlcm5hbWUgb3Igbmlja25hbWUgc3RhcnRzIHdpdGggYSBwcm92aWRlZCBzdHJpbmcuXG4gICAqL1xuICBhc3luYyBzZWFyY2hHdWlsZE1lbWJlcnMoXG4gICAgZ3VpbGRJZDogc3RyaW5nLFxuICAgIHBhcmFtczogeyBxdWVyeTogc3RyaW5nOyBsaW1pdD86IG51bWJlciB9XG4gICk6IFByb21pc2U8TWVtYmVyUGF5bG9hZFtdPiB7XG4gICAgaWYgKHBhcmFtcz8ucXVlcnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWVyeSBpcyBhIHJlcXVpcmVkIHBhcmFtZXRlcicpXG4gICAgfVxuXG4gICAgaWYgKHBhcmFtcy5saW1pdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAocGFyYW1zLmxpbWl0IDwgMSB8fCBwYXJhbXMubGltaXQgPiAxMDAwKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xpbWl0IHNob3VsZCBiZSBhIG51bWJlciBiZXR3ZWVuIDEgYW5kIDEwMDAnKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvZ3VpbGRzLyR7Z3VpbGRJZH0vbWVtYmVycy9zZWFyY2hgLCBwYXJhbXMpXG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIHVzZXIgdG8gdGhlIGd1aWxkLCBwcm92aWRlZCB5b3UgaGF2ZSBhIHZhbGlkIG9hdXRoMiBhY2Nlc3MgdG9rZW4gZm9yIHRoZSB1c2VyIHdpdGggdGhlIGBndWlsZHMuam9pbmAgc2NvcGUuIFJldHVybnMgYSAyMDEgQ3JlYXRlZCB3aXRoIHRoZSBbZ3VpbGQgbWVtYmVyXSgjRE9DU19SRVNPVVJDRVNfR1VJTEQvZ3VpbGQtbWVtYmVyLW9iamVjdCkgYXMgdGhlIGJvZHksIG9yIDIwNCBObyBDb250ZW50IGlmIHRoZSB1c2VyIGlzIGFscmVhZHkgYSBtZW1iZXIgb2YgdGhlIGd1aWxkLiBGaXJlcyBhIFtHdWlsZCBNZW1iZXIgQWRkXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9ndWlsZC1tZW1iZXItYWRkKSBHYXRld2F5IGV2ZW50LlxuICAgKiBGb3IgZ3VpbGRzIHdpdGggW01lbWJlcnNoaXAgU2NyZWVuaW5nXSgjRE9DU19SRVNPVVJDRVNfR1VJTEQvbWVtYmVyc2hpcC1zY3JlZW5pbmctb2JqZWN0KSBlbmFibGVkLCB0aGlzIGVuZHBvaW50IHdpbGwgZGVmYXVsdCB0byBhZGRpbmcgbmV3IG1lbWJlcnMgYXMgYHBlbmRpbmdgIGluIHRoZSBbZ3VpbGQgbWVtYmVyIG9iamVjdF0oI0RPQ1NfUkVTT1VSQ0VTX0dVSUxEL2d1aWxkLW1lbWJlci1vYmplY3QpLiBNZW1iZXJzIHRoYXQgYXJlIGBwZW5kaW5nYCB3aWxsIGhhdmUgdG8gY29tcGxldGUgbWVtYmVyc2hpcCBzY3JlZW5pbmcgYmVmb3JlIHRoZXkgYmVjb21lIGZ1bGwgbWVtYmVycyB0aGF0IGNhbiB0YWxrLlxuICAgKi9cbiAgYXN5bmMgYWRkR3VpbGRNZW1iZXIoXG4gICAgZ3VpbGRJZDogc3RyaW5nLFxuICAgIHVzZXJJZDogc3RyaW5nXG4gICk6IFByb21pc2U8TWVtYmVyUGF5bG9hZCB8IHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucHV0KGAvZ3VpbGRzLyR7Z3VpbGRJZH0vbWVtYmVycy8ke3VzZXJJZH1gKVxuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmeSBhdHRyaWJ1dGVzIG9mIGEgW2d1aWxkIG1lbWJlcl0oI0RPQ1NfUkVTT1VSQ0VTX0dVSUxEL2d1aWxkLW1lbWJlci1vYmplY3QpLiBSZXR1cm5zIGEgMjAwIE9LIHdpdGggdGhlIFtndWlsZCBtZW1iZXJdKCNET0NTX1JFU09VUkNFU19HVUlMRC9ndWlsZC1tZW1iZXItb2JqZWN0KSBhcyB0aGUgYm9keS4gRmlyZXMgYSBbR3VpbGQgTWVtYmVyIFVwZGF0ZV0oI0RPQ1NfVE9QSUNTX0dBVEVXQVkvZ3VpbGQtbWVtYmVyLXVwZGF0ZSkgR2F0ZXdheSBldmVudC4gSWYgdGhlIGBjaGFubmVsX2lkYCBpcyBzZXQgdG8gbnVsbCwgdGhpcyB3aWxsIGZvcmNlIHRoZSB0YXJnZXQgdXNlciB0byBiZSBkaXNjb25uZWN0ZWQgZnJvbSB2b2ljZS5cbiAgICovXG4gIGFzeW5jIG1vZGlmeUd1aWxkTWVtYmVyKFxuICAgIGd1aWxkSWQ6IHN0cmluZyxcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICBwYXlsb2FkOiBQYXJ0aWFsPE1lbWJlclBheWxvYWQ+XG4gICk6IFByb21pc2U8TWVtYmVyUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucGF0Y2goYC9ndWlsZHMvJHtndWlsZElkfS9tZW1iZXJzLyR7dXNlcklkfWAsIHBheWxvYWQpXG4gIH1cblxuICAvKipcbiAgICogTW9kaWZpZXMgdGhlIG5pY2tuYW1lIG9mIHRoZSBjdXJyZW50IHVzZXIgaW4gYSBndWlsZC4gUmV0dXJucyBhIDIwMCB3aXRoIHRoZSBuaWNrbmFtZSBvbiBzdWNjZXNzLiBGaXJlcyBhIFtHdWlsZCBNZW1iZXIgVXBkYXRlXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9ndWlsZC1tZW1iZXItdXBkYXRlKSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgbW9kaWZ5Q3VycmVudFVzZXJOaWNrKFxuICAgIGd1aWxkSWQ6IHN0cmluZyxcbiAgICBwYXlsb2FkOiB7IG5pY2s/OiBzdHJpbmcgfCBudWxsIH1cbiAgKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LnBhdGNoKGAvZ3VpbGRzLyR7Z3VpbGRJZH0vbWVtYmVycy9AbWUvbmlja2AsIHBheWxvYWQpXG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIHJvbGUgdG8gYSBbZ3VpbGQgbWVtYmVyXSgjRE9DU19SRVNPVVJDRVNfR1VJTEQvZ3VpbGQtbWVtYmVyLW9iamVjdCkuIFJlcXVpcmVzIHRoZSBgTUFOQUdFX1JPTEVTYCBwZXJtaXNzaW9uLiBSZXR1cm5zIGEgMjA0IGVtcHR5IHJlc3BvbnNlIG9uIHN1Y2Nlc3MuIEZpcmVzIGEgW0d1aWxkIE1lbWJlciBVcGRhdGVdKCNET0NTX1RPUElDU19HQVRFV0FZL2d1aWxkLW1lbWJlci11cGRhdGUpIEdhdGV3YXkgZXZlbnQuXG4gICAqL1xuICBhc3luYyBhZGRHdWlsZE1lbWJlclJvbGUoXG4gICAgZ3VpbGRJZDogc3RyaW5nLFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIHJvbGVJZDogc3RyaW5nXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucHV0KGAvZ3VpbGRzLyR7Z3VpbGRJZH0vbWVtYmVycy8ke3VzZXJJZH0vcm9sZXMvJHtyb2xlSWR9YClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgcm9sZSBmcm9tIGEgW2d1aWxkIG1lbWJlcl0oI0RPQ1NfUkVTT1VSQ0VTX0dVSUxEL2d1aWxkLW1lbWJlci1vYmplY3QpLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9ST0xFU2AgcGVybWlzc2lvbi4gUmV0dXJucyBhIDIwNCBlbXB0eSByZXNwb25zZSBvbiBzdWNjZXNzLiBGaXJlcyBhIFtHdWlsZCBNZW1iZXIgVXBkYXRlXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9ndWlsZC1tZW1iZXItdXBkYXRlKSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgcmVtb3ZlR3VpbGRNZW1iZXJSb2xlKFxuICAgIGd1aWxkSWQ6IHN0cmluZyxcbiAgICB1c2VySWQ6IHN0cmluZyxcbiAgICByb2xlSWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShcbiAgICAgIGAvZ3VpbGRzLyR7Z3VpbGRJZH0vbWVtYmVycy8ke3VzZXJJZH0vcm9sZXMvJHtyb2xlSWR9YFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBtZW1iZXIgZnJvbSBhIGd1aWxkLiBSZXF1aXJlcyBgS0lDS19NRU1CRVJTYCBwZXJtaXNzaW9uLiBSZXR1cm5zIGEgMjA0IGVtcHR5IHJlc3BvbnNlIG9uIHN1Y2Nlc3MuIEZpcmVzIGEgW0d1aWxkIE1lbWJlciBSZW1vdmVdKCNET0NTX1RPUElDU19HQVRFV0FZL2d1aWxkLW1lbWJlci1yZW1vdmUpIEdhdGV3YXkgZXZlbnQuXG4gICAqL1xuICBhc3luYyByZW1vdmVHdWlsZE1lbWJlcihndWlsZElkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5kZWxldGUoYC9ndWlsZHMvJHtndWlsZElkfS9tZW1iZXJzLyR7dXNlcklkfWApXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgW2Jhbl0oI0RPQ1NfUkVTT1VSQ0VTX0dVSUxEL2Jhbi1vYmplY3QpIG9iamVjdHMgZm9yIHRoZSB1c2VycyBiYW5uZWQgZnJvbSB0aGlzIGd1aWxkLiBSZXF1aXJlcyB0aGUgYEJBTl9NRU1CRVJTYCBwZXJtaXNzaW9uLlxuICAgKi9cbiAgYXN5bmMgZ2V0R3VpbGRCYW5zKGd1aWxkSWQ6IHN0cmluZyk6IFByb21pc2U8R3VpbGRCYW5QYXlsb2FkW10+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL2d1aWxkcy8ke2d1aWxkSWR9L2JhbnNgKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBbYmFuXSgjRE9DU19SRVNPVVJDRVNfR1VJTEQvYmFuLW9iamVjdCkgb2JqZWN0IGZvciB0aGUgZ2l2ZW4gdXNlciBvciBhIDQwNCBub3QgZm91bmQgaWYgdGhlIGJhbiBjYW5ub3QgYmUgZm91bmQuIFJlcXVpcmVzIHRoZSBgQkFOX01FTUJFUlNgIHBlcm1pc3Npb24uXG4gICAqL1xuICBhc3luYyBnZXRHdWlsZEJhbihndWlsZElkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxHdWlsZEJhblBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL2d1aWxkcy8ke2d1aWxkSWR9L2JhbnMvJHt1c2VySWR9YClcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBndWlsZCBiYW4sIGFuZCBvcHRpb25hbGx5IGRlbGV0ZSBwcmV2aW91cyBtZXNzYWdlcyBzZW50IGJ5IHRoZSBiYW5uZWQgdXNlci4gUmVxdWlyZXMgdGhlIGBCQU5fTUVNQkVSU2AgcGVybWlzc2lvbi4gUmV0dXJucyBhIDIwNCBlbXB0eSByZXNwb25zZSBvbiBzdWNjZXNzLiBGaXJlcyBhIFtHdWlsZCBCYW4gQWRkXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9ndWlsZC1iYW4tYWRkKSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgY3JlYXRlR3VpbGRCYW4oXG4gICAgZ3VpbGRJZDogc3RyaW5nLFxuICAgIHVzZXJJZDogc3RyaW5nLFxuICAgIHBheWxvYWQ6IEd1aWxkQmFuQWRkUGF5bG9hZFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LnB1dChgL2d1aWxkcy8ke2d1aWxkSWR9L2JhbnMvJHt1c2VySWR9YCwgcGF5bG9hZClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGJhbiBmb3IgYSB1c2VyLiBSZXF1aXJlcyB0aGUgYEJBTl9NRU1CRVJTYCBwZXJtaXNzaW9ucy4gUmV0dXJucyBhIDIwNCBlbXB0eSByZXNwb25zZSBvbiBzdWNjZXNzLiBGaXJlcyBhIFtHdWlsZCBCYW4gUmVtb3ZlXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9ndWlsZC1iYW4tcmVtb3ZlKSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgcmVtb3ZlR3VpbGRCYW4oZ3VpbGRJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZGVsZXRlKGAvZ3VpbGRzLyR7Z3VpbGRJZH0vYmFucy8ke3VzZXJJZH1gKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIFtyb2xlXSgjRE9DU19UT1BJQ1NfUEVSTUlTU0lPTlMvcm9sZS1vYmplY3QpIG9iamVjdHMgZm9yIHRoZSBndWlsZC5cbiAgICovXG4gIGFzeW5jIGdldEd1aWxkUm9sZXMoZ3VpbGRJZDogc3RyaW5nKTogUHJvbWlzZTxSb2xlUGF5bG9hZFtdPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC9ndWlsZHMvJHtndWlsZElkfS9yb2xlc2ApXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IFtyb2xlXSgjRE9DU19UT1BJQ1NfUEVSTUlTU0lPTlMvcm9sZS1vYmplY3QpIGZvciB0aGUgZ3VpbGQuIFJlcXVpcmVzIHRoZSBgTUFOQUdFX1JPTEVTYCBwZXJtaXNzaW9uLiBSZXR1cm5zIHRoZSBuZXcgW3JvbGVdKCNET0NTX1RPUElDU19QRVJNSVNTSU9OUy9yb2xlLW9iamVjdCkgb2JqZWN0IG9uIHN1Y2Nlc3MuIEZpcmVzIGEgW0d1aWxkIFJvbGUgQ3JlYXRlXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9ndWlsZC1yb2xlLWNyZWF0ZSkgR2F0ZXdheSBldmVudC4gQWxsIEpTT04gcGFyYW1zIGFyZSBvcHRpb25hbC5cbiAgICovXG4gIGFzeW5jIGNyZWF0ZUd1aWxkUm9sZShcbiAgICBndWlsZElkOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogR3VpbGRDcmVhdGVSb2xlUGF5bG9hZFxuICApOiBQcm9taXNlPFJvbGVQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wb3N0KGAvZ3VpbGRzLyR7Z3VpbGRJZH0vcm9sZXNgLCBwYXlsb2FkKVxuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmeSB0aGUgcG9zaXRpb25zIG9mIGEgc2V0IG9mIFtyb2xlXSgjRE9DU19UT1BJQ1NfUEVSTUlTU0lPTlMvcm9sZS1vYmplY3QpIG9iamVjdHMgZm9yIHRoZSBndWlsZC4gUmVxdWlyZXMgdGhlIGBNQU5BR0VfUk9MRVNgIHBlcm1pc3Npb24uIFJldHVybnMgYSBsaXN0IG9mIGFsbCBvZiB0aGUgZ3VpbGQncyBbcm9sZV0oI0RPQ1NfVE9QSUNTX1BFUk1JU1NJT05TL3JvbGUtb2JqZWN0KSBvYmplY3RzIG9uIHN1Y2Nlc3MuIEZpcmVzIG11bHRpcGxlIFtHdWlsZCBSb2xlIFVwZGF0ZV0oI0RPQ1NfVE9QSUNTX0dBVEVXQVkvZ3VpbGQtcm9sZS11cGRhdGUpIEdhdGV3YXkgZXZlbnRzLlxuICAgKiBUaGlzIGVuZHBvaW50IHRha2VzIGEgSlNPTiBhcnJheSBvZiBwYXJhbWV0ZXJzIGluIHRoZSBmb2xsb3dpbmcgZm9ybWF0OlxuICAgKi9cbiAgYXN5bmMgbW9kaWZ5R3VpbGRSb2xlUG9zaXRpb25zKFxuICAgIGd1aWxkSWQ6IHN0cmluZyxcbiAgICBwYXlsb2FkOiBBcnJheTx7IGlkOiBzdHJpbmc7IHBvc2l0aW9uOiBudW1iZXIgfT5cbiAgKTogUHJvbWlzZTxSb2xlUGF5bG9hZFtdPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wYXRjaChgL2d1aWxkcy8ke2d1aWxkSWR9L3JvbGVzYCwgcGF5bG9hZClcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZnkgYSBndWlsZCByb2xlLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9ST0xFU2AgcGVybWlzc2lvbi4gUmV0dXJucyB0aGUgdXBkYXRlZCBbcm9sZV0oI0RPQ1NfVE9QSUNTX1BFUk1JU1NJT05TL3JvbGUtb2JqZWN0KSBvbiBzdWNjZXNzLiBGaXJlcyBhIFtHdWlsZCBSb2xlIFVwZGF0ZV0oI0RPQ1NfVE9QSUNTX0dBVEVXQVkvZ3VpbGQtcm9sZS11cGRhdGUpIEdhdGV3YXkgZXZlbnQuXG4gICAqL1xuICBhc3luYyBtb2RpZnlHdWlsZFJvbGUoXG4gICAgZ3VpbGRJZDogc3RyaW5nLFxuICAgIHJvbGVJZDogc3RyaW5nLFxuICAgIHBheWxvYWQ6IFJvbGVNb2RpZnlQYXlsb2FkXG4gICk6IFByb21pc2U8Um9sZVBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LnBhdGNoKGAvZ3VpbGRzLyR7Z3VpbGRJZH0vcm9sZXMvJHtyb2xlSWR9YCwgcGF5bG9hZClcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBndWlsZCByb2xlLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9ST0xFU2AgcGVybWlzc2lvbi4gUmV0dXJucyBhIDIwNCBlbXB0eSByZXNwb25zZSBvbiBzdWNjZXNzLiBGaXJlcyBhIFtHdWlsZCBSb2xlIERlbGV0ZV0oI0RPQ1NfVE9QSUNTX0dBVEVXQVkvZ3VpbGQtcm9sZS1kZWxldGUpIEdhdGV3YXkgZXZlbnQuXG4gICAqL1xuICBhc3luYyBkZWxldGVHdWlsZFJvbGUoZ3VpbGRJZDogc3RyaW5nLCByb2xlSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZGVsZXRlKGAvZ3VpbGRzLyR7Z3VpbGRJZH0vcm9sZXMvJHtyb2xlSWR9YClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIG9uZSAncHJ1bmVkJyBrZXkgaW5kaWNhdGluZyB0aGUgbnVtYmVyIG9mIG1lbWJlcnMgdGhhdCB3b3VsZCBiZSByZW1vdmVkIGluIGEgcHJ1bmUgb3BlcmF0aW9uLiBSZXF1aXJlcyB0aGUgYEtJQ0tfTUVNQkVSU2AgcGVybWlzc2lvbi5cbiAgICogQnkgZGVmYXVsdCwgcHJ1bmUgd2lsbCBub3QgcmVtb3ZlIHVzZXJzIHdpdGggcm9sZXMuIFlvdSBjYW4gb3B0aW9uYWxseSBpbmNsdWRlIHNwZWNpZmljIHJvbGVzIGluIHlvdXIgcHJ1bmUgYnkgcHJvdmlkaW5nIHRoZSBgaW5jbHVkZV9yb2xlc2AgcGFyYW1ldGVyLiBBbnkgaW5hY3RpdmUgdXNlciB0aGF0IGhhcyBhIHN1YnNldCBvZiB0aGUgcHJvdmlkZWQgcm9sZShzKSB3aWxsIGJlIGNvdW50ZWQgaW4gdGhlIHBydW5lIGFuZCB1c2VycyB3aXRoIGFkZGl0aW9uYWwgcm9sZXMgd2lsbCBub3QuXG4gICAqL1xuICBhc3luYyBnZXRHdWlsZFBydW5lQ291bnQoZ3VpbGRJZDogc3RyaW5nKTogUHJvbWlzZTxHdWlsZFBydW5lQ291bnRQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC9ndWlsZHMvJHtndWlsZElkfS9wcnVuZWApXG4gIH1cblxuICAvKipcbiAgICogQmVnaW4gYSBwcnVuZSBvcGVyYXRpb24uIFJlcXVpcmVzIHRoZSBgS0lDS19NRU1CRVJTYCBwZXJtaXNzaW9uLiBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIG9uZSAncHJ1bmVkJyBrZXkgaW5kaWNhdGluZyB0aGUgbnVtYmVyIG9mIG1lbWJlcnMgdGhhdCB3ZXJlIHJlbW92ZWQgaW4gdGhlIHBydW5lIG9wZXJhdGlvbi4gRm9yIGxhcmdlIGd1aWxkcyBpdCdzIHJlY29tbWVuZGVkIHRvIHNldCB0aGUgYGNvbXB1dGVfcHJ1bmVfY291bnRgIG9wdGlvbiB0byBgZmFsc2VgLCBmb3JjaW5nICdwcnVuZWQnIHRvIGBudWxsYC4gRmlyZXMgbXVsdGlwbGUgW0d1aWxkIE1lbWJlciBSZW1vdmVdKCNET0NTX1RPUElDU19HQVRFV0FZL2d1aWxkLW1lbWJlci1yZW1vdmUpIEdhdGV3YXkgZXZlbnRzLlxuICAgKiBCeSBkZWZhdWx0LCBwcnVuZSB3aWxsIG5vdCByZW1vdmUgdXNlcnMgd2l0aCByb2xlcy4gWW91IGNhbiBvcHRpb25hbGx5IGluY2x1ZGUgc3BlY2lmaWMgcm9sZXMgaW4geW91ciBwcnVuZSBieSBwcm92aWRpbmcgdGhlIGBpbmNsdWRlX3JvbGVzYCBwYXJhbWV0ZXIuIEFueSBpbmFjdGl2ZSB1c2VyIHRoYXQgaGFzIGEgc3Vic2V0IG9mIHRoZSBwcm92aWRlZCByb2xlKHMpIHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIHBydW5lIGFuZCB1c2VycyB3aXRoIGFkZGl0aW9uYWwgcm9sZXMgd2lsbCBub3QuXG4gICAqL1xuICBhc3luYyBiZWdpbkd1aWxkUHJ1bmUoXG4gICAgZ3VpbGRJZDogc3RyaW5nLFxuICAgIHBheWxvYWQ6IEd1aWxkQmVnaW5QcnVuZVBheWxvYWRcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wb3N0KGAvZ3VpbGRzLyR7Z3VpbGRJZH0vcHJ1bmVgLCBwYXlsb2FkKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIFt2b2ljZSByZWdpb25dKCNET0NTX1JFU09VUkNFU19WT0lDRS92b2ljZS1yZWdpb24tb2JqZWN0KSBvYmplY3RzIGZvciB0aGUgZ3VpbGQuIFVubGlrZSB0aGUgc2ltaWxhciBgL3ZvaWNlYCByb3V0ZSwgdGhpcyByZXR1cm5zIFZJUCBzZXJ2ZXJzIHdoZW4gdGhlIGd1aWxkIGlzIFZJUC1lbmFibGVkLlxuICAgKi9cbiAgYXN5bmMgZ2V0R3VpbGRWb2ljZVJlZ2lvbnMoZ3VpbGRJZDogc3RyaW5nKTogUHJvbWlzZTxWb2ljZVJlZ2lvbltdPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC9ndWlsZHMvJHtndWlsZElkfS9yZWdpb25zYClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBbaW52aXRlXSgjRE9DU19SRVNPVVJDRVNfSU5WSVRFL2ludml0ZS1vYmplY3QpIG9iamVjdHMgKHdpdGggW2ludml0ZSBtZXRhZGF0YV0oI0RPQ1NfUkVTT1VSQ0VTX0lOVklURS9pbnZpdGUtbWV0YWRhdGEtb2JqZWN0KSkgZm9yIHRoZSBndWlsZC4gUmVxdWlyZXMgdGhlIGBNQU5BR0VfR1VJTERgIHBlcm1pc3Npb24uXG4gICAqL1xuICBhc3luYyBnZXRHdWlsZEludml0ZXMoZ3VpbGRJZDogc3RyaW5nKTogUHJvbWlzZTxJbnZpdGVXaXRoTWV0YWRhdGFQYXlsb2FkW10+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL2d1aWxkcy8ke2d1aWxkSWR9L2ludml0ZXNgKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIFtpbnRlZ3JhdGlvbl0oI0RPQ1NfUkVTT1VSQ0VTX0dVSUxEL2ludGVncmF0aW9uLW9iamVjdCkgb2JqZWN0cyBmb3IgdGhlIGd1aWxkLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9HVUlMRGAgcGVybWlzc2lvbi5cbiAgICovXG4gIGFzeW5jIGdldEd1aWxkSW50ZWdyYXRpb25zKFxuICAgIGd1aWxkSWQ6IHN0cmluZ1xuICApOiBQcm9taXNlPEd1aWxkSW50ZWdyYXRpb25QYXlsb2FkW10+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL2d1aWxkcy8ke2d1aWxkSWR9L2ludGVncmF0aW9uc2ApXG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIHRoZSBhdHRhY2hlZCBbaW50ZWdyYXRpb25dKCNET0NTX1JFU09VUkNFU19HVUlMRC9pbnRlZ3JhdGlvbi1vYmplY3QpIG9iamVjdCBmb3IgdGhlIGd1aWxkLiBEZWxldGVzIGFueSBhc3NvY2lhdGVkIHdlYmhvb2tzIGFuZCBraWNrcyB0aGUgYXNzb2NpYXRlZCBib3QgaWYgdGhlcmUgaXMgb25lLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9HVUlMRGAgcGVybWlzc2lvbi4gUmV0dXJucyBhIDIwNCBlbXB0eSByZXNwb25zZSBvbiBzdWNjZXNzLiBGaXJlcyBhIFtHdWlsZCBJbnRlZ3JhdGlvbnMgVXBkYXRlXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9ndWlsZC1pbnRlZ3JhdGlvbnMtdXBkYXRlKSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgZGVsZXRlR3VpbGRJbnRlZ3JhdGlvbihcbiAgICBndWlsZElkOiBzdHJpbmcsXG4gICAgaW50ZWdyYXRpb25JZDogc3RyaW5nXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZGVsZXRlKGAvZ3VpbGRzLyR7Z3VpbGRJZH0vaW50ZWdyYXRpb25zLyR7aW50ZWdyYXRpb25JZH1gKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBbZ3VpbGQgd2lkZ2V0XSgjRE9DU19SRVNPVVJDRVNfR1VJTEQvZ3VpbGQtd2lkZ2V0LW9iamVjdCkgb2JqZWN0LiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9HVUlMRGAgcGVybWlzc2lvbi5cbiAgICovXG4gIGFzeW5jIGdldEd1aWxkV2lkZ2V0U2V0dGluZ3MoZ3VpbGRJZDogc3RyaW5nKTogUHJvbWlzZTxHdWlsZFdpZGdldFBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL2d1aWxkcy8ke2d1aWxkSWR9L3dpZGdldGApXG4gIH1cblxuICAvKipcbiAgICogTW9kaWZ5IGEgW2d1aWxkIHdpZGdldF0oI0RPQ1NfUkVTT1VSQ0VTX0dVSUxEL2d1aWxkLXdpZGdldC1vYmplY3QpIG9iamVjdCBmb3IgdGhlIGd1aWxkLiBBbGwgYXR0cmlidXRlcyBtYXkgYmUgcGFzc2VkIGluIHdpdGggSlNPTiBhbmQgbW9kaWZpZWQuIFJlcXVpcmVzIHRoZSBgTUFOQUdFX0dVSUxEYCBwZXJtaXNzaW9uLiBSZXR1cm5zIHRoZSB1cGRhdGVkIFtndWlsZCB3aWRnZXRdKCNET0NTX1JFU09VUkNFU19HVUlMRC9ndWlsZC13aWRnZXQtb2JqZWN0KSBvYmplY3QuXG4gICAqL1xuICBhc3luYyBtb2RpZnlHdWlsZFdpZGdldChcbiAgICBndWlsZElkOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogUGFydGlhbDxHdWlsZFdpZGdldFBheWxvYWQ+XG4gICk6IFByb21pc2U8R3VpbGRXaWRnZXRQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wYXRjaChgL2d1aWxkcy8ke2d1aWxkSWR9L3dpZGdldGAsIHBheWxvYWQpXG4gIH1cblxuICAvLyBJdCdzIHR5cGUgaXMgbm90IHNwZWNpZmllZCBpbiBkb2NzLCBzbyBJJ2xsIHVzZSBhbnkuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB3aWRnZXQgZm9yIHRoZSBndWlsZC5cbiAgICovXG4gIGFzeW5jIGdldEd1aWxkV2lkZ2V0KGd1aWxkSWQ6IHN0cmluZyk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC9ndWlsZHMvJHtndWlsZElkfS93aWRnZXQuanNvbmApXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHBhcnRpYWwgW2ludml0ZV0oI0RPQ1NfUkVTT1VSQ0VTX0lOVklURS9pbnZpdGUtb2JqZWN0KSBvYmplY3QgZm9yIGd1aWxkcyB3aXRoIHRoYXQgZmVhdHVyZSBlbmFibGVkLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9HVUlMRGAgcGVybWlzc2lvbi4gYGNvZGVgIHdpbGwgYmUgbnVsbCBpZiBhIHZhbml0eSB1cmwgZm9yIHRoZSBndWlsZCBpcyBub3Qgc2V0LlxuICAgKi9cbiAgYXN5bmMgZ2V0R3VpbGRWYW5pdHlVUkwoXG4gICAgZ3VpbGRJZDogc3RyaW5nXG4gICk6IFByb21pc2U8UGFydGlhbDxJbnZpdGVXaXRoTWV0YWRhdGFQYXlsb2FkPj4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvZ3VpbGRzLyR7Z3VpbGRJZH0vdmFuaXR5LXVybGApXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIFBORyBpbWFnZSB3aWRnZXQgZm9yIHRoZSBndWlsZC4gUmVxdWlyZXMgbm8gcGVybWlzc2lvbnMgb3IgYXV0aGVudGljYXRpb24uXG4gICAqL1xuICBnZXRHdWlsZFdpZGdldEltYWdlKGd1aWxkSWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAvZ3VpbGRzLyR7Z3VpbGRJZH0vd2lkZ2V0LnBuZ2BcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIFtpbnZpdGVdKCNET0NTX1JFU09VUkNFU19JTlZJVEUvaW52aXRlLW9iamVjdCkgb2JqZWN0IGZvciB0aGUgZ2l2ZW4gY29kZS5cbiAgICovXG4gIGFzeW5jIGdldEludml0ZShpbnZpdGVDb2RlOiBzdHJpbmcpOiBQcm9taXNlPEludml0ZVBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL2ludml0ZXMvJHtpbnZpdGVDb2RlfWApXG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGFuIGludml0ZS4gUmVxdWlyZXMgdGhlIGBNQU5BR0VfQ0hBTk5FTFNgIHBlcm1pc3Npb24gb24gdGhlIGNoYW5uZWwgdGhpcyBpbnZpdGUgYmVsb25ncyB0bywgb3IgYE1BTkFHRV9HVUlMRGAgdG8gcmVtb3ZlIGFueSBpbnZpdGUgYWNyb3NzIHRoZSBndWlsZC4gUmV0dXJucyBhbiBbaW52aXRlXSgjRE9DU19SRVNPVVJDRVNfSU5WSVRFL2ludml0ZS1vYmplY3QpIG9iamVjdCBvbiBzdWNjZXNzLiBGaXJlcyBhIFtJbnZpdGUgRGVsZXRlXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9pbnZpdGUtZGVsZXRlKSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgZGVsZXRlSW52aXRlKGludml0ZUNvZGU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZGVsZXRlKGAvaW52aXRlcy8ke2ludml0ZUNvZGV9YClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgW3RlbXBsYXRlXSgjRE9DU19SRVNPVVJDRVNfVEVNUExBVEUvdGVtcGxhdGUtb2JqZWN0KSBvYmplY3QgZm9yIHRoZSBnaXZlbiBjb2RlLlxuICAgKi9cbiAgYXN5bmMgZ2V0VGVtcGxhdGUodGVtcGxhdGVDb2RlOiBzdHJpbmcpOiBQcm9taXNlPFRlbXBsYXRlUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvZ3VpbGRzL3RlbXBsYXRlcy8ke3RlbXBsYXRlQ29kZX1gKVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBndWlsZCBiYXNlZCBvbiBhIHRlbXBsYXRlLiBSZXR1cm5zIGEgW2d1aWxkXSgjRE9DU19SRVNPVVJDRVNfR1VJTEQvZ3VpbGQtb2JqZWN0KSBvYmplY3Qgb24gc3VjY2Vzcy4gRmlyZXMgYSBbR3VpbGQgQ3JlYXRlXSgjRE9DU19UT1BJQ1NfR0FURVdBWS9ndWlsZC1jcmVhdGUpIEdhdGV3YXkgZXZlbnQuXG4gICAqL1xuICBhc3luYyBjcmVhdGVHdWlsZEZyb21UZW1wbGF0ZShcbiAgICB0ZW1wbGF0ZUNvZGU6IHN0cmluZyxcbiAgICBwYXlsb2FkOiBQYXJ0aWFsPEd1aWxkUGF5bG9hZD5cbiAgKTogUHJvbWlzZTxHdWlsZFBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LnBvc3QoYC9ndWlsZHMvdGVtcGxhdGVzLyR7dGVtcGxhdGVDb2RlfWAsIHBheWxvYWQpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBhcnJheSBvZiBbdGVtcGxhdGVdKCNET0NTX1JFU09VUkNFU19URU1QTEFURS90ZW1wbGF0ZS1vYmplY3QpIG9iamVjdHMuIFJlcXVpcmVzIHRoZSBgTUFOQUdFX0dVSUxEYCBwZXJtaXNzaW9uLlxuICAgKi9cbiAgYXN5bmMgZ2V0R3VpbGRUZW1wbGF0ZXMoZ3VpbGRJZDogc3RyaW5nKTogUHJvbWlzZTxUZW1wbGF0ZVBheWxvYWRbXT4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvZ3VpbGRzLyR7Z3VpbGRJZH0vdGVtcGxhdGVzYClcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgdGVtcGxhdGUgZm9yIHRoZSBndWlsZC4gUmVxdWlyZXMgdGhlIGBNQU5BR0VfR1VJTERgIHBlcm1pc3Npb24uIFJldHVybnMgdGhlIGNyZWF0ZWQgW3RlbXBsYXRlXSgjRE9DU19SRVNPVVJDRVNfVEVNUExBVEUvdGVtcGxhdGUtb2JqZWN0KSBvYmplY3Qgb24gc3VjY2Vzcy5cbiAgICovXG4gIGFzeW5jIGNyZWF0ZUd1aWxkVGVtcGxhdGUoXG4gICAgZ3VpbGRJZDogc3RyaW5nLFxuICAgIHBheWxvYWQ6IHsgbmFtZTogc3RyaW5nOyBkZXNjcmlwdGlvbj86IHN0cmluZyB8IG51bGwgfVxuICApOiBQcm9taXNlPFRlbXBsYXRlUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucG9zdChgL2d1aWxkcy8ke2d1aWxkSWR9L3RlbXBsYXRlc2AsIHBheWxvYWQpXG4gIH1cblxuICAvKipcbiAgICogU3luY3MgdGhlIHRlbXBsYXRlIHRvIHRoZSBndWlsZCdzIGN1cnJlbnQgc3RhdGUuIFJlcXVpcmVzIHRoZSBgTUFOQUdFX0dVSUxEYCBwZXJtaXNzaW9uLiBSZXR1cm5zIHRoZSBbdGVtcGxhdGVdKCNET0NTX1JFU09VUkNFU19URU1QTEFURS90ZW1wbGF0ZS1vYmplY3QpIG9iamVjdCBvbiBzdWNjZXNzLlxuICAgKi9cbiAgYXN5bmMgc3luY0d1aWxkVGVtcGxhdGUoXG4gICAgZ3VpbGRJZDogc3RyaW5nLFxuICAgIHRlbXBsYXRlQ29kZTogc3RyaW5nXG4gICk6IFByb21pc2U8VGVtcGxhdGVQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wdXQoYC9ndWlsZHMvJHtndWlsZElkfS90ZW1wbGF0ZXMvJHt0ZW1wbGF0ZUNvZGV9YClcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZmllcyB0aGUgdGVtcGxhdGUncyBtZXRhZGF0YS4gUmVxdWlyZXMgdGhlIGBNQU5BR0VfR1VJTERgIHBlcm1pc3Npb24uIFJldHVybnMgdGhlIFt0ZW1wbGF0ZV0oI0RPQ1NfUkVTT1VSQ0VTX1RFTVBMQVRFL3RlbXBsYXRlLW9iamVjdCkgb2JqZWN0IG9uIHN1Y2Nlc3MuXG4gICAqL1xuICBhc3luYyBtb2RpZnlHdWlsZFRlbXBsYXRlKFxuICAgIGd1aWxkSWQ6IHN0cmluZyxcbiAgICB0ZW1wbGF0ZUNvZGU6IHN0cmluZyxcbiAgICBwYXlsb2FkOiBQYXJ0aWFsPFRlbXBsYXRlUGF5bG9hZD5cbiAgKTogUHJvbWlzZTxUZW1wbGF0ZVBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LnBhdGNoKFxuICAgICAgYC9ndWlsZHMvJHtndWlsZElkfS90ZW1wbGF0ZXMvJHt0ZW1wbGF0ZUNvZGV9YCxcbiAgICAgIHBheWxvYWRcbiAgICApXG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlcyB0aGUgdGVtcGxhdGUuIFJlcXVpcmVzIHRoZSBgTUFOQUdFX0dVSUxEYCBwZXJtaXNzaW9uLiBSZXR1cm5zIHRoZSBkZWxldGVkIFt0ZW1wbGF0ZV0oI0RPQ1NfUkVTT1VSQ0VTX1RFTVBMQVRFL3RlbXBsYXRlLW9iamVjdCkgb2JqZWN0IG9uIHN1Y2Nlc3MuXG4gICAqL1xuICBhc3luYyBkZWxldGVHdWlsZFRlbXBsYXRlKFxuICAgIGd1aWxkSWQ6IHN0cmluZyxcbiAgICB0ZW1wbGF0ZUNvZGU6IHN0cmluZ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShgL2d1aWxkcy8ke2d1aWxkSWR9L3RlbXBsYXRlcy8ke3RlbXBsYXRlQ29kZX1gKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIFt1c2VyXSgjRE9DU19SRVNPVVJDRVNfVVNFUi91c2VyLW9iamVjdCkgb2JqZWN0IG9mIHRoZSByZXF1ZXN0ZXIncyBhY2NvdW50LiBGb3IgT0F1dGgyLCB0aGlzIHJlcXVpcmVzIHRoZSBgaWRlbnRpZnlgIHNjb3BlLCB3aGljaCB3aWxsIHJldHVybiB0aGUgb2JqZWN0IF93aXRob3V0XyBhbiBlbWFpbCwgYW5kIG9wdGlvbmFsbHkgdGhlIGBlbWFpbGAgc2NvcGUsIHdoaWNoIHJldHVybnMgdGhlIG9iamVjdCBfd2l0aF8gYW4gZW1haWwuXG4gICAqL1xuICBhc3luYyBnZXRDdXJyZW50VXNlcigpOiBQcm9taXNlPFVzZXJQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC91c2Vycy9AbWVgKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBbdXNlcl0oI0RPQ1NfUkVTT1VSQ0VTX1VTRVIvdXNlci1vYmplY3QpIG9iamVjdCBmb3IgYSBnaXZlbiB1c2VyIElELlxuICAgKi9cbiAgYXN5bmMgZ2V0VXNlcih1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8VXNlclBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL3VzZXJzLyR7dXNlcklkfWApXG4gIH1cblxuICAvKipcbiAgICogTW9kaWZ5IHRoZSByZXF1ZXN0ZXIncyB1c2VyIGFjY291bnQgc2V0dGluZ3MuIFJldHVybnMgYSBbdXNlcl0oI0RPQ1NfUkVTT1VSQ0VTX1VTRVIvdXNlci1vYmplY3QpIG9iamVjdCBvbiBzdWNjZXNzLlxuICAgKi9cbiAgYXN5bmMgbW9kaWZ5Q3VycmVudFVzZXIocGF5bG9hZDoge1xuICAgIHVzZXJuYW1lPzogc3RyaW5nXG4gICAgYXZhdGFyPzogc3RyaW5nIHwgbnVsbFxuICB9KTogUHJvbWlzZTxVc2VyUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucGF0Y2goYC91c2Vycy9AbWVgLCBwYXlsb2FkKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBsaXN0IG9mIHBhcnRpYWwgW2d1aWxkXSgjRE9DU19SRVNPVVJDRVNfR1VJTEQvZ3VpbGQtb2JqZWN0KSBvYmplY3RzIHRoZSBjdXJyZW50IHVzZXIgaXMgYSBtZW1iZXIgb2YuIFJlcXVpcmVzIHRoZSBgZ3VpbGRzYCBPQXV0aDIgc2NvcGUuXG4gICAqL1xuICBhc3luYyBnZXRDdXJyZW50VXNlckd1aWxkcygpOiBQcm9taXNlPFBhcnRpYWw8R3VpbGRQYXlsb2FkPj4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvdXNlcnMvQG1lL2d1aWxkc2ApXG4gIH1cblxuICAvKipcbiAgICogTGVhdmUgYSBndWlsZC4gUmV0dXJucyBhIDIwNCBlbXB0eSByZXNwb25zZSBvbiBzdWNjZXNzLlxuICAgKi9cbiAgYXN5bmMgbGVhdmVHdWlsZChndWlsZElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShgL3VzZXJzL0BtZS9ndWlsZHMvJHtndWlsZElkfWApXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgW0RNIGNoYW5uZWxdKCNET0NTX1JFU09VUkNFU19DSEFOTkVML2NoYW5uZWwtb2JqZWN0KSBvYmplY3RzLiBGb3IgYm90cywgdGhpcyBpcyBubyBsb25nZXIgYSBzdXBwb3J0ZWQgbWV0aG9kIG9mIGdldHRpbmcgcmVjZW50IERNcywgYW5kIHdpbGwgcmV0dXJuIGFuIGVtcHR5IGFycmF5LlxuICAgKi9cbiAgYXN5bmMgZ2V0VXNlckRNcygpOiBQcm9taXNlPENoYW5uZWxQYXlsb2FkW10+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL3VzZXJzL0BtZS9jaGFubmVsc2ApXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IERNIGNoYW5uZWwgd2l0aCBhIHVzZXIuIFJldHVybnMgYSBbRE0gY2hhbm5lbF0oI0RPQ1NfUkVTT1VSQ0VTX0NIQU5ORUwvY2hhbm5lbC1vYmplY3QpIG9iamVjdC5cbiAgICovXG4gIGFzeW5jIGNyZWF0ZURNKHBheWxvYWQ6IHsgcmVjaXBpZW50X2lkOiBzdHJpbmcgfSk6IFByb21pc2U8Q2hhbm5lbFBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LnBvc3QoYC91c2Vycy9AbWUvY2hhbm5lbHNgLCBwYXlsb2FkKVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBncm91cCBETSBjaGFubmVsIHdpdGggbXVsdGlwbGUgdXNlcnMuIFJldHVybnMgYSBbRE0gY2hhbm5lbF0oI0RPQ1NfUkVTT1VSQ0VTX0NIQU5ORUwvY2hhbm5lbC1vYmplY3QpIG9iamVjdC4gVGhpcyBlbmRwb2ludCB3YXMgaW50ZW5kZWQgdG8gYmUgdXNlZCB3aXRoIHRoZSBub3ctZGVwcmVjYXRlZCBHYW1lQnJpZGdlIFNESy4gRE1zIGNyZWF0ZWQgd2l0aCB0aGlzIGVuZHBvaW50IHdpbGwgbm90IGJlIHNob3duIGluIHRoZSBEaXNjb3JkIGNsaWVudFxuICAgKi9cbiAgYXN5bmMgY3JlYXRlR3JvdXBETShwYXlsb2FkOiB7XG4gICAgYWNjZXNzX3Rva2Vuczogc3RyaW5nW11cbiAgICBuaWNrczogRGljdDxzdHJpbmc+XG4gIH0pOiBQcm9taXNlPENoYW5uZWxQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wb3N0KGAvdXNlcnMvQG1lL2NoYW5uZWxzYCwgcGF5bG9hZClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBbY29ubmVjdGlvbl0oI0RPQ1NfUkVTT1VSQ0VTX1VTRVIvY29ubmVjdGlvbi1vYmplY3QpIG9iamVjdHMuIFJlcXVpcmVzIHRoZSBgY29ubmVjdGlvbnNgIE9BdXRoMiBzY29wZS5cbiAgICovXG4gIGFzeW5jIGdldFVzZXJDb25uZWN0aW9ucygpOiBQcm9taXNlPHVua25vd25bXT4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvdXNlcnMvQG1lL2Nvbm5lY3Rpb25zYClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIFt2b2ljZSByZWdpb25dKCNET0NTX1JFU09VUkNFU19WT0lDRS92b2ljZS1yZWdpb24tb2JqZWN0KSBvYmplY3RzIHRoYXQgY2FuIGJlIHVzZWQgd2hlbiBjcmVhdGluZyBzZXJ2ZXJzLlxuICAgKi9cbiAgYXN5bmMgbGlzdFZvaWNlUmVnaW9ucygpOiBQcm9taXNlPFZvaWNlUmVnaW9uW10+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL3ZvaWNlL3JlZ2lvbnNgKVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyB3ZWJob29rLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9XRUJIT09LU2AgcGVybWlzc2lvbi4gUmV0dXJucyBhIFt3ZWJob29rXSgjRE9DU19SRVNPVVJDRVNfV0VCSE9PSy93ZWJob29rLW9iamVjdCkgb2JqZWN0IG9uIHN1Y2Nlc3MuIFdlYmhvb2sgbmFtZXMgZm9sbG93IG91ciBuYW1pbmcgcmVzdHJpY3Rpb25zIHRoYXQgY2FuIGJlIGZvdW5kIGluIG91ciBbVXNlcm5hbWVzIGFuZCBOaWNrbmFtZXNdKCNET0NTX1JFU09VUkNFU19VU0VSL3VzZXJuYW1lcy1hbmQtbmlja25hbWVzKSBkb2N1bWVudGF0aW9uLCB3aXRoIHRoZSBmb2xsb3dpbmcgYWRkaXRpb25hbCBzdGlwdWxhdGlvbnM6XG4gICAqIC0gV2ViaG9vayBuYW1lcyBjYW5ub3QgYmU6ICdjbHlkZSdcbiAgICovXG4gIGFzeW5jIGNyZWF0ZVdlYmhvb2soXG4gICAgY2hhbm5lbElkOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogeyBuYW1lPzogc3RyaW5nOyBhdmF0YXI/OiBzdHJpbmcgfVxuICApOiBQcm9taXNlPFdlYmhvb2tQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wb3N0KGAvY2hhbm5lbHMvJHtjaGFubmVsSWR9L3dlYmhvb2tzYCwgcGF5bG9hZClcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBjaGFubmVsIFt3ZWJob29rXSgjRE9DU19SRVNPVVJDRVNfV0VCSE9PSy93ZWJob29rLW9iamVjdCkgb2JqZWN0cy4gUmVxdWlyZXMgdGhlIGBNQU5BR0VfV0VCSE9PS1NgIHBlcm1pc3Npb24uXG4gICAqL1xuICBhc3luYyBnZXRDaGFubmVsV2ViaG9va3MoY2hhbm5lbElkOiBzdHJpbmcpOiBQcm9taXNlPFdlYmhvb2tQYXlsb2FkW10+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS93ZWJob29rc2ApXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgZ3VpbGQgW3dlYmhvb2tdKCNET0NTX1JFU09VUkNFU19XRUJIT09LL3dlYmhvb2stb2JqZWN0KSBvYmplY3RzLiBSZXF1aXJlcyB0aGUgYE1BTkFHRV9XRUJIT09LU2AgcGVybWlzc2lvbi5cbiAgICovXG4gIGFzeW5jIGdldEd1aWxkV2ViaG9va3MoZ3VpbGRJZDogc3RyaW5nKTogUHJvbWlzZTxXZWJob29rUGF5bG9hZFtdPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC9ndWlsZHMvJHtndWlsZElkfS93ZWJob29rc2ApXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbmV3IFt3ZWJob29rXSgjRE9DU19SRVNPVVJDRVNfV0VCSE9PSy93ZWJob29rLW9iamVjdCkgb2JqZWN0IGZvciB0aGUgZ2l2ZW4gaWQuXG4gICAqL1xuICBhc3luYyBnZXRXZWJob29rKHdlYmhvb2tJZDogc3RyaW5nKTogUHJvbWlzZTxXZWJob29rUGF5bG9hZFtdPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC93ZWJob29rcy8ke3dlYmhvb2tJZH1gKVxuICB9XG5cbiAgLyoqXG4gICAqIFNhbWUgYXMgYWJvdmUsIGV4Y2VwdCB0aGlzIGNhbGwgZG9lcyBub3QgcmVxdWlyZSBhdXRoZW50aWNhdGlvbiBhbmQgcmV0dXJucyBubyB1c2VyIGluIHRoZSB3ZWJob29rIG9iamVjdC5cbiAgICovXG4gIGFzeW5jIGdldFdlYmhvb2tXaXRoVG9rZW4oXG4gICAgd2ViaG9va0lkOiBzdHJpbmcsXG4gICAgd2ViaG9va1Rva2VuOiBzdHJpbmdcbiAgKTogUHJvbWlzZTxXZWJob29rUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvd2ViaG9va3MvJHt3ZWJob29rSWR9LyR7d2ViaG9va1Rva2VufWApXG4gIH1cblxuICAvKipcbiAgICogTW9kaWZ5IGEgd2ViaG9vay4gUmVxdWlyZXMgdGhlIGBNQU5BR0VfV0VCSE9PS1NgIHBlcm1pc3Npb24uIFJldHVybnMgdGhlIHVwZGF0ZWQgW3dlYmhvb2tdKCNET0NTX1JFU09VUkNFU19XRUJIT09LL3dlYmhvb2stb2JqZWN0KSBvYmplY3Qgb24gc3VjY2Vzcy5cbiAgICovXG4gIGFzeW5jIG1vZGlmeVdlYmhvb2soXG4gICAgd2ViaG9va0lkOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogeyBuYW1lPzogc3RyaW5nOyBhdmF0YXI/OiBzdHJpbmcgfCBudWxsIH1cbiAgKTogUHJvbWlzZTxXZWJob29rUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucGF0Y2goYC93ZWJob29rcy8ke3dlYmhvb2tJZH1gLCBwYXlsb2FkKVxuICB9XG5cbiAgLyoqXG4gICAqIFNhbWUgYXMgYWJvdmUsIGV4Y2VwdCB0aGlzIGNhbGwgZG9lcyBub3QgcmVxdWlyZSBhdXRoZW50aWNhdGlvbiwgZG9lcyBub3QgYWNjZXB0IGEgYGNoYW5uZWxfaWRgIHBhcmFtZXRlciBpbiB0aGUgYm9keSwgYW5kIGRvZXMgbm90IHJldHVybiBhIHVzZXIgaW4gdGhlIHdlYmhvb2sgb2JqZWN0LlxuICAgKi9cbiAgYXN5bmMgbW9kaWZ5V2ViaG9va1dpdGhUb2tlbihcbiAgICB3ZWJob29rSWQ6IHN0cmluZyxcbiAgICB3ZWJob29rVG9rZW46IHN0cmluZyxcbiAgICBwYXlsb2FkOiB7IG5hbWU/OiBzdHJpbmc7IGF2YXRhcj86IHN0cmluZyB8IG51bGwgfVxuICApOiBQcm9taXNlPFdlYmhvb2tQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wYXRjaChgL3dlYmhvb2tzLyR7d2ViaG9va0lkfS8ke3dlYmhvb2tUb2tlbn1gLCBwYXlsb2FkKVxuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIHdlYmhvb2sgcGVybWFuZW50bHkuIFJlcXVpcmVzIHRoZSBgTUFOQUdFX1dFQkhPT0tTYCBwZXJtaXNzaW9uLiBSZXR1cm5zIGEgMjA0IE5PIENPTlRFTlQgcmVzcG9uc2Ugb24gc3VjY2Vzcy5cbiAgICovXG4gIGFzeW5jIGRlbGV0ZVdlYmhvb2sod2ViaG9va0lkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShgL3dlYmhvb2tzLyR7d2ViaG9va0lkfWApXG4gIH1cblxuICAvKipcbiAgICogU2FtZSBhcyBhYm92ZSwgZXhjZXB0IHRoaXMgY2FsbCBkb2VzIG5vdCByZXF1aXJlIGF1dGhlbnRpY2F0aW9uLlxuICAgKi9cbiAgYXN5bmMgZGVsZXRlV2ViaG9va1dpdGhUb2tlbihcbiAgICB3ZWJob29rSWQ6IHN0cmluZyxcbiAgICB3ZWJob29rVG9rZW46IHN0cmluZ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShgL3dlYmhvb2tzLyR7d2ViaG9va0lkfS8ke3dlYmhvb2tUb2tlbn1gKVxuICB9XG5cbiAgYXN5bmMgZXhlY3V0ZVdlYmhvb2soXG4gICAgd2ViaG9va0lkOiBzdHJpbmcsXG4gICAgd2ViaG9va1Rva2VuOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogQ3JlYXRlV2ViaG9va01lc3NhZ2VQYXlsb2FkXG4gICk6IFByb21pc2U8TWVzc2FnZVBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LnBvc3QoYC93ZWJob29rcy8ke3dlYmhvb2tJZH0vJHt3ZWJob29rVG9rZW59YCwgcGF5bG9hZClcbiAgfVxuXG4gIGFzeW5jIGV4ZWN1dGVTbGFja0NvbXBhdGlibGVXZWJob29rKFxuICAgIHdlYmhvb2tJZDogc3RyaW5nLFxuICAgIHdlYmhvb2tUb2tlbjogc3RyaW5nLFxuICAgIHBheWxvYWQ6IHVua25vd25cbiAgKTogUHJvbWlzZTxNZXNzYWdlUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucG9zdChcbiAgICAgIGAvd2ViaG9va3MvJHt3ZWJob29rSWR9LyR7d2ViaG9va1Rva2VufS9zbGFja2AsXG4gICAgICBwYXlsb2FkXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgZXhlY3V0ZUdpdEh1YkNvbXBhdGlibGVXZWJob29rKFxuICAgIHdlYmhvb2tJZDogc3RyaW5nLFxuICAgIHdlYmhvb2tUb2tlbjogc3RyaW5nLFxuICAgIHBheWxvYWQ6IHVua25vd25cbiAgKTogUHJvbWlzZTxNZXNzYWdlUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucG9zdChcbiAgICAgIGAvd2ViaG9va3MvJHt3ZWJob29rSWR9LyR7d2ViaG9va1Rva2VufS9naXRodWJgLFxuICAgICAgcGF5bG9hZFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBFZGl0cyBhIHByZXZpb3VzbHktc2VudCB3ZWJob29rIG1lc3NhZ2UgZnJvbSB0aGUgc2FtZSB0b2tlbi4gUmV0dXJucyBhIFttZXNzYWdlXSgjRE9DU19SRVNPVVJDRVNfQ0hBTk5FTC9tZXNzYWdlLW9iamVjdCkgb2JqZWN0IG9uIHN1Y2Nlc3MuXG4gICAqL1xuICBhc3luYyBlZGl0V2ViaG9va01lc3NhZ2UoXG4gICAgd2ViaG9va0lkOiBzdHJpbmcsXG4gICAgd2ViaG9va1Rva2VuOiBzdHJpbmcsXG4gICAgbWVzc2FnZUlkOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogQ3JlYXRlV2ViaG9va01lc3NhZ2VCYXNlUGF5bG9hZFxuICApOiBQcm9taXNlPE1lc3NhZ2VQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wYXRjaChcbiAgICAgIGAvd2ViaG9va3MvJHt3ZWJob29rSWR9LyR7d2ViaG9va1Rva2VufS9tZXNzYWdlcy8ke21lc3NhZ2VJZH1gLFxuICAgICAgcGF5bG9hZFxuICAgIClcbiAgfVxuXG4gIGFzeW5jIGdldEdhdGV3YXkoKTogUHJvbWlzZTx7IHVybDogc3RyaW5nIH0+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL2dhdGV3YXlgKVxuICB9XG5cbiAgYXN5bmMgZ2V0R2F0ZXdheUJvdCgpOiBQcm9taXNlPEdhdGV3YXlCb3RQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC9nYXRld2F5L2JvdGApXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYm90J3MgT0F1dGgyIFthcHBsaWNhdGlvbiBvYmplY3RdKCNET0NTX1RPUElDU19PQVVUSDIvYXBwbGljYXRpb24tb2JqZWN0KSB3aXRob3V0IGBmbGFnc2AuXG4gICAqL1xuICBhc3luYyBnZXRDdXJyZW50QXBwbGljYXRpb25JbmZvcm1hdGlvbigpOiBQcm9taXNlPEFwcGxpY2F0aW9uUGF5bG9hZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvb2F1dGgyL2FwcGxpY2F0aW9ucy9AbWVgKVxuICB9XG5cbiAgLy8gV2UgZG8gbm90IGluY2x1ZGUgdHlwZXMgZm9yIHRoaXMgb2JqZWN0LlxuICAvKipcbiAgICogUmV0dXJucyBpbmZvIGFib3V0IHRoZSBjdXJyZW50IGF1dGhvcml6YXRpb24uIFJlcXVpcmVzIGF1dGhlbnRpY2F0aW9uIHdpdGggYSBiZWFyZXIgdG9rZW4uXG4gICAqL1xuICBhc3luYyBnZXRDdXJyZW50QXV0aG9yaXphdGlvbkluZm9ybWF0aW9uKCk6IFByb21pc2U8dW5rbm93bj4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvb2F1dGgyL0BtZWApXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyB0aHJlYWQgZnJvbSBhbiBleGlzdGluZyBtZXNzYWdlLiBSZXR1cm5zIGEgY2hhbm5lbCBvbiBzdWNjZXNzLCBhbmQgYSA0MDAgQkFEIFJFUVVFU1Qgb24gaW52YWxpZCBwYXJhbWV0ZXJzLiBGaXJlcyBhIFRocmVhZCBDcmVhdGUgR2F0ZXdheSBldmVudC5cbiAgICovXG4gIGFzeW5jIHN0YXJ0UHVibGljVGhyZWFkRnJvbU1lc3NhZ2UoXG4gICAgY2hhbm5lbElkOiBzdHJpbmcsXG4gICAgbWVzc2FnZUlkOiBzdHJpbmcsXG4gICAgcGF5bG9hZDogQ3JlYXRlVGhyZWFkUGF5bG9hZFxuICApOiBQcm9taXNlPFRocmVhZENoYW5uZWxQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wb3N0KFxuICAgICAgYC9jaGFubmVscy8ke2NoYW5uZWxJZH0vbWVzc2FnZXMvJHttZXNzYWdlSWR9L3RocmVhZHNgLFxuICAgICAgcGF5bG9hZFxuICAgIClcbiAgfVxuXG4gIC8vIEV4aXN0IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBwdWJsaWMgdGhyZWFkIGZyb20gYW4gZXhpc3RpbmcgbWVzc2FnZS4gUmV0dXJucyBhIGNoYW5uZWwgb24gc3VjY2VzcywgYW5kIGEgNDAwIEJBRCBSRVFVRVNUIG9uIGludmFsaWQgcGFyYW1ldGVycy4gRmlyZXMgYSBUaHJlYWQgQ3JlYXRlIEdhdGV3YXkgZXZlbnQuXG4gICAqL1xuICBhc3luYyBzdGFydFB1YmxpY1RocmVhZChcbiAgICBjaGFubmVsSWQ6IHN0cmluZyxcbiAgICBtZXNzYWdlSWQ6IHN0cmluZyxcbiAgICBwYXlsb2FkOiBDcmVhdGVUaHJlYWRQYXlsb2FkXG4gICk6IFByb21pc2U8VGhyZWFkQ2hhbm5lbFBheWxvYWQ+IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5zdGFydFB1YmxpY1RocmVhZEZyb21NZXNzYWdlKFxuICAgICAgY2hhbm5lbElkLFxuICAgICAgbWVzc2FnZUlkLFxuICAgICAgcGF5bG9hZFxuICAgIClcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHRocmVhZCBmcm9tIGFuIGV4aXN0aW5nIG1lc3NhZ2UuIFJldHVybnMgYSBjaGFubmVsIG9uIHN1Y2Nlc3MsIGFuZCBhIDQwMCBCQUQgUkVRVUVTVCBvbiBpbnZhbGlkIHBhcmFtZXRlcnMuIEZpcmVzIGEgVGhyZWFkIENyZWF0ZSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgc3RhcnRUaHJlYWRXaXRob3V0TWVzc2FnZShcbiAgICBjaGFubmVsSWQ6IHN0cmluZyxcbiAgICBwYXlsb2FkOiBDcmVhdGVUaHJlYWRQYXlsb2FkXG4gICk6IFByb21pc2U8VGhyZWFkQ2hhbm5lbFBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LnBvc3QoYC9jaGFubmVscy8ke2NoYW5uZWxJZH0vdGhyZWFkc2AsIHBheWxvYWQpXG4gIH1cblxuICAvLyBFeGlzdCBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHlcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgcHJpdmF0ZSB0aHJlYWQuIFJldHVybnMgYSBjaGFubmVsIG9uIHN1Y2Nlc3MsIGFuZCBhIDQwMCBCQUQgUkVRVUVTVCBvbiBpbnZhbGlkIHBhcmFtZXRlcnMuIEZpcmVzIGEgVGhyZWFkIENyZWF0ZSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgc3RhcnRQcml2YXRlVGhyZWFkKFxuICAgIGNoYW5uZWxJZDogc3RyaW5nLFxuICAgIHBheWxvYWQ6IENyZWF0ZVRocmVhZFBheWxvYWRcbiAgKTogUHJvbWlzZTxUaHJlYWRDaGFubmVsUGF5bG9hZD4ge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnN0YXJ0VGhyZWFkV2l0aG91dE1lc3NhZ2UoY2hhbm5lbElkLCBwYXlsb2FkKVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIGN1cnJlbnQgdXNlciB0byBhIHRocmVhZC4gUmV0dXJucyBhIDIwNCBlbXB0eSByZXNwb25zZSBvbiBzdWNjZXNzLiBBbHNvIHJlcXVpcmVzIHRoZSB0aHJlYWQgaXMgbm90IGFyY2hpdmVkLiBGaXJlcyBhIFRocmVhZCBNZW1iZXJzIFVwZGF0ZSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgam9pblRocmVhZChjaGFubmVsSWQ6IHN0cmluZyk6IFByb21pc2U8dW5kZWZpbmVkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5wb3N0KGAvY2hhbm5lbHMvJHtjaGFubmVsSWR9L3RocmVhZC1tZW1iZXJzL0BtZWAsIHt9KVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYW5vdGhlciB1c2VyIHRvIGEgdGhyZWFkLiBSZXF1aXJlcyB0aGUgYWJpbGl0eSB0byBzZW5kIG1lc3NhZ2VzIGluIHRoZSB0aHJlYWQuIEFsc28gcmVxdWlyZXMgdGhlIHRocmVhZCBpcyBub3QgYXJjaGl2ZWQuIFJldHVybnMgYSAyMDQgZW1wdHkgcmVzcG9uc2Ugb24gc3VjY2Vzcy4gRmlyZXMgYSBUaHJlYWQgTWVtYmVycyBVcGRhdGUgR2F0ZXdheSBldmVudC5cbiAgICovXG4gIGFzeW5jIGFkZFVzZXJUb1RocmVhZChjaGFubmVsSWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHVuZGVmaW5lZD4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QucG9zdChgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS90aHJlYWQtbWVtYmVycy8ke3VzZXJJZH1gLCB7fSlcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBjdXJyZW50IHVzZXIgZnJvbSBhIHRocmVhZC4gUmV0dXJucyBhIDIwNCBlbXB0eSByZXNwb25zZSBvbiBzdWNjZXNzLiBGaXJlcyBhIFRocmVhZCBNZW1iZXJzIFVwZGF0ZSBHYXRld2F5IGV2ZW50LlxuICAgKi9cbiAgYXN5bmMgbGVhdmVUaHJlYWQoY2hhbm5lbElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS90aHJlYWQtbWVtYmVycy9AbWVgKVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYW5vdGhlciB1c2VyIGZyb20gYSB0aHJlYWQuIFJlcXVpcmVzIHRoZSBNQU5BR0VfVEhSRUFEUyBwZXJtaXNzaW9uIG9yIHRoYXQgeW91IGFyZSB0aGUgY3JlYXRvciBvZiB0aGUgdGhyZWFkLiBBbHNvIHJlcXVpcmVzIHRoZSB0aHJlYWQgaXMgbm90IGFyY2hpdmVkLiBSZXR1cm5zIGEgMjA0IGVtcHR5IHJlc3BvbnNlIG9uIHN1Y2Nlc3MuIEZpcmVzIGEgVGhyZWFkIE1lbWJlcnMgVXBkYXRlIEdhdGV3YXkgZXZlbnQuXG4gICAqL1xuICBhc3luYyByZW1vdmVVc2VyRnJvbVRocmVhZChjaGFubmVsSWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmRlbGV0ZShgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS90aHJlYWQtbWVtYmVycy8ke3VzZXJJZH1gKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYXJjaGl2ZWQgdGhyZWFkcyBpbiB0aGUgY2hhbm5lbCB0aGF0IGFyZSBwdWJsaWMuIFdoZW4gY2FsbGVkIG9uIGEgR1VJTERfVEVYVCBjaGFubmVsLCByZXR1cm5zIHRocmVhZHMgb2YgdHlwZSBQVUJMSUNfVEhSRUFELiBXaGVuIGNhbGxlZCBvbiBhIEdVSUxEX05FV1MgY2hhbm5lbCByZXR1cm5zIHRocmVhZHMgb2YgdHlwZSBORVdTX1RIUkVBRC4gVGhyZWFkcyBhcmUgb3JkZXJlZCBieSBhcmNoaXZlX3RpbWVzdGFtcCwgaW4gZGVzY2VuZGluZyBvcmRlci4gUmVxdWlyZXMgdGhlIFJFQURfTUVTU0FHRV9ISVNUT1JZIHBlcm1pc3Npb24uXG4gICAqL1xuICBhc3luYyBnZXRQdWJsaWNBcmNoaXZlZFRocmVhZHMoXG4gICAgY2hhbm5lbElkOiBzdHJpbmcsXG4gICAgcGFyYW1zOiB7IGJlZm9yZT86IHN0cmluZzsgbGltaXQ/OiBudW1iZXIgfSA9IHt9XG4gICk6IFByb21pc2U8e1xuICAgIHRocmVhZHM6IFRocmVhZENoYW5uZWxQYXlsb2FkW11cbiAgICBtZW1iZXJzOiBUaHJlYWRNZW1iZXJQYXlsb2FkW11cbiAgICBoYXNfbW9yZTogYm9vbGVhblxuICB9PiB7XG4gICAgY29uc3QgcXMgPSBxdWVyeVN0cmluZyhwYXJhbXMpXG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoXG4gICAgICBgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS90aHJlYWRzL2FyY2hpdmVkL3B1YmxpYyR7XG4gICAgICAgIHFzLmxlbmd0aCAhPT0gMCA/IGA/JHtxc31gIDogJydcbiAgICAgIH1gXG4gICAgKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYXJjaGl2ZWQgdGhyZWFkcyBpbiB0aGUgY2hhbm5lbCB0aGF0IGFyZSBvZiB0eXBlIFBSSVZBVEVfVEhSRUFELiBUaHJlYWRzIGFyZSBvcmRlcmVkIGJ5IGFyY2hpdmVfdGltZXN0YW1wLCBpbiBkZXNjZW5kaW5nIG9yZGVyLiBSZXF1aXJlcyBib3RoIHRoZSBSRUFEX01FU1NBR0VfSElTVE9SWSBhbmQgTUFOQUdFX1RIUkVBRFMgcGVybWlzc2lvbnMuXG4gICAqL1xuICBhc3luYyBnZXRQcml2YXRlQXJjaGl2ZWRUaHJlYWRzKFxuICAgIGNoYW5uZWxJZDogc3RyaW5nLFxuICAgIHBhcmFtczogeyBiZWZvcmU/OiBzdHJpbmc7IGxpbWl0PzogbnVtYmVyIH0gPSB7fVxuICApOiBQcm9taXNlPHtcbiAgICB0aHJlYWRzOiBUaHJlYWRDaGFubmVsUGF5bG9hZFtdXG4gICAgbWVtYmVyczogVGhyZWFkTWVtYmVyUGF5bG9hZFtdXG4gICAgaGFzX21vcmU6IGJvb2xlYW5cbiAgfT4ge1xuICAgIGNvbnN0IHFzID0gcXVlcnlTdHJpbmcocGFyYW1zKVxuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KFxuICAgICAgYC9jaGFubmVscy8ke2NoYW5uZWxJZH0vdGhyZWFkcy9hcmNoaXZlZC9wcml2YXRlJHtcbiAgICAgICAgcXMubGVuZ3RoICE9PSAwID8gYD8ke3FzfWAgOiAnJ1xuICAgICAgfWBcbiAgICApXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhcmNoaXZlZCB0aHJlYWRzIGluIHRoZSBjaGFubmVsIHRoYXQgYXJlIG9mIHR5cGUgUFJJVkFURV9USFJFQUQsIGFuZCB0aGUgdXNlciBoYXMgam9pbmVkLiBUaHJlYWRzIGFyZSBvcmRlcmVkIGJ5IHRoZWlyIGlkLCBpbiBkZXNjZW5kaW5nIG9yZGVyLiBSZXF1aXJlcyB0aGUgUkVBRF9NRVNTQUdFX0hJU1RPUlkgcGVybWlzc2lvbi5cbiAgICovXG4gIGFzeW5jIGdldEpvaW5lZFByaXZhdGVBcmNoaXZlZFRocmVhZHMoXG4gICAgY2hhbm5lbElkOiBzdHJpbmcsXG4gICAgcGFyYW1zOiB7IGJlZm9yZT86IHN0cmluZzsgbGltaXQ/OiBudW1iZXIgfSA9IHt9XG4gICk6IFByb21pc2U8e1xuICAgIHRocmVhZHM6IFRocmVhZENoYW5uZWxQYXlsb2FkW11cbiAgICBtZW1iZXJzOiBUaHJlYWRNZW1iZXJQYXlsb2FkW11cbiAgICBoYXNfbW9yZTogYm9vbGVhblxuICB9PiB7XG4gICAgY29uc3QgcXMgPSBxdWVyeVN0cmluZyhwYXJhbXMpXG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoXG4gICAgICBgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS91c2Vycy9AbWUvdGhyZWFkcy9hcmNoaXZlZC9wcml2YXRlJHtcbiAgICAgICAgcXMubGVuZ3RoICE9PSAwID8gYD8ke3FzfWAgOiAnJ1xuICAgICAgfWBcbiAgICApXG4gIH1cblxuICAvKiogUmV0dXJucyBhbGwgYWN0aXZlIHRocmVhZHMgaW4gdGhlIGNoYW5uZWwsIGluY2x1ZGluZyBwdWJsaWMgYW5kIHByaXZhdGUgdGhyZWFkcy4gVGhyZWFkcyBhcmUgb3JkZXJlZCBieSB0aGVpciBpZCwgaW4gZGVzY2VuZGluZyBvcmRlci4gUmVxdWlyZXMgdGhlIFJFQURfTUVTU0FHRV9ISVNUT1JZIHBlcm1pc3Npb24uICovXG4gIGFzeW5jIGdldEFjdGl2ZVRocmVhZHMoXG4gICAgY2hhbm5lbElkOiBzdHJpbmcsXG4gICAgcGFyYW1zOiB7IGJlZm9yZT86IHN0cmluZzsgbGltaXQ/OiBudW1iZXIgfSA9IHt9XG4gICk6IFByb21pc2U8e1xuICAgIHRocmVhZHM6IFRocmVhZENoYW5uZWxQYXlsb2FkW11cbiAgICBtZW1iZXJzOiBUaHJlYWRNZW1iZXJQYXlsb2FkW11cbiAgICBoYXNfbW9yZTogYm9vbGVhblxuICB9PiB7XG4gICAgY29uc3QgcXMgPSBxdWVyeVN0cmluZyhwYXJhbXMpXG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoXG4gICAgICBgL2NoYW5uZWxzLyR7Y2hhbm5lbElkfS90aHJlYWRzL2FjdGl2ZSR7cXMubGVuZ3RoICE9PSAwID8gYD8ke3FzfWAgOiAnJ31gXG4gICAgKVxuICB9XG5cbiAgLyoqIFJldHVybnMgYXJyYXkgb2YgdGhyZWFkIG1lbWJlcnMgb2JqZWN0cyB0aGF0IGFyZSBtZW1iZXJzIG9mIHRoZSB0aHJlYWQuICovXG4gIGFzeW5jIGdldFRocmVhZE1lbWJlcnMoY2hhbm5lbElkOiBzdHJpbmcpOiBQcm9taXNlPFRocmVhZE1lbWJlclBheWxvYWRbXT4ge1xuICAgIHJldHVybiB0aGlzLnJlc3QuZ2V0KGAvY2hhbm5lbHMvJHtjaGFubmVsSWR9L3RocmVhZC1tZW1iZXJzYClcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIGEgc3RpY2tlciBvYmplY3QgZm9yIHRoZSBnaXZlbiBzdGlja2VyIElELiAqL1xuICBhc3luYyBnZXRTdGlja2VyKHN0aWNrZXJJRDogc3RyaW5nKTogUHJvbWlzZTxNZXNzYWdlU3RpY2tlclBheWxvYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL3N0aWNrZXJzLyR7c3RpY2tlcklEfWApXG4gIH1cblxuICAvKiogUmV0dXJucyB0aGUgbGlzdCBvZiBzdGlja2VyIHBhY2tzIGF2YWlsYWJsZSB0byBOaXRybyBzdWJzY3JpYmVycy4gKi9cbiAgYXN5bmMgZ2V0U3RpY2tlclBhY2tzKCk6IFByb21pc2U8TWVzc2FnZVN0aWNrZXJQYWNrUGF5bG9hZFtdPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC9zdGlja2VyLXBhY2tzYCkudGhlbigoZSkgPT4gZS5zdGlja2VyX3BhY2tzKVxuICB9XG5cbiAgLyoqIFJldHVybnMgYW4gYXJyYXkgb2Ygc3RpY2tlciBvYmplY3RzIGZvciB0aGUgZ2l2ZW4gZ3VpbGQuIEluY2x1ZGVzIHVzZXIgZmllbGRzIGlmIHRoZSBib3QgaGFzIHRoZSBNQU5BR0VfRU1PSklTX0FORF9TVElDS0VSUyBwZXJtaXNzaW9uLiAqL1xuICBhc3luYyBnZXRHdWlsZFN0aWNrZXJzKGd1aWxkSUQ6IHN0cmluZyk6IFByb21pc2U8TWVzc2FnZVN0aWNrZXJQYXlsb2FkW10+IHtcbiAgICByZXR1cm4gdGhpcy5yZXN0LmdldChgL2d1aWxkcy8ke2d1aWxkSUR9L3N0aWNrZXJzYClcbiAgfVxuXG4gIC8qKiBSZXR1cm5zIGEgc3RpY2tlciBvYmplY3QgZm9yIHRoZSBnaXZlbiBndWlsZCBhbmQgc3RpY2tlciBJRHMuIEluY2x1ZGVzIHRoZSB1c2VyIGZpZWxkIGlmIHRoZSBib3QgaGFzIHRoZSBNQU5BR0VfRU1PSklTX0FORF9TVElDS0VSUyBwZXJtaXNzaW9uLiAqL1xuICBhc3luYyBnZXRHdWlsZFN0aWNrZXIoXG4gICAgZ3VpbGRJRDogc3RyaW5nLFxuICAgIHN0aWNrZXJJRDogc3RyaW5nXG4gICk6IFByb21pc2U8TWVzc2FnZVN0aWNrZXJQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5nZXQoYC9ndWlsZHMvJHtndWlsZElEfS9zdGlja2Vycy8ke3N0aWNrZXJJRH1gKVxuICB9XG5cbiAgLyoqIENyZWF0ZSBhIG5ldyBzdGlja2VyIGZvciB0aGUgZ3VpbGQuIFNlbmQgYSBtdWx0aXBhcnQvZm9ybS1kYXRhIGJvZHkuIFJlcXVpcmVzIHRoZSBNQU5BR0VfRU1PSklTX0FORF9TVElDS0VSUyBwZXJtaXNzaW9uLiBSZXR1cm5zIHRoZSBuZXcgc3RpY2tlciBvYmplY3Qgb24gc3VjY2Vzcy4gKi9cbiAgYXN5bmMgY3JlYXRlR3VpbGRTdGlja2VyKFxuICAgIGd1aWxkSUQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiBDcmVhdGVHdWlsZFN0aWNrZXJPcHRpb25zXG4gICk6IFByb21pc2U8TWVzc2FnZVN0aWNrZXJQYXlsb2FkPiB7XG4gICAgY29uc3QgZGF0YSA9IG5ldyBGb3JtRGF0YSgpXG4gICAgZGF0YS5hcHBlbmQoJ25hbWUnLCBvcHRpb25zLm5hbWUpXG4gICAgZGF0YS5hcHBlbmQoJ2Rlc2NyaXB0aW9uJywgb3B0aW9ucy5kZXNjcmlwdGlvbilcbiAgICBkYXRhLmFwcGVuZCgndGFncycsIG9wdGlvbnMudGFncylcbiAgICBkYXRhLmFwcGVuZChcbiAgICAgICdmaWxlJyxcbiAgICAgIG9wdGlvbnMuZmlsZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXlcbiAgICAgICAgPyBuZXcgQmxvYihbb3B0aW9ucy5maWxlXSlcbiAgICAgICAgOiBvcHRpb25zLmZpbGVcbiAgICApXG5cbiAgICByZXR1cm4gdGhpcy5yZXN0LnJlcXVlc3QoJ3Bvc3QnLCBgL2d1aWxkcy8ke2d1aWxkSUR9L3N0aWNrZXJzYCwge1xuICAgICAgZGF0YSxcbiAgICAgIHJlYXNvbjogb3B0aW9ucy5yZWFzb25cbiAgICB9KVxuICB9XG5cbiAgLyoqIE1vZGlmeSB0aGUgZ2l2ZW4gc3RpY2tlci4gUmVxdWlyZXMgdGhlIE1BTkFHRV9FTU9KSVNfQU5EX1NUSUNLRVJTIHBlcm1pc3Npb24uIFJldHVybnMgdGhlIHVwZGF0ZWQgc3RpY2tlciBvYmplY3Qgb24gc3VjY2Vzcy4gKi9cbiAgYXN5bmMgbW9kaWZ5R3VpbGRTdGlja2VyKFxuICAgIGd1aWxkSUQ6IHN0cmluZyxcbiAgICBzdGlja2VySUQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiBQYXJ0aWFsPE1vZGlmeUd1aWxkU3RpY2tlck9wdGlvbnM+XG4gICk6IFByb21pc2U8TWVzc2FnZVN0aWNrZXJQYXlsb2FkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5yZXF1ZXN0KFxuICAgICAgJ3Bvc3QnLFxuICAgICAgYC9ndWlsZHMvJHtndWlsZElEfS9zdGlja2Vycy8ke3N0aWNrZXJJRH1gLFxuICAgICAge1xuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgbmFtZTogb3B0aW9ucy5uYW1lLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBvcHRpb25zLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIHRhZ3M6IG9wdGlvbnMudGFnc1xuICAgICAgICB9LFxuICAgICAgICByZWFzb246IG9wdGlvbnMucmVhc29uXG4gICAgICB9XG4gICAgKVxuICB9XG5cbiAgLyoqIERlbGV0ZSB0aGUgZ2l2ZW4gc3RpY2tlci4gUmVxdWlyZXMgdGhlIE1BTkFHRV9FTU9KSVNfQU5EX1NUSUNLRVJTIHBlcm1pc3Npb24uIFJldHVybnMgMjA0IE5vIENvbnRlbnQgb24gc3VjY2Vzcy4gKi9cbiAgYXN5bmMgZGVsZXRlR3VpbGRTdGlja2VyKFxuICAgIGd1aWxkSUQ6IHN0cmluZyxcbiAgICBzdGlja2VySUQ6IHN0cmluZyxcbiAgICByZWFzb24/OiBzdHJpbmdcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIHRoaXMucmVzdC5yZXF1ZXN0KFxuICAgICAgJ2RlbGV0ZScsXG4gICAgICBgL2d1aWxkcy8ke2d1aWxkSUR9L3N0aWNrZXJzLyR7c3RpY2tlcklEfWAsXG4gICAgICB7IHJlYXNvbiB9XG4gICAgKVxuICB9XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBb0RBLFNBQVMsWUFDUCxHQUFNLEVBQ0U7SUFDUixPQUFPLE9BQU8sT0FBTyxDQUFDLEtBQ25CLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUssQ0FBQyxFQUFFLG1CQUFtQixHQUFHLENBQUMsRUFBRSxtQkFBbUIsR0FBRyxDQUFDLEVBQ25FLElBQUksQ0FBQztBQUNWO0FBRUEsT0FBTyxNQUFNO0lBQ1gsS0FBa0I7SUFDbEIsWUFBWSxJQUFpQixDQUFFO1FBQzdCLE9BQU8sY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2xDLE9BQU87WUFDUCxZQUFZLEtBQUs7UUFDbkI7SUFDRjtJQUVBOztHQUVDLEdBQ0QsTUFBTSxnQkFBZ0IsYUFBcUIsRUFBb0I7UUFDN0QsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLGNBQWMsRUFBRSxjQUFjLGFBQWEsQ0FBQztJQUNwRTtJQUVBOztHQUVDLEdBQ0QsTUFBTSxlQUNKLGFBQXFCLEVBQ3JCLGFBQXFCLEVBQ0g7UUFDbEIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FDbEIsQ0FBQyxjQUFjLEVBQUUsY0FBYyxjQUFjLEVBQUUsY0FBYyxDQUFDO0lBRWxFO0lBRUE7O0dBRUMsR0FDRCxNQUFNLFFBQVEsYUFBcUIsRUFBb0I7UUFDckQsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FB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