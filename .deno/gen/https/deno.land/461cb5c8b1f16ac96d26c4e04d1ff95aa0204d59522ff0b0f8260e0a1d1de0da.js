import { User } from '../../structures/user.ts';
export const guildMemberRemove = async (gateway, d)=>{
    const guild = await gateway.client.guilds.get(d.guild_id);
    // Weird case, shouldn't happen
    if (guild === undefined) return;
    await gateway.client.users.set(d.user.id, d.user);
    const member = await guild.members.get(d.user.id);
    await guild.members._delete(d.user.id);
    if (member !== undefined) gateway.client.emit('guildMemberRemove', member);
    else {
        const user = new User(gateway.client, d.user);
        gateway.client.emit('guildMemberRemoveUncached', user);
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3gvaGFybW9ueUB2Mi45LjAvc3JjL2dhdGV3YXkvaGFuZGxlcnMvZ3VpbGRNZW1iZXJSZW1vdmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBHYXRld2F5LCBHYXRld2F5RXZlbnRIYW5kbGVyIH0gZnJvbSAnLi4vbW9kLnRzJ1xuaW1wb3J0IHsgR3VpbGQgfSBmcm9tICcuLi8uLi9zdHJ1Y3R1cmVzL2d1aWxkLnRzJ1xuaW1wb3J0IHsgVXNlciB9IGZyb20gJy4uLy4uL3N0cnVjdHVyZXMvdXNlci50cydcbmltcG9ydCB7IEd1aWxkTWVtYmVyUmVtb3ZlUGF5bG9hZCB9IGZyb20gJy4uLy4uL3R5cGVzL2dhdGV3YXkudHMnXG5cbmV4cG9ydCBjb25zdCBndWlsZE1lbWJlclJlbW92ZTogR2F0ZXdheUV2ZW50SGFuZGxlciA9IGFzeW5jIChcbiAgZ2F0ZXdheTogR2F0ZXdheSxcbiAgZDogR3VpbGRNZW1iZXJSZW1vdmVQYXlsb2FkXG4pID0+IHtcbiAgY29uc3QgZ3VpbGQ6IEd1aWxkIHwgdW5kZWZpbmVkID0gYXdhaXQgZ2F0ZXdheS5jbGllbnQuZ3VpbGRzLmdldChkLmd1aWxkX2lkKVxuICAvLyBXZWlyZCBjYXNlLCBzaG91bGRuJ3QgaGFwcGVuXG4gIGlmIChndWlsZCA9PT0gdW5kZWZpbmVkKSByZXR1cm5cblxuICBhd2FpdCBnYXRld2F5LmNsaWVudC51c2Vycy5zZXQoZC51c2VyLmlkLCBkLnVzZXIpXG4gIGNvbnN0IG1lbWJlciA9IGF3YWl0IGd1aWxkLm1lbWJlcnMuZ2V0KGQudXNlci5pZClcbiAgYXdhaXQgZ3VpbGQubWVtYmVycy5fZGVsZXRlKGQudXNlci5pZClcblxuICBpZiAobWVtYmVyICE9PSB1bmRlZmluZWQpIGdhdGV3YXkuY2xpZW50LmVtaXQoJ2d1aWxkTWVtYmVyUmVtb3ZlJywgbWVtYmVyKVxuICBlbHNlIHtcbiAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoZ2F0ZXdheS5jbGllbnQsIGQudXNlcilcbiAgICBnYXRld2F5LmNsaWVudC5lbWl0KCdndWlsZE1lbWJlclJlbW92ZVVuY2FjaGVkJywgdXNlcilcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLFNBQVMsSUFBSSxRQUFRLDJCQUEwQjtBQUcvQyxPQUFPLE1BQU0sb0JBQXlDLE9BQ3BELFNBQ0EsSUFDRztJQUNILE1BQU0sUUFBMkIsTUFBTSxRQUFRLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsUUFBUTtJQUMzRSwrQkFBK0I7SUFDL0IsSUFBSSxVQUFVLFdBQVc7SUFFekIsTUFBTSxRQUFRLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUk7SUFDaEQsTUFBTSxTQUFTLE1BQU0sTUFBTSxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLEVBQUU7SUFDaEQsTUFBTSxNQUFNLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxJQUFJLENBQUMsRUFBRTtJQUVyQyxJQUFJLFdBQVcsV0FBVyxRQUFRLE1BQU0sQ0FBQyxJQUFJLENBQUMscUJBQXFCO1NBQzlEO1FBQ0gsTUFBTSxPQUFPLElBQUksS0FBSyxRQUFRLE1BQU0sRUFBRSxFQUFFLElBQUk7UUFDNUMsUUFBUSxNQUFNLENBQUMsSUFBSSxDQUFDLDZCQUE2QjtJQUNuRCxDQUFDO0FBQ0gsRUFBQyJ9